{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Button.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { ButtonHTMLAttributes, forwardRef, ReactElement } from 'react';\r\n\r\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\r\n  function Button(\r\n    { variant = 'primary', size = 'md', className = '', children, ...props },\r\n    ref\r\n  ): ReactElement {\r\n    const baseStyles = 'font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n    \r\n    const variantStyles = {\r\n      primary: 'bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-900',\r\n      secondary: 'bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500',\r\n      outline: 'bg-transparent text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500',\r\n      ghost: 'bg-transparent text-gray-900 hover:bg-gray-100 focus:ring-gray-500',\r\n    };\r\n    \r\n    const sizeStyles = {\r\n      sm: 'px-3 py-1.5 text-sm',\r\n      md: 'px-4 py-2 text-base',\r\n      lg: 'px-6 py-3 text-lg',\r\n    };\r\n    \r\n    return (\r\n      <button\r\n        ref={ref}\r\n        className={`${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${className}`}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,MAAM,uBAAS,IAAA,2KAAU,OAC9B,SAAS,OACP,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,EACxE,GAAG;IAEH,MAAM,aAAa;IAEnB,MAAM,gBAAgB;QACpB,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,GAAG,WAAW,CAAC,EAAE,aAAa,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;QACpF,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Card.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { HTMLAttributes, forwardRef, ReactElement } from 'react';\r\n\r\ninterface CardProps extends HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Card = forwardRef<HTMLDivElement, CardProps>(\r\n  function Card({ className = '', children, ...props }, ref): ReactElement {\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={`bg-white border border-gray-200 rounded-lg shadow-sm ${className}`}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,MAAM,qBAAO,IAAA,2KAAU,OAC5B,SAAS,KAAK,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,GAAG;IACvD,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,CAAC,qDAAqD,EAAE,WAAW;QAC7E,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Input.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { InputHTMLAttributes, forwardRef } from 'react';\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  label?: string;\r\n  error?: string;\r\n}\r\n\r\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\r\n  function Input({ label, error, className = '', onKeyDown, ...props }, ref) {\r\n    // Ensure pipe character (|) works in all input fields\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      // Allow pipe character (|) - key code 220 or Shift+Backslash\r\n      if (e.key === '|' || e.keyCode === 220 || (e.shiftKey && e.key === '\\\\')) {\r\n        // Allow the default behavior for pipe character\r\n        return;\r\n      }\r\n      \r\n      // Call original onKeyDown if provided\r\n      if (onKeyDown) {\r\n        onKeyDown(e);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"w-full\">\r\n        {label && (\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            {label}\r\n          </label>\r\n        )}\r\n        <input\r\n          ref={ref}\r\n          className={`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed ${\r\n            error ? 'border-error focus:ring-error' : 'border-gray-300'\r\n          } ${className}`}\r\n          onKeyDown={handleKeyDown}\r\n          {...props}\r\n        />\r\n        {error && (\r\n          <p className=\"mt-1 text-sm text-error\">{error}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,MAAM,sBAAQ,IAAA,2KAAU,OAC7B,SAAS,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,GAAG;IACvE,sDAAsD;IACtD,MAAM,gBAAgB,CAAC;QACrB,6DAA6D;QAC7D,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,OAAO,KAAK,OAAQ,EAAE,QAAQ,IAAI,EAAE,GAAG,KAAK,MAAO;YACxE,gDAAgD;YAChD;QACF;QAEA,sCAAsC;QACtC,IAAI,WAAW;YACb,UAAU;QACZ;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,uBACC,6LAAC;gBAAM,WAAU;0BACd;;;;;;0BAGL,6LAAC;gBACC,KAAK;gBACL,WAAW,CAAC,gKAAgK,EAC1K,QAAQ,kCAAkC,kBAC3C,CAAC,EAAE,WAAW;gBACf,WAAW;gBACV,GAAG,KAAK;;;;;;YAEV,uBACC,6LAAC;gBAAE,WAAU;0BAA2B;;;;;;;;;;;;AAIhD"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/index.ts"],"sourcesContent":["export { Button } from './Button';\r\nexport { Card } from './Card';\r\nexport { Input } from './Input';\r\n\r\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/BasicInformation.tsx"],"sourcesContent":["'use client';\r\n\r\nimport type { ChangeEvent } from 'react';\r\nimport { Input } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\n\r\ninterface BasicInformationProps {\r\n  productType: 'simple' | 'variable';\r\n  setProductType: (type: 'simple' | 'variable') => void;\r\n  title: string;\r\n  slug: string;\r\n  descriptionHtml: string;\r\n  onTitleChange: (e: ChangeEvent<HTMLInputElement>) => void;\r\n  onSlugChange: (e: ChangeEvent<HTMLInputElement>) => void;\r\n  onDescriptionChange: (e: ChangeEvent<HTMLTextAreaElement>) => void;\r\n}\r\n\r\nexport function BasicInformation({\r\n  productType,\r\n  setProductType,\r\n  title,\r\n  slug,\r\n  descriptionHtml,\r\n  onTitleChange,\r\n  onSlugChange,\r\n  onDescriptionChange,\r\n}: BasicInformationProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{t('admin.products.add.basicInformation')}</h2>\r\n      <div className=\"space-y-4\">\r\n        {/* Product Type Selector */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            {t('admin.products.add.productType')} *\r\n          </label>\r\n          <p className=\"text-xs text-gray-500 mb-3\">\r\n            {t('admin.products.add.productTypeDescription')}\r\n          </p>\r\n          <div className=\"flex gap-4\">\r\n            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"productType\"\r\n                value=\"simple\"\r\n                checked={productType === 'simple'}\r\n                onChange={(e) => setProductType(e.target.value as 'simple' | 'variable')}\r\n                className=\"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500\"\r\n              />\r\n              <span className=\"text-sm text-gray-700\">{t('admin.products.add.productTypeSimple')}</span>\r\n            </label>\r\n            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"productType\"\r\n                value=\"variable\"\r\n                checked={productType === 'variable'}\r\n                onChange={(e) => setProductType(e.target.value as 'simple' | 'variable')}\r\n                className=\"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500\"\r\n              />\r\n              <span className=\"text-sm text-gray-700\">{t('admin.products.add.productTypeVariable')}</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            {t('admin.products.add.title')} *\r\n          </label>\r\n          <Input\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={onTitleChange}\r\n            required\r\n            placeholder={t('admin.products.add.productTitlePlaceholder')}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            {t('admin.products.add.slug')} *\r\n          </label>\r\n          <Input\r\n            type=\"text\"\r\n            value={slug}\r\n            onChange={onSlugChange}\r\n            required\r\n            placeholder={t('admin.products.add.productSlugPlaceholder')}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            {t('admin.products.add.description')}\r\n          </label>\r\n          <textarea\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            rows={6}\r\n            value={descriptionHtml}\r\n            onChange={onDescriptionChange}\r\n            placeholder={t('admin.products.add.productDescriptionPlaceholder')}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;;;AAJA;;;AAiBO,SAAS,iBAAiB,EAC/B,WAAW,EACX,cAAc,EACd,KAAK,EACL,IAAI,EACJ,eAAe,EACf,aAAa,EACb,YAAY,EACZ,mBAAmB,EACG;;IACtB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAE5B,qBACE,6LAAC;;0BACC,6LAAC;gBAAG,WAAU;0BAA4C,EAAE;;;;;;0BAC5D,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;;oCACd,EAAE;oCAAkC;;;;;;;0CAEvC,6LAAC;gCAAE,WAAU;0CACV,EAAE;;;;;;0CAEL,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,WAAU;;0DACf,6LAAC;gDACC,MAAK;gDACL,MAAK;gDACL,OAAM;gDACN,SAAS,gBAAgB;gDACzB,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,WAAU;;;;;;0DAEZ,6LAAC;gDAAK,WAAU;0DAAyB,EAAE;;;;;;;;;;;;kDAE7C,6LAAC;wCAAM,WAAU;;0DACf,6LAAC;gDACC,MAAK;gDACL,MAAK;gDACL,OAAM;gDACN,SAAS,gBAAgB;gDACzB,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,WAAU;;;;;;0DAEZ,6LAAC;gDAAK,WAAU;0DAAyB,EAAE;;;;;;;;;;;;;;;;;;;;;;;;kCAKjD,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;;oCACd,EAAE;oCAA4B;;;;;;;0CAEjC,6LAAC,oIAAK;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU;gCACV,QAAQ;gCACR,aAAa,EAAE;;;;;;;;;;;;kCAInB,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;;oCACd,EAAE;oCAA2B;;;;;;;0CAEhC,6LAAC,oIAAK;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU;gCACV,QAAQ;gCACR,aAAa,EAAE;;;;;;;;;;;;kCAInB,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CACd,EAAE;;;;;;0CAEL,6LAAC;gCACC,WAAU;gCACV,MAAM;gCACN,OAAO;gCACP,UAAU;gCACV,aAAa,EAAE;;;;;;;;;;;;;;;;;;;;;;;;AAM3B;GA3FgB;;QAUA,yJAAc;;;KAVd"}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/ProductImages.tsx"],"sourcesContent":["'use client';\r\n\r\nimport type { ChangeEvent, RefObject } from 'react';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\n\r\ninterface ProductImagesProps {\r\n  imageUrls: string[];\r\n  featuredImageIndex: number;\r\n  imageUploadLoading: boolean;\r\n  imageUploadError: string | null;\r\n  fileInputRef: RefObject<HTMLInputElement>;\r\n  onUploadImages: (event: ChangeEvent<HTMLInputElement>) => void;\r\n  onRemoveImage: (index: number) => void;\r\n  onSetFeaturedImage: (index: number) => void;\r\n}\r\n\r\nexport function ProductImages({\r\n  imageUrls,\r\n  featuredImageIndex,\r\n  imageUploadLoading,\r\n  imageUploadError,\r\n  fileInputRef,\r\n  onUploadImages,\r\n  onRemoveImage,\r\n  onSetFeaturedImage,\r\n}: ProductImagesProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{t('admin.products.add.mainProductImage')}</h2>\r\n      <div className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            {t('admin.products.add.productImages')}\r\n            <span className=\"text-xs text-gray-500 ml-2\">({t('admin.products.add.uploadMultipleImages')})</span>\r\n          </label>\r\n          \r\n          {/* Upload Button */}\r\n          <div className=\"mb-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => fileInputRef.current?.click()}\r\n              disabled={imageUploadLoading}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n              </svg>\r\n              {imageUploadLoading ? t('admin.products.add.uploading') : t('admin.products.add.uploadImages')}\r\n            </button>\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              multiple\r\n              onChange={onUploadImages}\r\n              className=\"hidden\"\r\n            />\r\n          </div>\r\n\r\n          {/* Images Grid */}\r\n          {imageUrls.length > 0 && (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n              {imageUrls.map((imageUrl, index) => (\r\n                <div key={index} className=\"relative group\">\r\n                  <div className={`relative border-2 rounded-md overflow-hidden ${\r\n                    featuredImageIndex === index \r\n                      ? 'border-blue-500 ring-2 ring-blue-300' \r\n                      : 'border-gray-300'\r\n                  }`}>\r\n                    <img\r\n                      src={imageUrl}\r\n                      alt={`Product image ${index + 1}`}\r\n                      className=\"w-full h-48 object-cover\"\r\n                    />\r\n                    \r\n                    {/* Main Checkbox */}\r\n                    <div className=\"absolute top-2 left-2\">\r\n                      <label className=\"flex items-center gap-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-md cursor-pointer hover:bg-white transition-colors\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={featuredImageIndex === index}\r\n                          onChange={() => onSetFeaturedImage(index)}\r\n                          className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                        />\r\n                        <span className=\"text-xs font-medium text-gray-700\">\r\n                          {featuredImageIndex === index ? t('admin.products.add.main') : t('admin.products.add.setAsMain')}\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* Remove Button */}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => onRemoveImage(index)}\r\n                      className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition-colors opacity-0 group-hover:opacity-100\"\r\n                      title={t('admin.products.add.removeImage')}\r\n                    >\r\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                      </svg>\r\n                    </button>\r\n\r\n                    {/* Main Badge */}\r\n                    {featuredImageIndex === index && (\r\n                      <div className=\"absolute bottom-2 left-2 bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium\">\r\n                        {t('admin.products.add.main')}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {imageUploadError && (\r\n            <div className=\"mt-2 text-sm text-red-600\">\r\n              {imageUploadError}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAgBO,SAAS,cAAc,EAC5B,SAAS,EACT,kBAAkB,EAClB,kBAAkB,EAClB,gBAAgB,EAChB,YAAY,EACZ,cAAc,EACd,aAAa,EACb,kBAAkB,EACC;;IACnB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAE5B,qBACE,6LAAC;;0BACC,6LAAC;gBAAG,WAAU;0BAA4C,EAAE;;;;;;0BAC5D,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;;sCACC,6LAAC;4BAAM,WAAU;;gCACd,EAAE;8CACH,6LAAC;oCAAK,WAAU;;wCAA6B;wCAAE,EAAE;wCAA2C;;;;;;;;;;;;;sCAI9F,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,MAAK;oCACL,SAAS,IAAM,aAAa,OAAO,EAAE;oCACrC,UAAU;oCACV,WAAU;;sDAEV,6LAAC;4CAAI,WAAU;4CAAU,MAAK;4CAAO,QAAO;4CAAe,SAAQ;sDACjE,cAAA,6LAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAa;gDAAG,GAAE;;;;;;;;;;;wCAEtE,qBAAqB,EAAE,kCAAkC,EAAE;;;;;;;8CAE9D,6LAAC;oCACC,KAAK;oCACL,MAAK;oCACL,QAAO;oCACP,QAAQ;oCACR,UAAU;oCACV,WAAU;;;;;;;;;;;;wBAKb,UAAU,MAAM,GAAG,mBAClB,6LAAC;4BAAI,WAAU;sCACZ,UAAU,GAAG,CAAC,CAAC,UAAU,sBACxB,6LAAC;oCAAgB,WAAU;8CACzB,cAAA,6LAAC;wCAAI,WAAW,CAAC,6CAA6C,EAC5D,uBAAuB,QACnB,yCACA,mBACJ;;0DACA,6LAAC;gDACC,KAAK;gDACL,KAAK,CAAC,cAAc,EAAE,QAAQ,GAAG;gDACjC,WAAU;;;;;;0DAIZ,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;4DACC,MAAK;4DACL,SAAS,uBAAuB;4DAChC,UAAU,IAAM,mBAAmB;4DACnC,WAAU;;;;;;sEAEZ,6LAAC;4DAAK,WAAU;sEACb,uBAAuB,QAAQ,EAAE,6BAA6B,EAAE;;;;;;;;;;;;;;;;;0DAMvE,6LAAC;gDACC,MAAK;gDACL,SAAS,IAAM,cAAc;gDAC7B,WAAU;gDACV,OAAO,EAAE;0DAET,cAAA,6LAAC;oDAAI,WAAU;oDAAU,MAAK;oDAAO,QAAO;oDAAe,SAAQ;8DACjE,cAAA,6LAAC;wDAAK,eAAc;wDAAQ,gBAAe;wDAAQ,aAAa;wDAAG,GAAE;;;;;;;;;;;;;;;;4CAKxE,uBAAuB,uBACtB,6LAAC;gDAAI,WAAU;0DACZ,EAAE;;;;;;;;;;;;mCA1CD;;;;;;;;;;wBAmDf,kCACC,6LAAC;4BAAI,WAAU;sCACZ;;;;;;;;;;;;;;;;;;;;;;;AAOf;GA7GgB;;QAUA,yJAAc;;;KAVd"}},
    {"offset": {"line": 649, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/CategoriesBrands.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Input } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport type { Category, Brand } from '../types';\r\n\r\ninterface CategoriesBrandsProps {\r\n  categories: Category[];\r\n  brands: Brand[];\r\n  categoryIds: string[];\r\n  brandIds: string[];\r\n  categoriesExpanded: boolean;\r\n  brandsExpanded: boolean;\r\n  useNewCategory: boolean;\r\n  useNewBrand: boolean;\r\n  newCategoryName: string;\r\n  newBrandName: string;\r\n  onCategoriesExpandedChange: (expanded: boolean) => void;\r\n  onBrandsExpandedChange: (expanded: boolean) => void;\r\n  onUseNewCategoryChange: (useNew: boolean) => void;\r\n  onUseNewBrandChange: (useNew: boolean) => void;\r\n  onNewCategoryNameChange: (name: string) => void;\r\n  onNewBrandNameChange: (name: string) => void;\r\n  onCategoryIdsChange: (ids: string[]) => void;\r\n  onBrandIdsChange: (ids: string[]) => void;\r\n  onPrimaryCategoryIdChange: (id: string) => void;\r\n  isClothingCategory: () => boolean;\r\n  onVariantsUpdate?: (updater: (prev: any[]) => any[]) => void;\r\n}\r\n\r\nexport function CategoriesBrands({\r\n  categories,\r\n  brands,\r\n  categoryIds,\r\n  brandIds,\r\n  categoriesExpanded,\r\n  brandsExpanded,\r\n  useNewCategory,\r\n  useNewBrand,\r\n  newCategoryName,\r\n  newBrandName,\r\n  onCategoriesExpandedChange,\r\n  onBrandsExpandedChange,\r\n  onUseNewCategoryChange,\r\n  onUseNewBrandChange,\r\n  onNewCategoryNameChange,\r\n  onNewBrandNameChange,\r\n  onCategoryIdsChange,\r\n  onBrandIdsChange,\r\n  onPrimaryCategoryIdChange,\r\n  isClothingCategory,\r\n  onVariantsUpdate,\r\n}: CategoriesBrandsProps) {\r\n  const { t } = useTranslation();\r\n\r\n  // Build category tree structure\r\n  const buildCategoryTree = () => {\r\n    const categoryMap = new Map<string, Category & { children: Category[] }>();\r\n    const rootCategories: (Category & { children: Category[] })[] = [];\r\n\r\n    // First pass: create map and identify root categories\r\n    categories.forEach((category) => {\r\n      categoryMap.set(category.id, { ...category, children: [] });\r\n    });\r\n\r\n    // Second pass: build tree structure\r\n    categories.forEach((category) => {\r\n      if (category.parentId && categoryMap.has(category.parentId)) {\r\n        const parent = categoryMap.get(category.parentId)!;\r\n        const child = categoryMap.get(category.id)!;\r\n        parent.children.push(child);\r\n      } else {\r\n        rootCategories.push(categoryMap.get(category.id)!);\r\n      }\r\n    });\r\n\r\n    // Flatten tree for display (parent first, then children)\r\n    const flattenTree = (\r\n      nodes: (Category & { children: Category[] })[],\r\n      result: (Category & { isSubcategory: boolean })[] = []\r\n    ): (Category & { isSubcategory: boolean })[] => {\r\n      nodes.forEach((node) => {\r\n        result.push({ ...node, isSubcategory: false });\r\n        if (node.children && node.children.length > 0) {\r\n          node.children.forEach((child) => {\r\n            result.push({ ...child, isSubcategory: true });\r\n          });\r\n        }\r\n      });\r\n      return result;\r\n    };\r\n\r\n    return flattenTree(rootCategories);\r\n  };\r\n\r\n  const displayCategories = buildCategoryTree();\r\n\r\n  const handleCategoryChange = (categoryId: string, checked: boolean) => {\r\n    const newCategoryIds = checked\r\n      ? [...categoryIds, categoryId]\r\n      : categoryIds.filter((id) => id !== categoryId);\r\n\r\n    // Set primary category if it's the first one\r\n    const newPrimaryCategoryId = newCategoryIds.length > 0 ? newCategoryIds[0] : '';\r\n\r\n    const selectedCategory = categories.find((cat) => cat.id === categoryId);\r\n    const newIsSizeRequired = selectedCategory?.requiresSizes ?? false;\r\n\r\n    onCategoryIdsChange(newCategoryIds);\r\n    onPrimaryCategoryIdChange(newPrimaryCategoryId);\r\n\r\n    // If size requirement changed and variants need to be cleared\r\n    if (onVariantsUpdate) {\r\n      const wasSizeRequired = isClothingCategory();\r\n      if (wasSizeRequired && !newIsSizeRequired && newCategoryIds.length === 0) {\r\n        onVariantsUpdate((prev) =>\r\n          prev.map((v) => ({\r\n            ...v,\r\n            sizes: [],\r\n            sizeStocks: {},\r\n            size: '',\r\n          }))\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{t('admin.products.add.categoriesAndBrands')}</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        {/* Categories - Multi-select */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            {t('admin.products.add.categories')} <span className=\"text-gray-500 font-normal\">{t('admin.products.add.selectMultiple')}</span>\r\n          </label>\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"select-category\"\r\n                name=\"category-mode\"\r\n                checked={!useNewCategory}\r\n                onChange={() => {\r\n                  onUseNewCategoryChange(false);\r\n                  onNewCategoryNameChange('');\r\n                }}\r\n                className=\"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"select-category\" className=\"text-sm text-gray-700\">\r\n                {t('admin.products.add.selectExistingCategories')}\r\n              </label>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"new-category\"\r\n                name=\"category-mode\"\r\n                checked={useNewCategory}\r\n                onChange={() => {\r\n                  onUseNewCategoryChange(true);\r\n                }}\r\n                className=\"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"new-category\" className=\"text-sm text-gray-700\">\r\n                {t('admin.products.add.addNewCategory')}\r\n              </label>\r\n            </div>\r\n            {!useNewCategory ? (\r\n              <div className=\"relative\" data-category-dropdown>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => onCategoriesExpandedChange(!categoriesExpanded)}\r\n                  className=\"w-full px-3 py-2 text-left border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm flex items-center justify-between\"\r\n                >\r\n                  <span className=\"text-gray-700\">\r\n                    {categoryIds.length === 0\r\n                      ? t('admin.products.add.selectCategories')\r\n                      : categoryIds.length === 1\r\n                        ? t('admin.products.add.categorySelected').replace('{count}', categoryIds.length.toString())\r\n                        : t('admin.products.add.categoriesSelected').replace('{count}', categoryIds.length.toString())}\r\n                  </span>\r\n                  <svg\r\n                    className={`w-4 h-4 text-gray-500 transition-transform duration-200 ${\r\n                      categoriesExpanded ? 'transform rotate-180' : ''\r\n                    }`}\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                  </svg>\r\n                </button>\r\n                {categoriesExpanded && (\r\n                  <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto\">\r\n                    <div className=\"p-2\">\r\n                      <div className=\"space-y-1\">\r\n                        {displayCategories.map((category) => (\r\n                          <label\r\n                            key={category.id}\r\n                            className={`flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded ${\r\n                              category.isSubcategory ? 'pl-6' : ''\r\n                            }`}\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={categoryIds.includes(category.id)}\r\n                              onChange={(e) => handleCategoryChange(category.id, e.target.checked)}\r\n                              className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                            />\r\n                            <span\r\n                              className={`text-gray-700 ${\r\n                                category.isSubcategory ? 'text-xs' : 'text-sm font-semibold'\r\n                              }`}\r\n                            >\r\n                              {category.title}\r\n                            </span>\r\n                          </label>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                <Input\r\n                  type=\"text\"\r\n                  value={newCategoryName}\r\n                  onChange={(e) => onNewCategoryNameChange(e.target.value)}\r\n                  placeholder={t('admin.products.add.enterNewCategoryName')}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Brands - Multi-select */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            {t('admin.products.add.brands')} <span className=\"text-gray-500 font-normal\">{t('admin.products.add.selectMultiple')}</span>\r\n          </label>\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"select-brand\"\r\n                name=\"brand-mode\"\r\n                checked={!useNewBrand}\r\n                onChange={() => {\r\n                  onUseNewBrandChange(false);\r\n                  onNewBrandNameChange('');\r\n                }}\r\n                className=\"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"select-brand\" className=\"text-sm text-gray-700\">\r\n                {t('admin.products.add.selectExistingBrands')}\r\n              </label>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"new-brand\"\r\n                name=\"brand-mode\"\r\n                checked={useNewBrand}\r\n                onChange={() => {\r\n                  onUseNewBrandChange(true);\r\n                }}\r\n                className=\"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"new-brand\" className=\"text-sm text-gray-700\">\r\n                {t('admin.products.add.addNewBrand')}\r\n              </label>\r\n            </div>\r\n            {!useNewBrand ? (\r\n              <div className=\"relative\" data-brand-dropdown>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => onBrandsExpandedChange(!brandsExpanded)}\r\n                  className=\"w-full px-3 py-2 text-left border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm flex items-center justify-between\"\r\n                >\r\n                  <span className=\"text-gray-700\">\r\n                    {brandIds.length === 0\r\n                      ? t('admin.products.add.selectBrands')\r\n                      : brandIds.length === 1\r\n                        ? t('admin.products.add.brandSelected').replace('{count}', brandIds.length.toString())\r\n                        : t('admin.products.add.brandsSelected').replace('{count}', brandIds.length.toString())}\r\n                  </span>\r\n                  <svg\r\n                    className={`w-4 h-4 text-gray-500 transition-transform duration-200 ${\r\n                      brandsExpanded ? 'transform rotate-180' : ''\r\n                    }`}\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                  </svg>\r\n                </button>\r\n                {brandsExpanded && (\r\n                  <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto\">\r\n                    <div className=\"p-2\">\r\n                      <div className=\"space-y-1\">\r\n                        {brands.map((brand) => (\r\n                          <label\r\n                            key={brand.id}\r\n                            className=\"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded\"\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={brandIds.includes(brand.id)}\r\n                              onChange={(e) => {\r\n                                const newBrandIds = e.target.checked\r\n                                  ? [...brandIds, brand.id]\r\n                                  : brandIds.filter((id) => id !== brand.id);\r\n                                onBrandIdsChange(newBrandIds);\r\n                              }}\r\n                              className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                            />\r\n                            <span className=\"text-sm text-gray-700\">{brand.name}</span>\r\n                          </label>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <Input\r\n                type=\"text\"\r\n                value={newBrandName}\r\n                onChange={(e) => onNewBrandNameChange(e.target.value)}\r\n                placeholder={t('admin.products.add.enterNewBrandName')}\r\n                className=\"w-full\"\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/SimpleProductFields.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Input } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport { CURRENCIES, type CurrencyCode } from '../../../../../lib/currency';\r\n\r\ninterface SimpleProductFieldsProps {\r\n  price: string;\r\n  compareAtPrice: string;\r\n  sku: string;\r\n  quantity: string;\r\n  defaultCurrency: CurrencyCode;\r\n  onPriceChange: (value: string) => void;\r\n  onCompareAtPriceChange: (value: string) => void;\r\n  onSkuChange: (value: string) => void;\r\n  onQuantityChange: (value: string) => void;\r\n}\r\n\r\nexport function SimpleProductFields({\r\n  price,\r\n  compareAtPrice,\r\n  sku,\r\n  quantity,\r\n  defaultCurrency,\r\n  onPriceChange,\r\n  onCompareAtPriceChange,\r\n  onSkuChange,\r\n  onQuantityChange,\r\n}: SimpleProductFieldsProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{t('admin.products.add.productVariants')}</h2>\r\n      <div className=\"bg-white border border-gray-200 rounded-lg p-6 space-y-4\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {/* Price */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {t('admin.products.add.price')} *\r\n            </label>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Input\r\n                type=\"number\"\r\n                value={price}\r\n                onChange={(e) => onPriceChange(e.target.value)}\r\n                placeholder={t('admin.products.add.pricePlaceholder')}\r\n                className=\"flex-1\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                required\r\n              />\r\n              <span className=\"text-sm text-gray-500 whitespace-nowrap\">{CURRENCIES[defaultCurrency].symbol}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Compare At Price */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {t('admin.products.add.compareAtPrice')}\r\n            </label>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Input\r\n                type=\"number\"\r\n                value={compareAtPrice}\r\n                onChange={(e) => onCompareAtPriceChange(e.target.value)}\r\n                placeholder={t('admin.products.add.pricePlaceholder')}\r\n                className=\"flex-1\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n              />\r\n              <span className=\"text-sm text-gray-500 whitespace-nowrap\">{CURRENCIES[defaultCurrency].symbol}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* SKU */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {t('admin.products.add.sku')} *\r\n            </label>\r\n            <Input\r\n              type=\"text\"\r\n              value={sku}\r\n              onChange={(e) => onSkuChange(e.target.value)}\r\n              placeholder={t('admin.products.add.autoGenerated')}\r\n              className=\"w-full\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Quantity */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {t('admin.products.add.quantity')} *\r\n            </label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quantity}\r\n              onChange={(e) => onQuantityChange(e.target.value)}\r\n              placeholder={t('admin.products.add.quantityPlaceholder')}\r\n              className=\"w-full\"\r\n              min=\"0\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAkBO,SAAS,oBAAoB,EAClC,KAAK,EACL,cAAc,EACd,GAAG,EACH,QAAQ,EACR,eAAe,EACf,aAAa,EACb,sBAAsB,EACtB,WAAW,EACX,gBAAgB,EACS;;IACzB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAE5B,qBACE,6LAAC;;0BACC,6LAAC;gBAAG,WAAU;0BAA4C,EAAE;;;;;;0BAC5D,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;;wCACd,EAAE;wCAA4B;;;;;;;8CAEjC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,oIAAK;4CACJ,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,aAAa,EAAE;4CACf,WAAU;4CACV,KAAI;4CACJ,MAAK;4CACL,QAAQ;;;;;;sDAEV,6LAAC;4CAAK,WAAU;sDAA2C,+IAAU,CAAC,gBAAgB,CAAC,MAAM;;;;;;;;;;;;;;;;;;sCAKjG,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CACd,EAAE;;;;;;8CAEL,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,oIAAK;4CACJ,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,uBAAuB,EAAE,MAAM,CAAC,KAAK;4CACtD,aAAa,EAAE;4CACf,WAAU;4CACV,KAAI;4CACJ,MAAK;;;;;;sDAEP,6LAAC;4CAAK,WAAU;sDAA2C,+IAAU,CAAC,gBAAgB,CAAC,MAAM;;;;;;;;;;;;;;;;;;sCAKjG,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;;wCACd,EAAE;wCAA0B;;;;;;;8CAE/B,6LAAC,oIAAK;oCACJ,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,aAAa,EAAE;oCACf,WAAU;oCACV,QAAQ;;;;;;;;;;;;sCAKZ,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;;wCACd,EAAE;wCAA+B;;;;;;;8CAEpC,6LAAC,oIAAK;oCACJ,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;oCAChD,aAAa,EAAE;oCACf,WAAU;oCACV,KAAI;oCACJ,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtB;GA3FgB;;QAWA,yJAAc;;;KAXd"}},
    {"offset": {"line": 1426, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/lib/colorMap.ts"],"sourcesContent":["// Shared color map for common color names used in filters and admin UI\r\n// This helps render consistent color circles/palette based on color labels.\r\n\r\nconst COLOR_MAP: Record<string, string> = {\r\n  beige: '#F5F5DC',\r\n  black: '#000000',\r\n  blue: '#0000FF',\r\n  brown: '#A52A2A',\r\n  gray: '#808080',\r\n  grey: '#808080',\r\n  green: '#008000',\r\n  red: '#FF0000',\r\n  white: '#FFFFFF',\r\n  yellow: '#FFFF00',\r\n  orange: '#FFA500',\r\n  pink: '#FFC0CB',\r\n  purple: '#800080',\r\n  navy: '#000080',\r\n  maroon: '#800000',\r\n  teal: '#008080',\r\n  cyan: '#00FFFF',\r\n  magenta: '#FF00FF',\r\n  lime: '#00FF00',\r\n  olive: '#808000',\r\n  silver: '#C0C0C0',\r\n  gold: '#FFD700',\r\n  tan: '#D2B48C',\r\n  khaki: '#F0E68C',\r\n  coral: '#FF7F50',\r\n  salmon: '#FA8072',\r\n  turquoise: '#40E0D0',\r\n  violet: '#EE82EE',\r\n  indigo: '#4B0082',\r\n  crimson: '#DC143C',\r\n  lavender: '#E6E6FA',\r\n  peach: '#FFE5B4',\r\n  mint: '#98FB98',\r\n  ivory: '#FFFFF0',\r\n  cream: '#FFFDD0',\r\n};\r\n\r\nexport function getColorHex(colorName: string): string {\r\n  const normalized = colorName.toLowerCase().trim();\r\n  return COLOR_MAP[normalized] || '#CCCCCC';\r\n}\r\n\r\nexport { COLOR_MAP };\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,uEAAuE;AACvE,4EAA4E;;;;;;;AAE5E,MAAM,YAAoC;IACxC,OAAO;IACP,OAAO;IACP,MAAM;IACN,OAAO;IACP,MAAM;IACN,MAAM;IACN,OAAO;IACP,KAAK;IACL,OAAO;IACP,QAAQ;IACR,QAAQ;IACR,MAAM;IACN,QAAQ;IACR,MAAM;IACN,QAAQ;IACR,MAAM;IACN,MAAM;IACN,SAAS;IACT,MAAM;IACN,OAAO;IACP,QAAQ;IACR,MAAM;IACN,KAAK;IACL,OAAO;IACP,OAAO;IACP,QAAQ;IACR,WAAW;IACX,QAAQ;IACR,QAAQ;IACR,SAAS;IACT,UAAU;IACV,OAAO;IACP,MAAM;IACN,OAAO;IACP,OAAO;AACT;AAEO,SAAS,YAAY,SAAiB;IAC3C,MAAM,aAAa,UAAU,WAAW,GAAG,IAAI;IAC/C,OAAO,SAAS,CAAC,WAAW,IAAI;AAClC"}},
    {"offset": {"line": 1483, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/AttributesSelection.tsx"],"sourcesContent":["'use client';\r\n\r\nimport type { RefObject } from 'react';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport { getColorHex } from '../../../../../lib/colorMap';\r\nimport type { Attribute } from '../types';\r\n\r\ninterface AttributesSelectionProps {\r\n  attributes: Attribute[];\r\n  selectedAttributesForVariants: Set<string>;\r\n  selectedAttributeValueIds: Record<string, string[]>;\r\n  attributesDropdownOpen: boolean;\r\n  attributesDropdownRef: RefObject<HTMLDivElement>;\r\n  onAttributesDropdownToggle: () => void;\r\n  onAttributeToggle: (attributeId: string, checked: boolean) => void;\r\n  onAttributeRemove: (attributeId: string) => void;\r\n}\r\n\r\nexport function AttributesSelection({\r\n  attributes,\r\n  selectedAttributesForVariants,\r\n  selectedAttributeValueIds,\r\n  attributesDropdownOpen,\r\n  attributesDropdownRef,\r\n  onAttributesDropdownToggle,\r\n  onAttributeToggle,\r\n  onAttributeRemove,\r\n}: AttributesSelectionProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{t('admin.products.add.selectAttributesForVariants')}</h2>\r\n      <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n          {t('admin.products.add.attributes')} <span className=\"text-gray-500 font-normal\">{t('admin.products.add.selectMultiple')}</span>\r\n        </label>\r\n        <div className=\"relative\" ref={attributesDropdownRef}>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onAttributesDropdownToggle}\r\n            className=\"w-full px-3 py-2 text-left border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm flex items-center justify-between\"\r\n          >\r\n            <span className=\"text-gray-700\">\r\n              {selectedAttributesForVariants.size === 0\r\n                ? t('admin.products.add.selectAttributes')\r\n                : selectedAttributesForVariants.size === 1\r\n                  ? t('admin.products.add.attributeSelected').replace('{count}', '1')\r\n                  : t('admin.products.add.attributesSelected').replace('{count}', selectedAttributesForVariants.size.toString())}\r\n            </span>\r\n            <svg\r\n              className={`w-4 h-4 text-gray-500 transition-transform duration-200 ${\r\n                attributesDropdownOpen ? 'transform rotate-180' : ''\r\n              }`}\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n            </svg>\r\n          </button>\r\n          {attributesDropdownOpen && (\r\n            <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto\">\r\n              <div className=\"p-4\">\r\n                <div className=\"mb-3 pb-3 border-b border-gray-200\">\r\n                  <h3 className=\"text-sm font-semibold text-gray-900\">\r\n                    {t('admin.products.add.selectAttributes')}\r\n                  </h3>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    {t('admin.products.add.selectAttributesDescription')}\r\n                  </p>\r\n                </div>\r\n                {attributes.length === 0 ? (\r\n                  <p className=\"text-sm text-gray-500 text-center py-4\">\r\n                    {t('admin.products.add.noAttributesAvailable')}\r\n                  </p>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\r\n                    {attributes.map((attribute) => (\r\n                      <label\r\n                        key={attribute.id}\r\n                        className={`flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-3 rounded-lg border transition-colors ${\r\n                          selectedAttributesForVariants.has(attribute.id)\r\n                            ? 'bg-blue-50 border-blue-300'\r\n                            : 'border-gray-200 bg-white'\r\n                        }`}\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedAttributesForVariants.has(attribute.id)}\r\n                          onChange={(e) => onAttributeToggle(attribute.id, e.target.checked)}\r\n                          className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                        />\r\n                        <span className=\"text-sm font-medium text-gray-900\">{attribute.name}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {selectedAttributesForVariants.size > 0 && (\r\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {Array.from(selectedAttributesForVariants).map((attributeId) => {\r\n                const attribute = attributes.find(a => a.id === attributeId);\r\n                if (!attribute) return null;\r\n                \r\n                // Get selected values for this attribute to show preview\r\n                const selectedValueIds = selectedAttributeValueIds[attributeId] || [];\r\n                const selectedValues = selectedValueIds\r\n                  .map(id => attribute.values.find(v => v.id === id))\r\n                  .filter((v): v is NonNullable<typeof v> => v !== null);\r\n                \r\n                // Get first selected value's image if available\r\n                const previewImage = selectedValues.find(v => v.imageUrl)?.imageUrl;\r\n                const isColor = attribute.key === 'color';\r\n                const previewColor = isColor && selectedValues.length > 0 \r\n                  ? (selectedValues[0].colors?.[0] || getColorHex(selectedValues[0].label))\r\n                  : null;\r\n                \r\n                return (\r\n                  <span\r\n                    key={attributeId}\r\n                    className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium border border-blue-200\"\r\n                  >\r\n                    {previewImage ? (\r\n                      <img\r\n                        src={previewImage}\r\n                        alt={attribute.name}\r\n                        className=\"w-4 h-4 object-cover rounded border border-gray-300\"\r\n                      />\r\n                    ) : previewColor ? (\r\n                      <span\r\n                        className=\"inline-block w-4 h-4 rounded-full border border-gray-300\"\r\n                        style={{ backgroundColor: previewColor }}\r\n                      />\r\n                    ) : null}\r\n                    {attribute.name}\r\n                    {selectedValues.length > 0 && (\r\n                      <span className=\"text-xs text-blue-600\">\r\n                        ({selectedValues.length})\r\n                      </span>\r\n                    )}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => onAttributeRemove(attributeId)}\r\n                      className=\"ml-1 text-blue-600 hover:text-blue-800 focus:outline-none\"\r\n                    >\r\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                      </svg>\r\n                    </button>\r\n                  </span>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1783, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/VariantBuilder.tsx"],"sourcesContent":["'use client';\r\n\r\nimport type { ChangeEvent, RefObject } from 'react';\r\nimport { Button, Input } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport { getColorHex } from '../../../../../lib/colorMap';\r\nimport { CURRENCIES, type CurrencyCode } from '../../../../../lib/currency';\r\nimport type { Attribute, GeneratedVariant } from '../types';\r\n\r\ninterface VariantBuilderProps {\r\n  generatedVariants: GeneratedVariant[];\r\n  attributes: Attribute[];\r\n  selectedAttributesForVariants: Set<string>;\r\n  isEditMode: boolean;\r\n  hasVariantsToLoad: boolean;\r\n  defaultCurrency: CurrencyCode;\r\n  imageUploadLoading: boolean;\r\n  slug: string;\r\n  title: string;\r\n  variantImageInputRefs: RefObject<Record<string, HTMLInputElement | null>>;\r\n  onVariantUpdate: (updater: (prev: GeneratedVariant[]) => GeneratedVariant[]) => void;\r\n  onVariantDelete: (variantId: string) => void;\r\n  onVariantAdd: () => void;\r\n  onApplyToAll: (field: 'price' | 'compareAtPrice' | 'stock' | 'sku', value: string) => void;\r\n  onVariantImageUpload: (variantId: string, event: ChangeEvent<HTMLInputElement>) => void;\r\n  onOpenValueModal: (modal: { variantId: string; attributeId: string } | null) => void;\r\n  generateSlug: (title: string) => string;\r\n}\r\n\r\nexport function VariantBuilder({\r\n  generatedVariants,\r\n  attributes,\r\n  selectedAttributesForVariants,\r\n  isEditMode,\r\n  hasVariantsToLoad,\r\n  defaultCurrency,\r\n  imageUploadLoading,\r\n  slug,\r\n  title,\r\n  variantImageInputRefs,\r\n  onVariantUpdate,\r\n  onVariantDelete,\r\n  onVariantAdd,\r\n  onApplyToAll,\r\n  onVariantImageUpload,\r\n  onOpenValueModal,\r\n  generateSlug,\r\n}: VariantBuilderProps) {\r\n  const { t } = useTranslation();\r\n\r\n  // Get attributes to show in table header\r\n  const getAttributesToShow = (variant?: GeneratedVariant) => {\r\n    if (selectedAttributesForVariants.size > 0) {\r\n      return Array.from(selectedAttributesForVariants);\r\n    }\r\n    if (isEditMode && variant) {\r\n      // Extract unique attribute IDs from this variant's values\r\n      const attrIds = new Set<string>();\r\n      variant.selectedValueIds.forEach((valueId) => {\r\n        const attr = attributes.find((a) => a.values.some((v) => v.id === valueId));\r\n        if (attr) attrIds.add(attr.id);\r\n      });\r\n      return Array.from(attrIds);\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const attributesToShow = generatedVariants.length > 0 ? getAttributesToShow(generatedVariants[0]) : [];\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{t('admin.products.add.variantBuilder')}</h2>\r\n      <div className=\"bg-white border border-gray-200 rounded-lg p-6 space-y-6\">\r\n        {/* Generated Variants Table */}\r\n        {generatedVariants.length > 0 && (\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                {t('admin.products.add.generatedVariants')} ({generatedVariants.length.toString()})\r\n              </h3>\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    const price = prompt(t('admin.products.add.enterDefaultPrice'));\r\n                    if (price !== null) {\r\n                      onApplyToAll('price', price);\r\n                    }\r\n                  }}\r\n                >\r\n                  {t('admin.products.add.applyPriceToAll')}\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    const stock = prompt(t('admin.products.add.enterDefaultStock'));\r\n                    if (stock !== null) {\r\n                      onApplyToAll('stock', stock);\r\n                    }\r\n                  }}\r\n                >\r\n                  {t('admin.products.add.applyStockToAll')}\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    const skuPrefix = prompt(t('admin.products.add.enterSkuPrefix'));\r\n                    if (skuPrefix !== null) {\r\n                      const baseSlug = skuPrefix || slug || generateSlug(title) || 'PROD';\r\n                      onVariantUpdate((prev) =>\r\n                        prev.map((variant) => {\r\n                          const valueParts: string[] = [];\r\n                          Array.from(selectedAttributesForVariants).forEach((attributeId) => {\r\n                            const attribute = attributes.find((a) => a.id === attributeId);\r\n                            if (!attribute) return;\r\n\r\n                            const selectedIds = variant.selectedValueIds.filter((id) =>\r\n                              attribute.values.some((v) => v.id === id)\r\n                            );\r\n\r\n                            selectedIds.forEach((valueId) => {\r\n                              const value = attribute.values.find((v) => v.id === valueId);\r\n                              if (value) {\r\n                                valueParts.push(value.value.toUpperCase().replace(/\\s+/g, '-'));\r\n                              }\r\n                            });\r\n                          });\r\n\r\n                          const sku =\r\n                            valueParts.length > 0\r\n                              ? `${baseSlug.toUpperCase()}-${valueParts.join('-')}`\r\n                              : `${baseSlug.toUpperCase()}`;\r\n\r\n                          return { ...variant, sku };\r\n                        })\r\n                      );\r\n                    }\r\n                  }}\r\n                >\r\n                  {t('admin.products.add.applySkuToAll')}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"border border-gray-300 rounded-lg\" style={{ overflowX: 'hidden', overflowY: 'hidden' }}>\r\n              <table className=\"w-full divide-y divide-gray-200 bg-white\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    {attributesToShow.map((attributeId) => {\r\n                      const attribute = attributes.find((a) => a.id === attributeId);\r\n                      return attribute ? (\r\n                        <th\r\n                          key={attributeId}\r\n                          className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                        >\r\n                          {attribute.name}\r\n                        </th>\r\n                      ) : null;\r\n                    })}\r\n                    <th className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      {t('admin.products.add.price')}\r\n                    </th>\r\n                    <th className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      {t('admin.products.add.compareAtPrice')}\r\n                    </th>\r\n                    <th className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      {t('admin.products.add.stock')}\r\n                    </th>\r\n                    <th className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      {t('admin.products.add.sku')}\r\n                    </th>\r\n                    <th className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      {t('admin.products.add.image')}\r\n                    </th>\r\n                    <th className=\"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20\">\r\n                      {t('admin.products.add.actions') || 'Actions'}\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {generatedVariants.map((variant) => {\r\n                    const variantAttributesToShow = getAttributesToShow(variant);\r\n\r\n                    return (\r\n                      <tr key={variant.id} className=\"hover:bg-gray-50\">\r\n                        {variantAttributesToShow.map((attributeId) => {\r\n                          const attribute = attributes.find((a) => a.id === attributeId);\r\n                          if (!attribute) return null;\r\n\r\n                          const isColor = attribute.key === 'color';\r\n                          const selectedValueIds = variant.selectedValueIds.filter((id) => {\r\n                            return attribute.values.some((v) => v.id === id);\r\n                          });\r\n                          const selectedValues = selectedValueIds\r\n                            .map((valueId) => {\r\n                              const value = attribute.values.find((v) => v.id === valueId);\r\n                              return value\r\n                                ? {\r\n                                    id: value.id,\r\n                                    label: value.label,\r\n                                    value: value.value,\r\n                                    colorHex: isColor ? (value.colors?.[0] || getColorHex(value.label)) : null,\r\n                                    imageUrl: value.imageUrl || null,\r\n                                  }\r\n                                : null;\r\n                            })\r\n                            .filter((v): v is NonNullable<typeof v> => v !== null);\r\n\r\n                          return (\r\n                            <td key={attributeId} className=\"px-2 py-2 whitespace-nowrap\">\r\n                              <div className=\"relative\">\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => {\r\n                                    onOpenValueModal({ variantId: variant.id, attributeId });\r\n                                  }}\r\n                                  className=\"w-full text-left flex items-center gap-1 p-1.5 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                >\r\n                                  <div className=\"flex-1 flex flex-wrap items-center gap-1 min-w-0\">\r\n                                    {selectedValues.length > 0 ? (\r\n                                      selectedValues.map((val) => (\r\n                                        <span\r\n                                          key={val.id}\r\n                                          className=\"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-blue-50 text-blue-700 rounded text-xs\"\r\n                                        >\r\n                                          {val.imageUrl ? (\r\n                                            <img\r\n                                              src={val.imageUrl}\r\n                                              alt={val.label}\r\n                                              className=\"w-3 h-3 object-cover rounded border border-gray-300\"\r\n                                            />\r\n                                          ) : isColor && val.colorHex ? (\r\n                                            <span\r\n                                              className=\"inline-block w-3 h-3 rounded-full border border-gray-300\"\r\n                                              style={{ backgroundColor: val.colorHex }}\r\n                                            />\r\n                                          ) : null}\r\n                                          {val.label}\r\n                                        </span>\r\n                                      ))\r\n                                    ) : (\r\n                                      <span className=\"text-xs text-gray-500\">{t('admin.products.add.valuesPlaceholder')}</span>\r\n                                    )}\r\n                                  </div>\r\n                                  <svg\r\n                                    className=\"w-3 h-3 text-gray-400 transition-transform flex-shrink-0\"\r\n                                    fill=\"none\"\r\n                                    stroke=\"currentColor\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                  >\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                                  </svg>\r\n                                </button>\r\n                              </div>\r\n                            </td>\r\n                          );\r\n                        })}\r\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={variant.price}\r\n                              onChange={(e) => {\r\n                                onVariantUpdate((prev) =>\r\n                                  prev.map((v) => (v.id === variant.id ? { ...v, price: e.target.value } : v))\r\n                                );\r\n                              }}\r\n                              placeholder={t('admin.products.add.pricePlaceholder')}\r\n                              className=\"w-20 text-xs\"\r\n                              min=\"0\"\r\n                              step=\"0.01\"\r\n                            />\r\n                            <span className=\"text-xs text-gray-500\">{CURRENCIES[defaultCurrency].symbol}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={variant.compareAtPrice}\r\n                              onChange={(e) => {\r\n                                onVariantUpdate((prev) =>\r\n                                  prev.map((v) => (v.id === variant.id ? { ...v, compareAtPrice: e.target.value } : v))\r\n                                );\r\n                              }}\r\n                              placeholder={t('admin.products.add.pricePlaceholder')}\r\n                              className=\"w-20 text-xs\"\r\n                              min=\"0\"\r\n                              step=\"0.01\"\r\n                            />\r\n                            <span className=\"text-xs text-gray-500\">{CURRENCIES[defaultCurrency].symbol}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\r\n                          <Input\r\n                            type=\"number\"\r\n                            value={variant.stock}\r\n                            onChange={(e) => {\r\n                              onVariantUpdate((prev) =>\r\n                                prev.map((v) => (v.id === variant.id ? { ...v, stock: e.target.value } : v))\r\n                              );\r\n                            }}\r\n                            placeholder={t('admin.products.add.quantityPlaceholder')}\r\n                            className=\"w-16 text-xs\"\r\n                            min=\"0\"\r\n                          />\r\n                        </td>\r\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\r\n                          <Input\r\n                            type=\"text\"\r\n                            value={variant.sku}\r\n                            onChange={(e) => {\r\n                              onVariantUpdate((prev) =>\r\n                                prev.map((v) => (v.id === variant.id ? { ...v, sku: e.target.value } : v))\r\n                              );\r\n                            }}\r\n                            placeholder={t('admin.products.add.autoGenerated')}\r\n                            className=\"w-24 text-xs\"\r\n                          />\r\n                        </td>\r\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            {variant.image ? (\r\n                              <div className=\"relative inline-block\">\r\n                                <img\r\n                                  src={variant.image}\r\n                                  alt=\"Variant image\"\r\n                                  className=\"w-12 h-12 object-cover border border-gray-300 rounded-md\"\r\n                                />\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => {\r\n                                    onVariantUpdate((prev) =>\r\n                                      prev.map((v) => (v.id === variant.id ? { ...v, image: null } : v))\r\n                                    );\r\n                                    if (variantImageInputRefs.current?.[variant.id]) {\r\n                                      variantImageInputRefs.current[variant.id]!.value = '';\r\n                                    }\r\n                                  }}\r\n                                  className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 hover:bg-red-600 transition-colors\"\r\n                                  title={t('admin.products.add.removeImage')}\r\n                                >\r\n                                  <svg className=\"w-2.5 h-2.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                                  </svg>\r\n                                </button>\r\n                              </div>\r\n                            ) : (\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => variantImageInputRefs.current?.[variant.id]?.click()}\r\n                                disabled={imageUploadLoading}\r\n                                className=\"px-2 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1\"\r\n                              >\r\n                                <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n                                </svg>\r\n                                <span className=\"hidden sm:inline\">\r\n                                  {imageUploadLoading ? t('admin.products.add.uploading') : t('admin.products.add.uploadImage')}\r\n                                </span>\r\n                                <span className=\"sm:hidden\">+</span>\r\n                              </button>\r\n                            )}\r\n                            <input\r\n                              ref={(el) => {\r\n                                if (variantImageInputRefs.current) {\r\n                                  variantImageInputRefs.current[variant.id] = el;\r\n                                }\r\n                              }}\r\n                              type=\"file\"\r\n                              accept=\"image/*\"\r\n                              onChange={(e) => onVariantImageUpload(variant.id, e)}\r\n                              className=\"hidden\"\r\n                            />\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-2 py-2 whitespace-nowrap\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => onVariantDelete(variant.id)}\r\n                            className=\"px-2 py-1 text-xs font-medium text-red-700 bg-red-50 border border-red-300 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors flex items-center gap-1\"\r\n                            title={t('admin.products.add.deleteVariant') || 'Delete variant'}\r\n                          >\r\n                            <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                                strokeWidth={2}\r\n                                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n                              />\r\n                            </svg>\r\n                            {t('admin.products.add.delete') || 'Delete'}\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex justify-end gap-2\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={onVariantAdd}>\r\n                {t('admin.products.add.addVariant') || 'Add'}\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  console.log(' [VARIANT BUILDER] Variants ready for submission:', generatedVariants);\r\n                }}\r\n              >\r\n                {t('admin.products.add.variantsReady') || 'Variants Ready'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2524, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/ProductLabels.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Button, Input } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport type { ProductLabel } from '../types';\r\n\r\ninterface ProductLabelsProps {\r\n  labels: ProductLabel[];\r\n  onAddLabel: () => void;\r\n  onRemoveLabel: (index: number) => void;\r\n  onUpdateLabel: (index: number, field: keyof ProductLabel, value: any) => void;\r\n}\r\n\r\nexport function ProductLabels({ labels, onAddLabel, onRemoveLabel, onUpdateLabel }: ProductLabelsProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900\">{t('admin.products.add.productLabels')}</h2>\r\n        <Button type=\"button\" variant=\"outline\" onClick={onAddLabel}>\r\n          {t('admin.products.add.addLabel')}\r\n        </Button>\r\n      </div>\r\n      {labels.length === 0 ? (\r\n        <div className=\"text-center py-4 border-2 border-dashed border-gray-300 rounded-lg\">\r\n          <p className=\"text-gray-500 mb-2\">{t('admin.products.add.noLabelsAdded')}</p>\r\n          <p className=\"text-sm text-gray-400\">{t('admin.products.add.addLabelsHint')}</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {labels.map((label, index) => (\r\n            <div key={index} className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">\r\n                  {t('admin.products.add.label').replace('{index}', (index + 1).toString())}\r\n                </h3>\r\n                <Button type=\"button\" variant=\"ghost\" onClick={() => onRemoveLabel(index)} className=\"text-red-600 hover:text-red-700\">\r\n                  {t('admin.products.add.remove')}\r\n                </Button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {/* Label Type */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {t('admin.products.add.type')} *\r\n                  </label>\r\n                  <select\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    value={label.type}\r\n                    onChange={(e) => onUpdateLabel(index, 'type', e.target.value as 'text' | 'percentage')}\r\n                    required\r\n                  >\r\n                    <option value=\"text\">{t('admin.products.add.textType')}</option>\r\n                    <option value=\"percentage\">{t('admin.products.add.percentageType')}</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Label Value */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {t('admin.products.add.value')} *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={label.value}\r\n                    onChange={(e) => onUpdateLabel(index, 'value', e.target.value)}\r\n                    placeholder={\r\n                      label.type === 'percentage' ? t('admin.products.add.percentagePlaceholder') : t('admin.products.add.newProductLabel')\r\n                    }\r\n                    required\r\n                    className=\"w-full\"\r\n                  />\r\n                  {label.type === 'percentage' && (\r\n                    <p className=\"mt-1 text-xs text-blue-600 font-medium\">{t('admin.products.add.percentageAutoUpdateHint')}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Label Position */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {t('admin.products.add.position')} *\r\n                  </label>\r\n                  <select\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    value={label.position}\r\n                    onChange={(e) => onUpdateLabel(index, 'position', e.target.value)}\r\n                    required\r\n                  >\r\n                    <option value=\"top-left\">{t('admin.products.add.topLeft')}</option>\r\n                    <option value=\"top-right\">{t('admin.products.add.topRight')}</option>\r\n                    <option value=\"bottom-left\">{t('admin.products.add.bottomLeft')}</option>\r\n                    <option value=\"bottom-right\">{t('admin.products.add.bottomRight')}</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Label Color (Optional) */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {t('admin.products.add.colorOptional')}\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={label.color || ''}\r\n                    onChange={(e) => onUpdateLabel(index, 'color', e.target.value || null)}\r\n                    placeholder={t('admin.products.add.colorHexPlaceholder')}\r\n                    className=\"w-full\"\r\n                  />\r\n                  <p className=\"mt-1 text-xs text-gray-500\">{t('admin.products.add.hexColorHint')}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;;;AAHA;;;AAaO,SAAS,cAAc,EAAE,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,aAAa,EAAsB;;IACpG,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAE5B,qBACE,6LAAC;;0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAuC,EAAE;;;;;;kCACvD,6LAAC,sIAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAU,SAAS;kCAC9C,EAAE;;;;;;;;;;;;YAGN,OAAO,MAAM,KAAK,kBACjB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAsB,EAAE;;;;;;kCACrC,6LAAC;wBAAE,WAAU;kCAAyB,EAAE;;;;;;;;;;;qCAG1C,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,6LAAC;wBAAgB,WAAU;;0CACzB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDACX,EAAE,4BAA4B,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,QAAQ;;;;;;kDAExE,6LAAC,sIAAM;wCAAC,MAAK;wCAAS,SAAQ;wCAAQ,SAAS,IAAM,cAAc;wCAAQ,WAAU;kDAClF,EAAE;;;;;;;;;;;;0CAGP,6LAAC;gCAAI,WAAU;;kDAEb,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;;oDACd,EAAE;oDAA2B;;;;;;;0DAEhC,6LAAC;gDACC,WAAU;gDACV,OAAO,MAAM,IAAI;gDACjB,UAAU,CAAC,IAAM,cAAc,OAAO,QAAQ,EAAE,MAAM,CAAC,KAAK;gDAC5D,QAAQ;;kEAER,6LAAC;wDAAO,OAAM;kEAAQ,EAAE;;;;;;kEACxB,6LAAC;wDAAO,OAAM;kEAAc,EAAE;;;;;;;;;;;;;;;;;;kDAKlC,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;;oDACd,EAAE;oDAA4B;;;;;;;0DAEjC,6LAAC,oIAAK;gDACJ,MAAK;gDACL,OAAO,MAAM,KAAK;gDAClB,UAAU,CAAC,IAAM,cAAc,OAAO,SAAS,EAAE,MAAM,CAAC,KAAK;gDAC7D,aACE,MAAM,IAAI,KAAK,eAAe,EAAE,8CAA8C,EAAE;gDAElF,QAAQ;gDACR,WAAU;;;;;;4CAEX,MAAM,IAAI,KAAK,8BACd,6LAAC;gDAAE,WAAU;0DAA0C,EAAE;;;;;;;;;;;;kDAK7D,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;;oDACd,EAAE;oDAA+B;;;;;;;0DAEpC,6LAAC;gDACC,WAAU;gDACV,OAAO,MAAM,QAAQ;gDACrB,UAAU,CAAC,IAAM,cAAc,OAAO,YAAY,EAAE,MAAM,CAAC,KAAK;gDAChE,QAAQ;;kEAER,6LAAC;wDAAO,OAAM;kEAAY,EAAE;;;;;;kEAC5B,6LAAC;wDAAO,OAAM;kEAAa,EAAE;;;;;;kEAC7B,6LAAC;wDAAO,OAAM;kEAAe,EAAE;;;;;;kEAC/B,6LAAC;wDAAO,OAAM;kEAAgB,EAAE;;;;;;;;;;;;;;;;;;kDAKpC,6LAAC;;0DACC,6LAAC;gDAAM,WAAU;0DACd,EAAE;;;;;;0DAEL,6LAAC,oIAAK;gDACJ,MAAK;gDACL,OAAO,MAAM,KAAK,IAAI;gDACtB,UAAU,CAAC,IAAM,cAAc,OAAO,SAAS,EAAE,MAAM,CAAC,KAAK,IAAI;gDACjE,aAAa,EAAE;gDACf,WAAU;;;;;;0DAEZ,6LAAC;gDAAE,WAAU;0DAA8B,EAAE;;;;;;;;;;;;;;;;;;;uBA5EzC;;;;;;;;;;;;;;;;AAqFtB;GAxGgB;;QACA,yJAAc;;;KADd"}},
    {"offset": {"line": 2853, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/ValueSelectionModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Button } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport { getColorHex } from '../../../../../lib/colorMap';\r\nimport type { Attribute, GeneratedVariant } from '../types';\r\n\r\ninterface ValueSelectionModalProps {\r\n  openValueModal: { variantId: string; attributeId: string } | null;\r\n  variant: GeneratedVariant | undefined;\r\n  attribute: Attribute | undefined;\r\n  onClose: () => void;\r\n  onVariantUpdate: (updater: (prev: GeneratedVariant[]) => GeneratedVariant[]) => void;\r\n  onAttributeValueIdsUpdate: (updater: (prev: Record<string, string[]>) => Record<string, string[]>) => void;\r\n  selectedAttributeValueIds: Record<string, string[]>;\r\n}\r\n\r\nexport function ValueSelectionModal({\r\n  openValueModal,\r\n  variant,\r\n  attribute,\r\n  onClose,\r\n  onVariantUpdate,\r\n  onAttributeValueIdsUpdate,\r\n  selectedAttributeValueIds,\r\n}: ValueSelectionModalProps) {\r\n  const { t } = useTranslation();\r\n\r\n  if (!openValueModal || !variant || !attribute) return null;\r\n\r\n  const isColor = attribute.key === 'color';\r\n  const selectedValueIds = variant.selectedValueIds.filter((id) => {\r\n    return attribute.values.some((v) => v.id === id);\r\n  });\r\n\r\n  const handleSelectAll = (checked: boolean) => {\r\n    const isAutoVariant = variant.id === 'variant-all';\r\n\r\n    if (checked) {\r\n      // Select all values\r\n      const allValueIds = attribute.values.map((v) => v.id);\r\n      // Add to variant's selectedValueIds (merge with existing)\r\n      const currentIds = variant.selectedValueIds;\r\n      const newIds = [...new Set([...currentIds, ...allValueIds])];\r\n\r\n      // Update variant - merge with existing selectedValueIds\r\n      onVariantUpdate((prev) => prev.map((v) => (v.id === variant.id ? { ...v, selectedValueIds: newIds } : v)));\r\n\r\n      // Only update selectedAttributeValueIds for auto-generated variant\r\n      if (isAutoVariant) {\r\n        onAttributeValueIdsUpdate((prev) => ({\r\n          ...prev,\r\n          [openValueModal.attributeId]: allValueIds,\r\n        }));\r\n      }\r\n    } else {\r\n      // Deselect all values for this attribute\r\n      const valueIdsToRemove = attribute.values.map((v) => v.id);\r\n      const newIds = variant.selectedValueIds.filter((id) => !valueIdsToRemove.includes(id));\r\n\r\n      onVariantUpdate((prev) => prev.map((v) => (v.id === variant.id ? { ...v, selectedValueIds: newIds } : v)));\r\n\r\n      // Only update selectedAttributeValueIds for auto-generated variant\r\n      if (isAutoVariant) {\r\n        onAttributeValueIdsUpdate((prev) => ({\r\n          ...prev,\r\n          [openValueModal.attributeId]: [],\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleValueToggle = (valueId: string, checked: boolean) => {\r\n    const isAutoVariant = variant.id === 'variant-all';\r\n    const currentIds = variant.selectedValueIds;\r\n    let newIds: string[];\r\n\r\n    if (checked) {\r\n      // Add value if not already selected\r\n      newIds = [...currentIds, valueId];\r\n    } else {\r\n      // Remove value\r\n      newIds = currentIds.filter((id) => id !== valueId);\r\n    }\r\n\r\n    // Update variant first (to preserve dropdown state)\r\n    onVariantUpdate((prev) => {\r\n      const updated = prev.map((v) => (v.id === variant.id ? { ...v, selectedValueIds: newIds } : v));\r\n      console.log(' [VARIANT BUILDER] Value selection updated:', {\r\n        variantId: variant.id,\r\n        isAutoVariant,\r\n        valueId,\r\n        action: checked ? 'added' : 'removed',\r\n        newSelectedIds: newIds.length,\r\n        totalVariants: updated.length,\r\n      });\r\n      return updated;\r\n    });\r\n\r\n    // Only update selectedAttributeValueIds for auto-generated variant\r\n    if (isAutoVariant) {\r\n      const currentAttrIds = selectedAttributeValueIds[openValueModal.attributeId] || [];\r\n      let newAttrIds: string[];\r\n      if (checked) {\r\n        newAttrIds = [...currentAttrIds, valueId];\r\n      } else {\r\n        newAttrIds = currentAttrIds.filter((id) => id !== valueId);\r\n      }\r\n\r\n      onAttributeValueIdsUpdate((prev) => ({\r\n        ...prev,\r\n        [openValueModal.attributeId]: newAttrIds,\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10\">\r\n          <h3 className=\"text-xl font-semibold text-gray-900\">\r\n            {t('admin.products.add.selectValues')} {attribute.name}\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n            aria-label=\"Close\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {/* \"All\" option */}\r\n          <label className=\"flex items-center gap-2 p-2 rounded-lg cursor-pointer hover:bg-gray-50 mb-3 border border-gray-200\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={attribute.values.length > 0 && selectedValueIds.length === attribute.values.length}\r\n              onChange={(e) => handleSelectAll(e.target.checked)}\r\n              className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n            />\r\n            <span className=\"text-sm font-medium text-gray-900\">All</span>\r\n          </label>\r\n\r\n          <div className=\"border-t border-gray-200 my-3\"></div>\r\n\r\n          {/* Individual value checkboxes - grid layout */}\r\n          <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2\">\r\n            {attribute.values.map((value) => {\r\n              const isSelected = variant.selectedValueIds.includes(value.id);\r\n              const valueColorHex =\r\n                isColor && value.colors && value.colors.length > 0\r\n                  ? value.colors[0]\r\n                  : isColor\r\n                    ? getColorHex(value.label)\r\n                    : null;\r\n\r\n              return (\r\n                <label\r\n                  key={value.id}\r\n                  className={`flex flex-col items-center gap-1.5 p-2 rounded-lg cursor-pointer transition-all border-2 ${\r\n                    isSelected\r\n                      ? 'bg-blue-50 border-blue-600'\r\n                      : 'bg-gray-50 border-transparent hover:bg-gray-100 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isSelected}\r\n                    onChange={(e) => handleValueToggle(value.id, e.target.checked)}\r\n                    className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 flex-shrink-0\"\r\n                  />\r\n                  {/* Display image, color, or nothing */}\r\n                  {value.imageUrl ? (\r\n                    <img\r\n                      src={value.imageUrl}\r\n                      alt={value.label}\r\n                      className=\"w-8 h-8 object-cover rounded border border-gray-300 flex-shrink-0\"\r\n                    />\r\n                  ) : isColor && valueColorHex ? (\r\n                    <span\r\n                      className=\"inline-block w-6 h-6 rounded-full border-2 border-gray-300 shadow-sm flex-shrink-0\"\r\n                      style={{ backgroundColor: valueColorHex }}\r\n                    />\r\n                  ) : null}\r\n                  <span className=\"text-xs font-medium text-gray-900 text-center\">{value.label}</span>\r\n                </label>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-200 sticky bottom-0 bg-white\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n            {t('admin.common.close')}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/Publishing.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\n\r\ninterface PublishingProps {\r\n  featured: boolean;\r\n  onFeaturedChange: (featured: boolean) => void;\r\n}\r\n\r\nexport function Publishing({ featured, onFeaturedChange }: PublishingProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"space-y-2\">\r\n        <label className=\"flex items-center\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={featured}\r\n            onChange={(e) => onFeaturedChange(e.target.checked)}\r\n            className=\"mr-2\"\r\n          />\r\n          <span className=\"text-sm font-medium text-gray-700 flex items-center gap-1\">\r\n            <span aria-hidden=\"true\"></span>\r\n            {t('admin.products.add.markAsFeatured')}\r\n          </span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AASO,SAAS,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAmB;;IACxE,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAE5B,qBACE,6LAAC;kBACC,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAM,WAAU;;kCACf,6LAAC;wBACC,MAAK;wBACL,SAAS;wBACT,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,OAAO;wBAClD,WAAU;;;;;;kCAEZ,6LAAC;wBAAK,WAAU;;0CACd,6LAAC;gCAAK,eAAY;0CAAO;;;;;;4BACxB,EAAE;;;;;;;;;;;;;;;;;;;;;;;AAMf;GArBgB;;QACA,yJAAc;;;KADd"}},
    {"offset": {"line": 3245, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/FormActions.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Button } from '@shop/ui';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface FormActionsProps {\r\n  loading: boolean;\r\n  isEditMode: boolean;\r\n}\r\n\r\nexport function FormActions({ loading, isEditMode }: FormActionsProps) {\r\n  const { t } = useTranslation();\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"sticky bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg -mx-6 -mb-6 px-6 py-4 mt-8 backdrop-blur-sm bg-white/95\">\r\n      <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 max-w-full\">\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"primary\"\r\n          disabled={loading}\r\n          className=\"flex-1 w-full sm:w-auto order-2 sm:order-1\"\r\n        >\r\n          {loading\r\n            ? isEditMode\r\n              ? t('admin.products.add.updating')\r\n              : t('admin.products.add.creating')\r\n            : isEditMode\r\n              ? t('admin.products.add.updateProduct')\r\n              : t('admin.products.add.createProduct')}\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={() => router.push('/admin/products')}\r\n          className=\"w-full sm:w-auto order-1 sm:order-2\"\r\n        >\r\n          {t('admin.common.cancel')}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAWO,SAAS,YAAY,EAAE,OAAO,EAAE,UAAU,EAAoB;;IACnE,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAC5B,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,sIAAM;oBACL,MAAK;oBACL,SAAQ;oBACR,UAAU;oBACV,WAAU;8BAET,UACG,aACE,EAAE,iCACF,EAAE,iCACJ,aACE,EAAE,sCACF,EAAE;;;;;;8BAEV,6LAAC,sIAAM;oBACL,MAAK;oBACL,SAAQ;oBACR,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAU;8BAET,EAAE;;;;;;;;;;;;;;;;;AAKb;GAhCgB;;QACA,yJAAc;QACb,kJAAS;;;KAFV"}},
    {"offset": {"line": 3319, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/components/PageHeader.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\n\r\ninterface PageHeaderProps {\r\n  isEditMode: boolean;\r\n}\r\n\r\nexport function PageHeader({ isEditMode }: PageHeaderProps) {\r\n  const { t } = useTranslation();\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"mb-8\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <button\r\n          onClick={() => router.push('/admin')}\r\n          className=\"text-gray-600 hover:text-gray-900 flex items-center\"\r\n        >\r\n          <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n          {t('admin.products.add.backToAdmin')}\r\n        </button>\r\n      </div>\r\n      <h1 className=\"text-3xl font-bold text-gray-900\">\r\n        {isEditMode ? t('admin.products.add.editProduct') : t('admin.products.add.addNewProduct')}\r\n      </h1>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AASO,SAAS,WAAW,EAAE,UAAU,EAAmB;;IACxD,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAC5B,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAU;;sCAEV,6LAAC;4BAAI,WAAU;4BAAe,MAAK;4BAAO,QAAO;4BAAe,SAAQ;sCACtE,cAAA,6LAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;wBAEtE,EAAE;;;;;;;;;;;;0BAGP,6LAAC;gBAAG,WAAU;0BACX,aAAa,EAAE,oCAAoC,EAAE;;;;;;;;;;;;AAI9D;GAtBgB;;QACA,yJAAc;QACb,kJAAS;;;KAFV"}},
    {"offset": {"line": 3407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useLabelManagement.ts"],"sourcesContent":["'use client';\r\n\r\nimport type { ProductLabel } from '../types';\r\n\r\ninterface UseLabelManagementReturn {\r\n  addLabel: () => void;\r\n  removeLabel: (index: number) => void;\r\n  updateLabel: (index: number, field: keyof ProductLabel, value: any) => void;\r\n}\r\n\r\nexport function useLabelManagement(\r\n  labels: ProductLabel[],\r\n  setLabels: (updater: (prev: ProductLabel[]) => ProductLabel[]) => void\r\n): UseLabelManagementReturn {\r\n  const addLabel = () => {\r\n    const newLabel: ProductLabel = {\r\n      type: 'text',\r\n      value: '',\r\n      position: 'top-left',\r\n      color: null,\r\n    };\r\n    setLabels((prev) => [...prev, newLabel]);\r\n  };\r\n\r\n  const removeLabel = (index: number) => {\r\n    setLabels((prev) => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const updateLabel = (index: number, field: keyof ProductLabel, value: any) => {\r\n    setLabels((prev) => {\r\n      const newLabels = [...prev];\r\n      newLabels[index] = { ...newLabels[index], [field]: value };\r\n      return newLabels;\r\n    });\r\n  };\r\n\r\n  return {\r\n    addLabel,\r\n    removeLabel,\r\n    updateLabel,\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AAUO,SAAS,mBACd,MAAsB,EACtB,SAAsE;IAEtE,MAAM,WAAW;QACf,MAAM,WAAyB;YAC7B,MAAM;YACN,OAAO;YACP,UAAU;YACV,OAAO;QACT;QACA,UAAU,CAAC,OAAS;mBAAI;gBAAM;aAAS;IACzC;IAEA,MAAM,cAAc,CAAC;QACnB,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IAClD;IAEA,MAAM,cAAc,CAAC,OAAe,OAA2B;QAC7D,UAAU,CAAC;YACT,MAAM,YAAY;mBAAI;aAAK;YAC3B,SAAS,CAAC,MAAM,GAAG;gBAAE,GAAG,SAAS,CAAC,MAAM;gBAAE,CAAC,MAAM,EAAE;YAAM;YACzD,OAAO;QACT;IACF;IAEA,OAAO;QACL;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 3453, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/lib/utils/logger.ts"],"sourcesContent":["/**\r\n * Logger utility for consistent logging across the application\r\n * Replaces console.log with structured logging\r\n */\r\n\r\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\r\n\r\ninterface LogContext {\r\n  [key: string]: unknown;\r\n}\r\n\r\nclass Logger {\r\n  private isDevelopment(): boolean {\r\n    return process.env.NODE_ENV === 'development';\r\n  }\r\n\r\n  private formatMessage(level: LogLevel, message: string, context?: LogContext): string {\r\n    const timestamp = new Date().toISOString();\r\n    const contextStr = context ? ` ${JSON.stringify(context)}` : '';\r\n    return `[${timestamp}] [${level.toUpperCase()}] ${message}${contextStr}`;\r\n  }\r\n\r\n  debug(message: string, context?: LogContext): void {\r\n    if (this.isDevelopment()) {\r\n      console.debug(this.formatMessage('debug', message, context));\r\n    }\r\n  }\r\n\r\n  info(message: string, context?: LogContext): void {\r\n    if (this.isDevelopment()) {\r\n      console.info(this.formatMessage('info', message, context));\r\n    }\r\n  }\r\n\r\n  warn(message: string, context?: LogContext): void {\r\n    console.warn(this.formatMessage('warn', message, context));\r\n  }\r\n\r\n  error(message: string, context?: LogContext): void {\r\n    console.error(this.formatMessage('error', message, context));\r\n  }\r\n\r\n  log(message: string, context?: LogContext): void {\r\n    // Alias for info in development\r\n    this.info(message, context);\r\n  }\r\n}\r\n\r\nexport const logger = new Logger();\r\n\r\n\r\n\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAUU;AAFX,MAAM;IACI,gBAAyB;QAC/B,OAAO,oDAAyB;IAClC;IAEQ,cAAc,KAAe,EAAE,OAAe,EAAE,OAAoB,EAAU;QACpF,MAAM,YAAY,IAAI,OAAO,WAAW;QACxC,MAAM,aAAa,UAAU,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,UAAU,GAAG;QAC7D,OAAO,CAAC,CAAC,EAAE,UAAU,GAAG,EAAE,MAAM,WAAW,GAAG,EAAE,EAAE,UAAU,YAAY;IAC1E;IAEA,MAAM,OAAe,EAAE,OAAoB,EAAQ;QACjD,IAAI,IAAI,CAAC,aAAa,IAAI;YACxB,QAAQ,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,SAAS;QACrD;IACF;IAEA,KAAK,OAAe,EAAE,OAAoB,EAAQ;QAChD,IAAI,IAAI,CAAC,aAAa,IAAI;YACxB,QAAQ,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,SAAS;QACnD;IACF;IAEA,KAAK,OAAe,EAAE,OAAoB,EAAQ;QAChD,QAAQ,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,SAAS;IACnD;IAEA,MAAM,OAAe,EAAE,OAAoB,EAAQ;QACjD,QAAQ,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,SAAS;IACrD;IAEA,IAAI,OAAe,EAAE,OAAoB,EAAQ;QAC/C,gCAAgC;QAChC,IAAI,CAAC,IAAI,CAAC,SAAS;IACrB;AACF;AAEO,MAAM,SAAS,IAAI"}},
    {"offset": {"line": 3499, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/lib/utils/image-utils.ts"],"sourcesContent":["/**\n * Unified image URL utilities for consistent handling across the application\n */\n\nimport imageCompression from 'browser-image-compression';\nimport { logger } from './logger';\n\n/**\n * Type for image URL input - can be string or object with url/src/value properties\n */\ntype ImageUrlInput = string | null | undefined | { url?: string; src?: string; value?: string };\n\n/**\n * Validates if a URL is a valid image URL\n */\nexport function isValidImageUrl(url: ImageUrlInput): boolean {\n  if (!url) return false;\n  \n  const urlStr = typeof url === 'string' ? url.trim() : '';\n  if (!urlStr) return false;\n  \n  // Base64 images are valid\n  if (urlStr.startsWith('data:image/')) return true;\n  \n  // HTTP/HTTPS URLs are valid\n  if (urlStr.startsWith('http://') || urlStr.startsWith('https://')) return true;\n  \n  // Relative paths starting with / are valid\n  if (urlStr.startsWith('/')) return true;\n  \n  return false;\n}\n\n/**\n * Processes and normalizes an image URL from various formats\n * Returns null if invalid\n */\nexport function processImageUrl(url: ImageUrlInput): string | null {\n  if (!url) return null;\n  \n  let finalUrl = '';\n  if (typeof url === 'string') {\n    finalUrl = url.trim();\n  } else if (typeof url === 'object' && url !== null) {\n    finalUrl = (url.url || url.src || url.value || '').trim();\n  }\n  \n  if (!finalUrl) return null;\n  \n  // Validate\n  if (!isValidImageUrl(finalUrl)) {\n    return null;\n  }\n  \n  // For base64 or full URLs, return as-is\n  if (finalUrl.startsWith('data:') || finalUrl.startsWith('http://') || finalUrl.startsWith('https://')) {\n    return finalUrl;\n  }\n  \n  // For relative paths, ensure they start with /\n  if (finalUrl.startsWith('/')) {\n    return finalUrl;\n  }\n  \n  return `/${finalUrl}`;\n}\n\n/**\n * Smart split for comma-separated image URLs that handles Base64 data URIs\n * Base64 strings can contain commas, so we need special handling\n */\nexport function smartSplitUrls(str: string | null | undefined): string[] {\n  if (!str) return [];\n  \n  // If no base64, simple split\n  if (!str.includes('data:image/')) {\n    return str.split(',').map(s => s.trim()).filter(Boolean);\n  }\n  \n  // Handle base64 - split carefully\n  // Base64 format: data:image/type;base64,<base64data>\n  // The comma after base64, is the separator, but base64 data itself can contain commas\n  // We need to find the comma that separates base64 header from data, then find the next URL separator\n  \n  const results: string[] = [];\n  let i = 0;\n  \n  while (i < str.length) {\n    if (str.substring(i).startsWith('data:image/')) {\n      // Found start of base64 image\n      // Find the comma after base64, (this is the separator between header and data)\n      const headerEnd = str.indexOf(',', i);\n      if (headerEnd === -1) {\n        // No comma found, treat entire rest as base64\n        results.push(str.substring(i).trim());\n        break;\n      }\n      \n      // Find the next comma that's likely a URL separator (followed by whitespace and another URL pattern)\n      // Or find end of string\n      let nextSeparator = str.length;\n      for (let j = headerEnd + 1; j < str.length; j++) {\n        if (str[j] === ',') {\n          // Check if this comma is followed by a URL pattern (not part of base64)\n          const afterComma = str.substring(j + 1).trim();\n          if (afterComma.startsWith('data:image/') || \n              afterComma.startsWith('http://') || \n              afterComma.startsWith('https://') ||\n              afterComma.startsWith('/')) {\n            nextSeparator = j;\n            break;\n          }\n        }\n      }\n      \n      // Extract base64 image (from start to separator)\n      const base64Image = str.substring(i, nextSeparator).trim();\n      if (base64Image) {\n        results.push(base64Image);\n      }\n      \n      i = nextSeparator + 1;\n    } else {\n      // Regular URL - find next comma or end\n      const nextComma = str.indexOf(',', i);\n      if (nextComma === -1) {\n        // No more commas, add rest as single URL\n        const url = str.substring(i).trim();\n        if (url) {\n          results.push(url);\n        }\n        break;\n      } else {\n        // Add URL up to comma\n        const url = str.substring(i, nextComma).trim();\n        if (url) {\n          results.push(url);\n        }\n        i = nextComma + 1;\n      }\n    }\n  }\n  \n  return results.filter(Boolean);\n}\n\n/**\n * Normalizes URL for comparison (ensures consistent format for deduplication)\n * Returns normalized string for exact matching\n */\nexport function normalizeUrlForComparison(url: string): string {\n  if (!url) return '';\n  \n  // Base64 images - return as-is (exact match required)\n  if (url.startsWith('data:')) {\n    return url;\n  }\n  \n  // HTTP/HTTPS URLs - return as-is (exact match)\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return url;\n  }\n  \n  // Relative paths - normalize to start with /\n  const trimmed = url.trim();\n  if (trimmed.startsWith('/')) {\n    return trimmed;\n  }\n  \n  return `/${trimmed}`;\n}\n\n/**\n * Gets all normalized variations of a URL for comparison\n * Useful when comparing URLs that might have different formats\n */\nexport function getUrlVariations(url: string): string[] {\n  if (!url) return [];\n  \n  const normalized = normalizeUrlForComparison(url);\n  const variations = new Set<string>([normalized]);\n  \n  // For relative paths, add variations with/without leading slash\n  if (!normalized.startsWith('data:') && !normalized.startsWith('http')) {\n    if (normalized.startsWith('/')) {\n      variations.add(normalized.substring(1));\n      variations.add(normalized);\n    } else {\n      variations.add(normalized);\n      variations.add(`/${normalized}`);\n    }\n    \n    // Also add without query params\n    const withoutQuery = normalized.split('?')[0];\n    if (withoutQuery !== normalized) {\n      variations.add(withoutQuery);\n      if (withoutQuery.startsWith('/')) {\n        variations.add(withoutQuery.substring(1));\n      } else {\n        variations.add(`/${withoutQuery}`);\n      }\n    }\n  }\n  \n  return Array.from(variations);\n}\n\n/**\n * Cleans and validates an array of image URLs\n * Removes invalid, empty, and duplicate URLs\n */\nexport function cleanImageUrls(urls: (string | ImageUrlInput)[]): string[] {\n  if (!Array.isArray(urls)) return [];\n  \n  const seen = new Set<string>();\n  const cleaned: string[] = [];\n  \n  for (const url of urls) {\n    const processed = processImageUrl(url);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    if (seen.has(normalized)) continue;\n    \n    seen.add(normalized);\n    cleaned.push(processed);\n  }\n  \n  return cleaned;\n}\n\n/**\n * Separates main images from variant images\n * Removes variant images from main images array to prevent duplication\n */\nexport function separateMainAndVariantImages(\n  mainImages: (string | ImageUrlInput)[],\n  variantImages: (string | ImageUrlInput)[]\n): {\n  main: string[];\n  variants: string[];\n} {\n  // Process and normalize all variant images\n  const variantUrlSet = new Set<string>();\n  const variantVariationsMap = new Map<string, string[]>();\n  \n  for (const variantImg of variantImages) {\n    const processed = processImageUrl(variantImg);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    variantUrlSet.add(normalized);\n    \n    // Store all variations for this URL\n    const variations = getUrlVariations(processed);\n    variations.forEach(v => variantVariationsMap.set(v, variations));\n  }\n  \n  // Process main images and filter out those that match variants\n  const mainProcessed: string[] = [];\n  const seenMain = new Set<string>();\n  \n  for (const mainImg of mainImages) {\n    const processed = processImageUrl(mainImg);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    \n    // Check if this main image matches any variant image\n    const isVariantImage = variantUrlSet.has(normalized) || \n                          variantVariationsMap.has(normalized) ||\n                          Array.from(variantVariationsMap.values()).some(variations => \n                            variations.some(v => {\n                              const mainVariations = getUrlVariations(processed);\n                              return mainVariations.includes(v);\n                            })\n                          );\n    \n    if (isVariantImage) {\n      continue; // Skip - this is a variant image\n    }\n    \n    // Check for duplicates in main images\n    if (seenMain.has(normalized)) {\n      continue;\n    }\n    \n    seenMain.add(normalized);\n    mainProcessed.push(processed);\n  }\n  \n  // Process variant images (already validated above)\n  const variantProcessed: string[] = [];\n  const seenVariant = new Set<string>();\n  \n  for (const variantImg of variantImages) {\n    const processed = processImageUrl(variantImg);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    if (seenVariant.has(normalized)) continue;\n    \n    seenVariant.add(normalized);\n    variantProcessed.push(processed);\n  }\n  \n  return {\n    main: mainProcessed,\n    variants: variantProcessed,\n  };\n}\n\n/**\n * Processes an image file with compression, EXIF orientation correction, and size optimization\n * Automatically handles:\n * - EXIF orientation (rotates image correctly)\n * - Resize to max dimensions (1920x1920 by default)\n * - Compression to reduce file size (maxSizeMB: 2MB by default)\n * \n * @param file - The image file to process\n * @param options - Processing options\n * @returns Promise<string> - Base64 data URL of processed image\n */\nexport async function processImageFile(\n  file: File,\n  options?: {\n    maxSizeMB?: number; // Maximum file size in MB (default: 2)\n    maxWidthOrHeight?: number; // Maximum width or height in pixels (default: 1920)\n    useWebWorker?: boolean; // Use web worker for processing (default: true)\n    fileType?: string; // Output file type (default: 'image/jpeg')\n    initialQuality?: number; // Initial quality 0-1 (default: 0.8)\n  }\n): Promise<string> {\n  try {\n    logger.debug('Starting image processing', {\n      fileName: file.name,\n      originalSize: `${Math.round(file.size / 1024)}KB`,\n      type: file.type\n    });\n\n    const {\n      maxSizeMB = 2,\n      maxWidthOrHeight = 1920,\n      useWebWorker = true,\n      fileType = 'image/jpeg',\n      initialQuality = 0.8\n    } = options || {};\n\n    // Process image with compression and EXIF orientation correction\n    // browser-image-compression automatically handles EXIF orientation\n    const compressedFile = await imageCompression(file, {\n      maxSizeMB,\n      maxWidthOrHeight,\n      useWebWorker,\n      fileType,\n      initialQuality,\n      // EXIF orientation is automatically handled by browser-image-compression\n    });\n\n    logger.info('Image processed successfully', {\n      originalSize: `${Math.round(file.size / 1024)}KB`,\n      compressedSize: `${Math.round(compressedFile.size / 1024)}KB`,\n      reduction: `${Math.round((1 - compressedFile.size / file.size) * 100)}%`\n    });\n\n    // Convert to base64\n    return new Promise<string>((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const result = reader.result as string;\n        logger.debug('Image converted to base64', { length: result.length });\n        resolve(result);\n      };\n      reader.onerror = (error) => {\n        logger.error('Error converting to base64', { error });\n        reject(new Error('Failed to convert image to base64'));\n      };\n      reader.readAsDataURL(compressedFile);\n    });\n  } catch (error: unknown) {\n    const errorMessage = error instanceof Error ? error.message : 'Failed to process image';\n    logger.error('Error processing image', { error });\n    throw new Error(errorMessage);\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3786, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useImageHandling.ts"],"sourcesContent":["'use client';\r\n\r\nimport type { ChangeEvent } from 'react';\r\nimport { processImageFile } from '../../../../../lib/utils/image-utils';\r\nimport type { Variant, ColorData } from '../types';\r\nimport type { GeneratedVariant } from '../types';\r\n\r\ninterface UseImageHandlingProps {\r\n  imageUrls: string[];\r\n  featuredImageIndex: number;\r\n  variants: Variant[];\r\n  generatedVariants: GeneratedVariant[];\r\n  colorImageTarget: { variantId: string; colorValue: string } | null;\r\n  setImageUrls: (updater: (prev: string[]) => string[]) => void;\r\n  setFeaturedImageIndex: (index: number) => void;\r\n  setMainProductImage: (image: string) => void;\r\n  setVariants: (updater: (prev: Variant[]) => Variant[]) => void;\r\n  setGeneratedVariants: (updater: (prev: GeneratedVariant[]) => GeneratedVariant[]) => void;\r\n  setImageUploadLoading: (loading: boolean) => void;\r\n  setImageUploadError: (error: string | null) => void;\r\n  setColorImageTarget: (target: { variantId: string; colorValue: string } | null) => void;\r\n  t: (key: string) => string;\r\n}\r\n\r\ninterface UseImageHandlingReturn {\r\n  addImageUrl: () => void;\r\n  removeImageUrl: (index: number) => void;\r\n  updateImageUrl: (index: number, url: string) => void;\r\n  setFeaturedImage: (index: number) => void;\r\n  handleUploadImages: (event: ChangeEvent<HTMLInputElement>) => Promise<void>;\r\n  handleUploadVariantImage: (variantId: string, event: ChangeEvent<HTMLInputElement>) => Promise<void>;\r\n  handleUploadColorImages: (event: ChangeEvent<HTMLInputElement>) => Promise<void>;\r\n  addColorImages: (variantId: string, colorValue: string, images: string[]) => void;\r\n}\r\n\r\nexport function useImageHandling({\r\n  imageUrls,\r\n  featuredImageIndex,\r\n  variants,\r\n  generatedVariants,\r\n  colorImageTarget,\r\n  setImageUrls,\r\n  setFeaturedImageIndex,\r\n  setMainProductImage,\r\n  setVariants,\r\n  setGeneratedVariants,\r\n  setImageUploadLoading,\r\n  setImageUploadError,\r\n  setColorImageTarget,\r\n  t,\r\n}: UseImageHandlingProps): UseImageHandlingReturn {\r\n  const addImageUrl = () => {\r\n    setImageUrls((prev) => [...prev, '']);\r\n  };\r\n\r\n  const removeImageUrl = (index: number) => {\r\n    setImageUrls((prev) => {\r\n      const newUrls = prev.filter((_, i) => i !== index);\r\n      let newFeaturedIndex = featuredImageIndex;\r\n      if (index === featuredImageIndex) {\r\n        newFeaturedIndex = 0;\r\n      } else if (index < featuredImageIndex) {\r\n        newFeaturedIndex = Math.max(0, featuredImageIndex - 1);\r\n      }\r\n      const finalFeaturedIndex = newUrls.length === 0 ? 0 : Math.min(newFeaturedIndex, newUrls.length - 1);\r\n      const mainImage = newUrls.length > 0 && newUrls[finalFeaturedIndex] ? newUrls[finalFeaturedIndex] : '';\r\n      setFeaturedImageIndex(finalFeaturedIndex);\r\n      setMainProductImage(mainImage);\r\n      return newUrls;\r\n    });\r\n  };\r\n\r\n  const updateImageUrl = (index: number, url: string) => {\r\n    setImageUrls((prev) => {\r\n      const newUrls = [...prev];\r\n      newUrls[index] = url;\r\n      return newUrls;\r\n    });\r\n  };\r\n\r\n  const setFeaturedImage = (index: number) => {\r\n    if (index < 0 || index >= imageUrls.length) {\r\n      return;\r\n    }\r\n    const mainImage = imageUrls[index] || '';\r\n    setFeaturedImageIndex(index);\r\n    setMainProductImage(mainImage);\r\n  };\r\n\r\n  const addColorImages = (variantId: string, colorValue: string, images: string[]) => {\r\n    console.log(' [ADMIN] Adding images to color:', {\r\n      variantId,\r\n      colorValue,\r\n      imagesCount: images.length,\r\n    });\r\n\r\n    setVariants((prev) =>\r\n      prev.map((v) => {\r\n        if (v.id === variantId) {\r\n          const updatedColors = v.colors.map((c) => {\r\n            if (c.colorValue === colorValue) {\r\n              const uniqueNewImages = images.filter((newImg) => !c.images.includes(newImg));\r\n              const newImages = [...c.images, ...uniqueNewImages];\r\n              return { ...c, images: newImages };\r\n            }\r\n            return c;\r\n          });\r\n          return { ...v, colors: updatedColors };\r\n        }\r\n        return v;\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleUploadImages = async (event: ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(event.target.files || []);\r\n    if (files.length === 0) {\r\n      return;\r\n    }\r\n\r\n    console.log(' [UPLOAD] Starting upload of', files.length, 'image(s)');\r\n    setImageUploadLoading(true);\r\n    setImageUploadError(null);\r\n    try {\r\n      const uploadedImages: string[] = [];\r\n      const errors: string[] = [];\r\n\r\n      const filePromises = files.map(async (file, index) => {\r\n        try {\r\n          if (!file.type.startsWith('image/')) {\r\n            const errorMsg = `\"${file.name}\" is not an image file`;\r\n            console.warn(` [UPLOAD] Skipping non-image file ${index + 1}/${files.length}:`, file.name);\r\n            return { success: false, error: errorMsg, index };\r\n          }\r\n\r\n          console.log(` [UPLOAD] Processing file ${index + 1}/${files.length}:`, file.name, `(${Math.round(file.size / 1024)}KB)`);\r\n\r\n          const base64 = await processImageFile(file, {\r\n            maxSizeMB: 2,\r\n            maxWidthOrHeight: 1920,\r\n            useWebWorker: true,\r\n            fileType: 'image/jpeg',\r\n            initialQuality: 0.8,\r\n          });\r\n\r\n          if (base64 && base64.trim()) {\r\n            console.log(` [UPLOAD] Successfully processed file ${index + 1}/${files.length}:`, file.name);\r\n            return { success: true, base64, index };\r\n          } else {\r\n            const errorMsg = `Failed to convert \"${file.name}\" to base64`;\r\n            console.error(` [UPLOAD] Empty base64 result for file ${index + 1}/${files.length}:`, file.name);\r\n            return { success: false, error: errorMsg, index };\r\n          }\r\n        } catch (error: any) {\r\n          const errorMsg = `Error processing \"${file.name}\": ${error?.message || 'Unknown error'}`;\r\n          console.error(` [UPLOAD] Error processing file ${index + 1}/${files.length}:`, file.name, error);\r\n          return { success: false, error: errorMsg, index };\r\n        }\r\n      });\r\n\r\n      const results = await Promise.allSettled(filePromises);\r\n\r\n      results.forEach((result) => {\r\n        if (result.status === 'fulfilled') {\r\n          const fileResult = result.value;\r\n          if (fileResult.success && fileResult.base64) {\r\n            uploadedImages.push(fileResult.base64);\r\n          } else if (!fileResult.success && fileResult.error) {\r\n            errors.push(fileResult.error);\r\n          }\r\n        } else {\r\n          const errorMsg = `Failed to process file: ${result.reason?.message || 'Unknown error'}`;\r\n          errors.push(errorMsg);\r\n          console.error(` [UPLOAD] Promise rejected:`, result.reason);\r\n        }\r\n      });\r\n\r\n      console.log(' [UPLOAD] Upload complete. Processed:', uploadedImages.length, 'of', files.length, 'files');\r\n      if (errors.length > 0) {\r\n        console.warn(' [UPLOAD] Errors during upload:', errors);\r\n        setImageUploadError(errors.join('; '));\r\n      }\r\n\r\n      if (uploadedImages.length === 0) {\r\n        setImageUploadError(t('admin.products.add.failedToProcessImages') || 'Failed to process images');\r\n        return;\r\n      }\r\n\r\n      setImageUrls((prev) => {\r\n        const newImageUrls = [...prev, ...uploadedImages];\r\n        const newFeaturedIdx = prev.length === 0 ? 0 : featuredImageIndex;\r\n        if (prev.length === 0 && newImageUrls.length > 0) {\r\n          setFeaturedImageIndex(0);\r\n          setMainProductImage(newImageUrls[0]);\r\n        }\r\n        return newImageUrls;\r\n      });\r\n    } catch (error: any) {\r\n      console.error(' [UPLOAD] Fatal error during upload:', error);\r\n      setImageUploadError(error?.message || t('admin.products.add.failedToProcessImages'));\r\n    } finally {\r\n      setImageUploadLoading(false);\r\n      if (event.target) {\r\n        event.target.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUploadVariantImage = async (variantId: string, event: ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(event.target.files || []);\r\n    if (files.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const file = files[0];\r\n    if (!file.type.startsWith('image/')) {\r\n      setImageUploadError(`\"${file.name}\" is not an image file`);\r\n      if (event.target) {\r\n        event.target.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    setImageUploadLoading(true);\r\n    setImageUploadError(null);\r\n    try {\r\n      console.log(' [VARIANT IMAGE] Processing variant image:', {\r\n        variantId,\r\n        fileName: file.name,\r\n        originalSize: `${Math.round(file.size / 1024)}KB`,\r\n      });\r\n\r\n      const base64 = await processImageFile(file, {\r\n        maxSizeMB: 2,\r\n        maxWidthOrHeight: 1920,\r\n        useWebWorker: true,\r\n        fileType: 'image/jpeg',\r\n        initialQuality: 0.8,\r\n      });\r\n\r\n      setGeneratedVariants((prev) => prev.map((v) => (v.id === variantId ? { ...v, image: base64 } : v)));\r\n      console.log(' [VARIANT BUILDER] Variant image uploaded and processed for variant:', variantId);\r\n    } catch (error: any) {\r\n      console.error(' [VARIANT IMAGE] Error processing variant image:', error);\r\n      setImageUploadError(error?.message || t('admin.products.add.failedToProcessImage'));\r\n    } finally {\r\n      setImageUploadLoading(false);\r\n      if (event.target) {\r\n        event.target.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUploadColorImages = async (event: ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(event.target.files || []);\r\n    if (!files.length || !colorImageTarget) {\r\n      console.log(' [ADMIN] No files or no color target:', { filesLength: files.length, colorImageTarget });\r\n      if (event.target) {\r\n        event.target.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    const imageFiles = files.filter((file) => file.type.startsWith('image/'));\r\n    if (imageFiles.length === 0) {\r\n      if (event.target) {\r\n        event.target.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setImageUploadLoading(true);\r\n      console.log(' [ADMIN] Starting upload for color:', colorImageTarget.colorValue, 'Files:', imageFiles.length);\r\n\r\n      const uploadedImages = await Promise.all(\r\n        imageFiles.map(async (file, index) => {\r\n          console.log(` [COLOR IMAGE] Processing image ${index + 1}/${imageFiles.length}:`, {\r\n            fileName: file.name,\r\n            originalSize: `${Math.round(file.size / 1024)}KB`,\r\n          });\r\n\r\n          const base64 = await processImageFile(file, {\r\n            maxSizeMB: 2,\r\n            maxWidthOrHeight: 1920,\r\n            useWebWorker: true,\r\n            fileType: 'image/jpeg',\r\n            initialQuality: 0.8,\r\n          });\r\n\r\n          console.log(` [COLOR IMAGE] Image ${index + 1}/${imageFiles.length} processed, base64 length:`, base64.length);\r\n          return base64;\r\n        })\r\n      );\r\n\r\n      console.log(' [ADMIN] All images processed, adding to variant:', {\r\n        variantId: colorImageTarget.variantId,\r\n        colorValue: colorImageTarget.colorValue,\r\n        imagesCount: uploadedImages.length,\r\n      });\r\n\r\n      addColorImages(colorImageTarget.variantId, colorImageTarget.colorValue, uploadedImages);\r\n      console.log(' [ADMIN] Color images added to state:', uploadedImages.length);\r\n    } catch (error: any) {\r\n      console.error(' [ADMIN] Error uploading color images:', error);\r\n      setImageUploadError(error?.message || t('admin.products.add.failedToProcessImages'));\r\n    } finally {\r\n      setImageUploadLoading(false);\r\n      if (event.target) {\r\n        event.target.value = '';\r\n      }\r\n      setColorImageTarget(null);\r\n    }\r\n  };\r\n\r\n  return {\r\n    addImageUrl,\r\n    removeImageUrl,\r\n    updateImageUrl,\r\n    setFeaturedImage,\r\n    handleUploadImages,\r\n    handleUploadVariantImage,\r\n    handleUploadColorImages,\r\n    addColorImages,\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4081, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/utils/productUtils.ts"],"sourcesContent":["/**\r\n * Utility functions for product management\r\n */\r\n\r\nexport const generateSlug = (title: string): string => {\r\n  return title\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/[^\\w\\s-|]/g, '') // Allow pipe character (|) in slug\r\n    .replace(/[\\s_-]+/g, '-')\r\n    .replace(/^-+|-+$/g, '');\r\n};\r\n\r\n/**\r\n * Generate all combinations of selected attribute values\r\n */\r\nexport const generateAttributeCombinations = (attributeValueGroups: string[][]): string[][] => {\r\n  if (attributeValueGroups.length === 0) {\r\n    return [[]];\r\n  }\r\n  if (attributeValueGroups.length === 1) {\r\n    return attributeValueGroups[0].map((value) => [value]);\r\n  }\r\n  const [firstGroup, ...restGroups] = attributeValueGroups;\r\n  const restCombinations = generateAttributeCombinations(restGroups);\r\n  const result: string[][] = [];\r\n  for (const value of firstGroup) {\r\n    for (const combination of restCombinations) {\r\n      result.push([value, ...combination]);\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\n/**\r\n * Check if a category requires sizes\r\n */\r\nexport const isClothingCategory = (primaryCategoryId: string, categories: Array<{ id: string; requiresSizes?: boolean }>): boolean => {\r\n  if (!primaryCategoryId) {\r\n    return false;\r\n  }\r\n  \r\n  const selectedCategory = categories.find((cat) => cat.id === primaryCategoryId);\r\n  if (!selectedCategory) {\r\n    return false;\r\n  }\r\n  \r\n  return selectedCategory.requiresSizes === true;\r\n};\r\n\r\n\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAEM,MAAM,eAAe,CAAC;IAC3B,OAAO,MACJ,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,cAAc,IAAI,mCAAmC;KAC7D,OAAO,CAAC,YAAY,KACpB,OAAO,CAAC,YAAY;AACzB;AAKO,MAAM,gCAAgC,CAAC;IAC5C,IAAI,qBAAqB,MAAM,KAAK,GAAG;QACrC,OAAO;YAAC,EAAE;SAAC;IACb;IACA,IAAI,qBAAqB,MAAM,KAAK,GAAG;QACrC,OAAO,oBAAoB,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,QAAU;gBAAC;aAAM;IACvD;IACA,MAAM,CAAC,YAAY,GAAG,WAAW,GAAG;IACpC,MAAM,mBAAmB,8BAA8B;IACvD,MAAM,SAAqB,EAAE;IAC7B,KAAK,MAAM,SAAS,WAAY;QAC9B,KAAK,MAAM,eAAe,iBAAkB;YAC1C,OAAO,IAAI,CAAC;gBAAC;mBAAU;aAAY;QACrC;IACF;IACA,OAAO;AACT;AAKO,MAAM,qBAAqB,CAAC,mBAA2B;IAC5D,IAAI,CAAC,mBAAmB;QACtB,OAAO;IACT;IAEA,MAAM,mBAAmB,WAAW,IAAI,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;IAC7D,IAAI,CAAC,kBAAkB;QACrB,OAAO;IACT;IAEA,OAAO,iBAAiB,aAAa,KAAK;AAC5C"}},
    {"offset": {"line": 4136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useVariantGeneration.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport type { Attribute, GeneratedVariant } from '../types';\r\nimport { generateSlug } from '../utils/productUtils';\r\n\r\ninterface UseVariantGenerationProps {\r\n  selectedAttributesForVariants: Set<string>;\r\n  selectedAttributeValueIds: Record<string, string[]>;\r\n  attributes: Attribute[];\r\n  generatedVariants: GeneratedVariant[];\r\n  formDataSlug: string;\r\n  formDataTitle: string;\r\n  isEditMode: boolean;\r\n  productId: string | null;\r\n  setGeneratedVariants: (updater: (prev: GeneratedVariant[]) => GeneratedVariant[]) => void;\r\n}\r\n\r\nexport function useVariantGeneration({\r\n  selectedAttributesForVariants,\r\n  selectedAttributeValueIds,\r\n  attributes,\r\n  generatedVariants,\r\n  formDataSlug,\r\n  formDataTitle,\r\n  isEditMode,\r\n  productId,\r\n  setGeneratedVariants,\r\n}: UseVariantGenerationProps) {\r\n  const generateVariantsFromAttributes = () => {\r\n    console.log(' [VARIANT BUILDER] Generating single variant with all attributes...');\r\n\r\n    const selectedAttrs = Array.from(selectedAttributesForVariants);\r\n    if (selectedAttrs.length === 0) {\r\n      console.log(' [VARIANT BUILDER] No attributes selected');\r\n      setGeneratedVariants(() => []);\r\n      return;\r\n    }\r\n\r\n    setGeneratedVariants((prev) => {\r\n      const manuallyAddedVariants = prev.filter((v) => v.id !== 'variant-all');\r\n      const existingAutoVariant = prev.find((v) => v.id === 'variant-all');\r\n\r\n      if (manuallyAddedVariants.length > 0) {\r\n        console.log(' [VARIANT BUILDER] Manual variants exist, skipping auto-generated variant');\r\n        return manuallyAddedVariants;\r\n      }\r\n\r\n      const variantId = 'variant-all';\r\n      const allSelectedValueIds: string[] = [];\r\n      selectedAttrs.forEach((attributeId) => {\r\n        const selectedIds = selectedAttributeValueIds[attributeId] || [];\r\n        allSelectedValueIds.push(...selectedIds);\r\n      });\r\n\r\n      const baseSlug = formDataSlug || generateSlug(formDataTitle) || 'PROD';\r\n      let sku = `${baseSlug}`;\r\n\r\n      if (allSelectedValueIds.length > 0) {\r\n        const valueParts: string[] = [];\r\n        selectedAttrs.forEach((attributeId) => {\r\n          const attribute = attributes.find((a) => a.id === attributeId);\r\n          if (!attribute) return;\r\n\r\n          const selectedIds = selectedAttributeValueIds[attributeId] || [];\r\n          selectedIds.forEach((valueId) => {\r\n            const value = attribute.values.find((v) => v.id === valueId);\r\n            if (value) {\r\n              valueParts.push(value.value.toUpperCase().replace(/\\s+/g, '-'));\r\n            }\r\n          });\r\n        });\r\n\r\n        if (valueParts.length > 0) {\r\n          sku = `${baseSlug}-${valueParts.join('-')}`;\r\n        }\r\n      }\r\n\r\n      const autoVariant: GeneratedVariant = {\r\n        id: variantId,\r\n        selectedValueIds: allSelectedValueIds,\r\n        price: existingAutoVariant?.price || '',\r\n        compareAtPrice: existingAutoVariant?.compareAtPrice || '',\r\n        stock: existingAutoVariant?.stock || '',\r\n        sku: existingAutoVariant?.sku || sku,\r\n        image: existingAutoVariant?.image || null,\r\n      };\r\n\r\n      const result = [autoVariant];\r\n      console.log(' [VARIANT BUILDER] Variants updated:', {\r\n        manuallyAdded: 0,\r\n        autoGenerated: 1,\r\n        total: result.length,\r\n      });\r\n      return result;\r\n    });\r\n\r\n    console.log(' [VARIANT BUILDER] Single variant generated with', selectedAttrs.length, 'attributes');\r\n  };\r\n\r\n  const applyToAllVariants = (field: 'price' | 'compareAtPrice' | 'stock' | 'sku', value: string) => {\r\n    setGeneratedVariants((prev) =>\r\n      prev.map((variant) => ({\r\n        ...variant,\r\n        [field]: value,\r\n      }))\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isEditMode && productId && (window as any).__productVariantsToConvert) {\r\n      return;\r\n    }\r\n\r\n    if (selectedAttributesForVariants.size > 0) {\r\n      generateVariantsFromAttributes();\r\n    } else {\r\n      if (!isEditMode) {\r\n        setGeneratedVariants(() => []);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedAttributesForVariants, selectedAttributeValueIds, attributes, formDataSlug, formDataTitle, isEditMode, productId]);\r\n\r\n  return {\r\n    generateVariantsFromAttributes,\r\n    applyToAllVariants,\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;;AAJA;;;AAkBO,SAAS,qBAAqB,EACnC,6BAA6B,EAC7B,yBAAyB,EACzB,UAAU,EACV,iBAAiB,EACjB,YAAY,EACZ,aAAa,EACb,UAAU,EACV,SAAS,EACT,oBAAoB,EACM;;IAC1B,MAAM,iCAAiC;QACrC,QAAQ,GAAG,CAAC;QAEZ,MAAM,gBAAgB,MAAM,IAAI,CAAC;QACjC,IAAI,cAAc,MAAM,KAAK,GAAG;YAC9B,QAAQ,GAAG,CAAC;YACZ,qBAAqB,IAAM,EAAE;YAC7B;QACF;QAEA,qBAAqB,CAAC;YACpB,MAAM,wBAAwB,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAC1D,MAAM,sBAAsB,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAEtD,IAAI,sBAAsB,MAAM,GAAG,GAAG;gBACpC,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACT;YAEA,MAAM,YAAY;YAClB,MAAM,sBAAgC,EAAE;YACxC,cAAc,OAAO,CAAC,CAAC;gBACrB,MAAM,cAAc,yBAAyB,CAAC,YAAY,IAAI,EAAE;gBAChE,oBAAoB,IAAI,IAAI;YAC9B;YAEA,MAAM,WAAW,gBAAgB,IAAA,0LAAY,EAAC,kBAAkB;YAChE,IAAI,MAAM,GAAG,UAAU;YAEvB,IAAI,oBAAoB,MAAM,GAAG,GAAG;gBAClC,MAAM,aAAuB,EAAE;gBAC/B,cAAc,OAAO,CAAC,CAAC;oBACrB,MAAM,YAAY,WAAW,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;oBAClD,IAAI,CAAC,WAAW;oBAEhB,MAAM,cAAc,yBAAyB,CAAC,YAAY,IAAI,EAAE;oBAChE,YAAY,OAAO,CAAC,CAAC;wBACnB,MAAM,QAAQ,UAAU,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;wBACpD,IAAI,OAAO;4BACT,WAAW,IAAI,CAAC,MAAM,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,QAAQ;wBAC5D;oBACF;gBACF;gBAEA,IAAI,WAAW,MAAM,GAAG,GAAG;oBACzB,MAAM,GAAG,SAAS,CAAC,EAAE,WAAW,IAAI,CAAC,MAAM;gBAC7C;YACF;YAEA,MAAM,cAAgC;gBACpC,IAAI;gBACJ,kBAAkB;gBAClB,OAAO,qBAAqB,SAAS;gBACrC,gBAAgB,qBAAqB,kBAAkB;gBACvD,OAAO,qBAAqB,SAAS;gBACrC,KAAK,qBAAqB,OAAO;gBACjC,OAAO,qBAAqB,SAAS;YACvC;YAEA,MAAM,SAAS;gBAAC;aAAY;YAC5B,QAAQ,GAAG,CAAC,yCAAyC;gBACnD,eAAe;gBACf,eAAe;gBACf,OAAO,OAAO,MAAM;YACtB;YACA,OAAO;QACT;QAEA,QAAQ,GAAG,CAAC,qDAAqD,cAAc,MAAM,EAAE;IACzF;IAEA,MAAM,qBAAqB,CAAC,OAAqD;QAC/E,qBAAqB,CAAC,OACpB,KAAK,GAAG,CAAC,CAAC,UAAY,CAAC;oBACrB,GAAG,OAAO;oBACV,CAAC,MAAM,EAAE;gBACX,CAAC;IAEL;IAEA,IAAA,0KAAS;0CAAC;YACR,IAAI,cAAc,aAAa,AAAC,OAAe,0BAA0B,EAAE;gBACzE;YACF;YAEA,IAAI,8BAA8B,IAAI,GAAG,GAAG;gBAC1C;YACF,OAAO;gBACL,IAAI,CAAC,YAAY;oBACf;0DAAqB,IAAM,EAAE;;gBAC/B;YACF;QACA,uDAAuD;QACzD;yCAAG;QAAC;QAA+B;QAA2B;QAAY;QAAc;QAAe;QAAY;KAAU;IAE7H,OAAO;QACL;QACA;IACF;AACF;GA9GgB"}},
    {"offset": {"line": 4253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useProductDataLoading.ts"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/lib/auth/AuthContext';\r\nimport { apiClient } from '@/lib/api-client';\r\nimport { CURRENCIES, type CurrencyCode } from '@/lib/currency';\r\nimport type { Brand, Category, Attribute } from '../types';\r\n\r\ninterface UseProductDataLoadingProps {\r\n  isLoggedIn: boolean;\r\n  isAdmin: boolean;\r\n  isLoading: boolean;\r\n  setBrands: (brands: Brand[]) => void;\r\n  setCategories: (categories: Category[]) => void;\r\n  setAttributes: (attributes: Attribute[]) => void;\r\n  setDefaultCurrency: (currency: CurrencyCode) => void;\r\n  attributesDropdownOpen: boolean;\r\n  setAttributesDropdownOpen: (open: boolean) => void;\r\n  attributesDropdownRef: React.RefObject<HTMLDivElement>;\r\n  categoriesExpanded: boolean;\r\n  setCategoriesExpanded: (expanded: boolean) => void;\r\n  brandsExpanded: boolean;\r\n  setBrandsExpanded: (expanded: boolean) => void;\r\n}\r\n\r\nexport function useProductDataLoading({\r\n  isLoggedIn,\r\n  isAdmin,\r\n  isLoading,\r\n  setBrands,\r\n  setCategories,\r\n  setAttributes,\r\n  setDefaultCurrency,\r\n  attributesDropdownOpen,\r\n  setAttributesDropdownOpen,\r\n  attributesDropdownRef,\r\n  categoriesExpanded,\r\n  setCategoriesExpanded,\r\n  brandsExpanded,\r\n  setBrandsExpanded,\r\n}: UseProductDataLoadingProps) {\r\n  const router = useRouter();\r\n\r\n  // Auth check\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      if (!isLoggedIn || !isAdmin) {\r\n        router.push('/admin');\r\n        return;\r\n      }\r\n    }\r\n  }, [isLoggedIn, isAdmin, isLoading, router]);\r\n\r\n  // Close attributes dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (attributesDropdownRef.current && !attributesDropdownRef.current.contains(event.target as Node)) {\r\n        setAttributesDropdownOpen(false);\r\n      }\r\n    };\r\n\r\n    if (attributesDropdownOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [attributesDropdownOpen, attributesDropdownRef, setAttributesDropdownOpen]);\r\n\r\n  // Load default currency from settings\r\n  useEffect(() => {\r\n    const loadDefaultCurrency = async () => {\r\n      try {\r\n        const settingsRes = await apiClient.get<{ defaultCurrency?: string }>('/api/v1/admin/settings');\r\n        const currency = (settingsRes.defaultCurrency || 'AMD') as CurrencyCode;\r\n        if (currency in CURRENCIES) {\r\n          setDefaultCurrency(currency);\r\n          console.log(' [ADMIN] Default currency loaded:', currency);\r\n        }\r\n      } catch (err) {\r\n        console.error(' [ADMIN] Error loading default currency:', err);\r\n        setDefaultCurrency('AMD');\r\n      }\r\n    };\r\n    \r\n    if (isLoggedIn && isAdmin) {\r\n      loadDefaultCurrency();\r\n    }\r\n  }, [isLoggedIn, isAdmin, setDefaultCurrency]);\r\n\r\n  // Fetch brands, categories, and attributes\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        console.log(' [ADMIN] Fetching brands, categories, and attributes...');\r\n        const [brandsRes, categoriesRes, attributesRes] = await Promise.all([\r\n          apiClient.get<{ data: Brand[] }>('/api/v1/admin/brands'),\r\n          apiClient.get<{ data: Category[] }>('/api/v1/admin/categories'),\r\n          apiClient.get<{ data: Attribute[] }>('/api/v1/admin/attributes'),\r\n        ]);\r\n        setBrands(brandsRes.data || []);\r\n        setCategories(categoriesRes.data || []);\r\n        setAttributes(attributesRes.data || []);\r\n        console.log(' [ADMIN] Data fetched:', {\r\n          brands: brandsRes.data?.length || 0,\r\n          categories: categoriesRes.data?.length || 0,\r\n          attributes: attributesRes.data?.length || 0,\r\n        });\r\n        // Debug: Log attributes details\r\n        if (attributesRes.data && attributesRes.data.length > 0) {\r\n          console.log(' [ADMIN] Attributes loaded:', attributesRes.data.map(attr => ({\r\n            id: attr.id,\r\n            key: attr.key,\r\n            name: attr.name,\r\n            valuesCount: attr.values?.length || 0,\r\n            values: attr.values?.map(v => ({ \r\n              value: v.value, \r\n              label: v.label,\r\n              colors: v.colors,\r\n              colorsType: typeof v.colors,\r\n              colorsIsArray: Array.isArray(v.colors),\r\n              colorsLength: v.colors?.length,\r\n              imageUrl: v.imageUrl \r\n            })) || []\r\n          })));\r\n          const colorAttr = attributesRes.data.find(a => a.key === 'color');\r\n          const sizeAttr = attributesRes.data.find(a => a.key === 'size');\r\n          if (!colorAttr) {\r\n            console.warn(' [ADMIN] Color attribute not found in loaded attributes!');\r\n          } else {\r\n            console.log(' [ADMIN] Color attribute found:', { id: colorAttr.id, valuesCount: colorAttr.values?.length || 0 });\r\n          }\r\n          if (!sizeAttr) {\r\n            console.warn(' [ADMIN] Size attribute not found in loaded attributes!');\r\n          } else {\r\n            console.log(' [ADMIN] Size attribute found:', { id: sizeAttr.id, valuesCount: sizeAttr.values?.length || 0 });\r\n          }\r\n        } else {\r\n          console.warn(' [ADMIN] No attributes loaded! This may cause issues with variant builder.');\r\n        }\r\n        // Debug: Log categories with requiresSizes\r\n        if (categoriesRes.data) {\r\n          console.log(' [ADMIN] Categories with requiresSizes:', \r\n            categoriesRes.data.map(cat => ({ \r\n              id: cat.id, \r\n              title: cat.title, \r\n              requiresSizes: cat.requiresSizes \r\n            }))\r\n          );\r\n        }\r\n      } catch (err: any) {\r\n        console.error(' [ADMIN] Error fetching data:', err);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [setBrands, setCategories, setAttributes]);\r\n\r\n  // Close category dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (categoriesExpanded && !target.closest('[data-category-dropdown]')) {\r\n        setCategoriesExpanded(false);\r\n      }\r\n    };\r\n\r\n    if (categoriesExpanded) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => {\r\n        document.removeEventListener('mousedown', handleClickOutside);\r\n      };\r\n    }\r\n  }, [categoriesExpanded, setCategoriesExpanded]);\r\n\r\n  // Close brand dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (brandsExpanded && !target.closest('[data-brand-dropdown]')) {\r\n        setBrandsExpanded(false);\r\n      }\r\n    };\r\n\r\n    if (brandsExpanded) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => {\r\n        document.removeEventListener('mousedown', handleClickOutside);\r\n      };\r\n    }\r\n  }, [brandsExpanded, setBrandsExpanded]);\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4485, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useProductEditMode.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { apiClient } from '@/lib/api-client';\r\nimport { convertPrice, type CurrencyCode } from '@/lib/currency';\r\nimport { smartSplitUrls, cleanImageUrls, separateMainAndVariantImages } from '@/lib/utils/image-utils';\r\nimport type { ProductData, ColorData, Variant } from '../types';\r\nimport { useTranslation } from '@/lib/i18n-client';\r\n\r\ninterface UseProductEditModeProps {\r\n  productId: string | null;\r\n  isLoggedIn: boolean;\r\n  isAdmin: boolean;\r\n  attributes: any[];\r\n  defaultCurrency: CurrencyCode;\r\n  setLoadingProduct: (loading: boolean) => void;\r\n  setFormData: (updater: (prev: any) => any) => void;\r\n  setUseNewBrand: (use: boolean) => void;\r\n  setUseNewCategory: (use: boolean) => void;\r\n  setNewBrandName: (name: string) => void;\r\n  setNewCategoryName: (name: string) => void;\r\n  setHasVariantsToLoad: (has: boolean) => void;\r\n  setProductType: (type: 'simple' | 'variable') => void;\r\n  setSimpleProductData: (data: any) => void;\r\n}\r\n\r\nexport function useProductEditMode({\r\n  productId,\r\n  isLoggedIn,\r\n  isAdmin,\r\n  attributes,\r\n  defaultCurrency,\r\n  setLoadingProduct,\r\n  setFormData,\r\n  setUseNewBrand,\r\n  setUseNewCategory,\r\n  setNewBrandName,\r\n  setNewCategoryName,\r\n  setHasVariantsToLoad,\r\n  setProductType,\r\n  setSimpleProductData,\r\n}: UseProductEditModeProps) {\r\n  const router = useRouter();\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    if (productId && isLoggedIn && isAdmin) {\r\n      const loadProduct = async () => {\r\n        try {\r\n          setLoadingProduct(true);\r\n          console.log(' [ADMIN] Loading product for edit:', productId);\r\n          const product = await apiClient.get<ProductData>(`/api/v1/admin/products/${productId}`);\r\n          \r\n          const colorDataMap = new Map<string, ColorData>();\r\n          let firstPrice = '';\r\n          let firstCompareAtPrice = '';\r\n          let firstSku = '';\r\n          \r\n          (product.variants || []).forEach((variant: any, index: number) => {\r\n            console.log(` [ADMIN] Processing variant ${index}:`, {\r\n              id: variant.id,\r\n              sku: variant.sku,\r\n              price: variant.price,\r\n              stock: variant.stock,\r\n              color: variant.color,\r\n              size: variant.size,\r\n              options: variant.options,\r\n              imageUrl: variant.imageUrl,\r\n            });\r\n            \r\n            let color = variant.color || '';\r\n            let size = variant.size || '';\r\n            \r\n            if (!color && variant.options && Array.isArray(variant.options)) {\r\n              console.log(` [ADMIN] Searching for color in options:`, variant.options);\r\n              const colorOption = variant.options.find((opt: any) => {\r\n                const matches = opt.attributeKey === 'color' || opt.key === 'color' || opt.attribute === 'color';\r\n                if (matches) {\r\n                  console.log(` [ADMIN] Found color option:`, opt);\r\n                }\r\n                return matches;\r\n              });\r\n              if (colorOption) {\r\n                color = colorOption.value || '';\r\n                console.log(` [ADMIN] Found color from options:`, color);\r\n              } else {\r\n                const colorOptionByValue = variant.options.find((opt: any) => {\r\n                  if (opt.attributeValue) {\r\n                    const attrValue = opt.attributeValue;\r\n                    return attrValue.attribute?.key === 'color' || attrValue.attributeKey === 'color';\r\n                  }\r\n                  return false;\r\n                });\r\n                if (colorOptionByValue && colorOptionByValue.attributeValue) {\r\n                  color = colorOptionByValue.attributeValue.value || '';\r\n                  console.log(` [ADMIN] Found color from attributeValue:`, color);\r\n                }\r\n              }\r\n            }\r\n            \r\n            if (!size && variant.options && Array.isArray(variant.options)) {\r\n              console.log(` [ADMIN] Searching for size in options:`, variant.options);\r\n              const sizeOption = variant.options.find((opt: any) => {\r\n                const matches = opt.attributeKey === 'size' || opt.key === 'size' || opt.attribute === 'size';\r\n                if (matches) {\r\n                  console.log(` [ADMIN] Found size option:`, opt);\r\n                }\r\n                return matches;\r\n              });\r\n              if (sizeOption) {\r\n                size = sizeOption.value || '';\r\n                console.log(` [ADMIN] Found size from options:`, size);\r\n              } else {\r\n                const sizeOptionByValue = variant.options.find((opt: any) => {\r\n                  if (opt.attributeValue) {\r\n                    const attrValue = opt.attributeValue;\r\n                    return attrValue.attribute?.key === 'size' || attrValue.attributeKey === 'size';\r\n                  }\r\n                  return false;\r\n                });\r\n                if (sizeOptionByValue && sizeOptionByValue.attributeValue) {\r\n                  size = sizeOptionByValue.attributeValue.value || '';\r\n                  console.log(` [ADMIN] Found size from attributeValue:`, size);\r\n                }\r\n              }\r\n            }\r\n            \r\n            if (!color && variant.sku) {\r\n              const skuParts = variant.sku.split('-');\r\n              if (skuParts.length >= 2) {\r\n                const possibleColor = skuParts[1];\r\n                if (possibleColor && possibleColor.length > 0 && !/^\\d+$/.test(possibleColor)) {\r\n                  color = possibleColor;\r\n                  console.log(` [ADMIN] Extracted color from SKU:`, color);\r\n                }\r\n              }\r\n            }\r\n            \r\n            if (!size && variant.sku) {\r\n              const skuParts = variant.sku.split('-');\r\n              if (skuParts.length >= 3) {\r\n                const possibleSize = skuParts[2];\r\n                if (possibleSize) {\r\n                  size = possibleSize;\r\n                  console.log(` [ADMIN] Extracted size from SKU:`, size);\r\n                }\r\n              }\r\n            }\r\n            \r\n            console.log(` [ADMIN] Extracted from variant ${index}:`, { color, size });\r\n            \r\n            const stockValue = variant.stock !== undefined && variant.stock !== null \r\n              ? String(variant.stock) \r\n              : '';\r\n            \r\n            if (!color) {\r\n              const defaultColor = 'default';\r\n              const defaultColorLabel = t('admin.products.add.defaultColor');\r\n              \r\n              if (!colorDataMap.has(defaultColor)) {\r\n                const priceInDefaultCurrency = variant.price !== undefined && variant.price !== null \r\n                  ? convertPrice(typeof variant.price === 'number' ? variant.price : parseFloat(String(variant.price || '0')), 'USD', defaultCurrency) \r\n                  : 0;\r\n                const compareAtPriceInDefaultCurrency = variant.compareAtPrice !== undefined && variant.compareAtPrice !== null \r\n                  ? convertPrice(typeof variant.compareAtPrice === 'number' ? variant.compareAtPrice : parseFloat(String(variant.compareAtPrice || '0')), 'USD', defaultCurrency) \r\n                  : 0;\r\n                \r\n                const colorData: ColorData = {\r\n                  colorValue: defaultColor,\r\n                  colorLabel: defaultColorLabel,\r\n                  images: smartSplitUrls(variant.imageUrl),\r\n                  stock: size ? '' : stockValue,\r\n                  price: variant.price !== undefined && variant.price !== null ? String(priceInDefaultCurrency) : '',\r\n                  compareAtPrice: variant.compareAtPrice !== undefined && variant.compareAtPrice !== null ? String(compareAtPriceInDefaultCurrency) : '',\r\n                  sizes: [],\r\n                  sizeStocks: {},\r\n                  sizePrices: {},\r\n                  sizeCompareAtPrices: {},\r\n                  sizeLabels: {},\r\n                  isFeatured: !!variant.isFeatured,\r\n                };\r\n                \r\n                if (size) {\r\n                  colorData.sizes = [size];\r\n                  colorData.sizeStocks = { [size]: stockValue };\r\n                  if (variant.price !== undefined && variant.price !== null) {\r\n                    colorData.sizePrices![size] = String(priceInDefaultCurrency);\r\n                  }\r\n                  if (variant.compareAtPrice !== undefined && variant.compareAtPrice !== null) {\r\n                    colorData.sizeCompareAtPrices![size] = String(compareAtPriceInDefaultCurrency);\r\n                  }\r\n                }\r\n                \r\n                colorDataMap.set(defaultColor, colorData);\r\n              } else {\r\n                const existingColorData = colorDataMap.get(defaultColor)!;\r\n                if (variant.imageUrl) {\r\n                  const imageUrls = smartSplitUrls(variant.imageUrl);\r\n                  imageUrls.forEach((url: string) => {\r\n                    const exists = existingColorData.images.some(existingUrl => {\r\n                      if (url.startsWith('data:') || existingUrl.startsWith('data:')) {\r\n                        return url === existingUrl;\r\n                      }\r\n                      const n1 = existingUrl.startsWith('/') ? existingUrl : `/${existingUrl}`;\r\n                      const n2 = url.startsWith('/') ? url : `/${url}`;\r\n                      return n1 === n2 || existingUrl === url;\r\n                    });\r\n                    if (url && !exists) {\r\n                      existingColorData.images.push(url);\r\n                    }\r\n                  });\r\n                }\r\n                \r\n                if (size) {\r\n                  if (!existingColorData.sizes.includes(size)) {\r\n                    existingColorData.sizes.push(size);\r\n                  }\r\n                  existingColorData.sizeStocks[size] = stockValue;\r\n                  if (!existingColorData.sizePrices) existingColorData.sizePrices = {};\r\n                  if (variant.price !== undefined && variant.price !== null) {\r\n                    const priceInDefaultCurrency = convertPrice(typeof variant.price === 'number' ? variant.price : parseFloat(String(variant.price || '0')), 'USD', defaultCurrency);\r\n                    existingColorData.sizePrices[size] = String(priceInDefaultCurrency);\r\n                  }\r\n                  if (!existingColorData.sizeCompareAtPrices) existingColorData.sizeCompareAtPrices = {};\r\n                  if (variant.compareAtPrice !== undefined && variant.compareAtPrice !== null) {\r\n                    const compareAtPriceInDefaultCurrency = convertPrice(typeof variant.compareAtPrice === 'number' ? variant.compareAtPrice : parseFloat(String(variant.compareAtPrice || '0')), 'USD', defaultCurrency);\r\n                    existingColorData.sizeCompareAtPrices[size] = String(compareAtPriceInDefaultCurrency);\r\n                  }\r\n                } else {\r\n                  const currentStockNum = parseInt(existingColorData.stock) || 0;\r\n                  const variantStockNum = parseInt(stockValue) || 0;\r\n                  existingColorData.stock = String(currentStockNum + variantStockNum);\r\n                }\r\n              }\r\n            } else if (color) {\r\n              if (!colorDataMap.has(color)) {\r\n                const colorAttribute = attributes.find((attr) => attr.key === 'color');\r\n                const colorValueObj = colorAttribute?.values.find((v: { id: string; value: string; label: string }) => v.value === color);\r\n                const colorLabel = colorValueObj?.label || \r\n                  (color.charAt(0).toUpperCase() + color.slice(1).replace(/-/g, ' '));\r\n                \r\n                const priceInDefaultCurrency = variant.price !== undefined && variant.price !== null \r\n                  ? convertPrice(typeof variant.price === 'number' ? variant.price : parseFloat(String(variant.price || '0')), 'USD', defaultCurrency) \r\n                  : 0;\r\n                const compareAtPriceInDefaultCurrency = variant.compareAtPrice !== undefined && variant.compareAtPrice !== null \r\n                  ? convertPrice(typeof variant.compareAtPrice === 'number' ? variant.compareAtPrice : parseFloat(String(variant.compareAtPrice || '0')), 'USD', defaultCurrency) \r\n                  : 0;\r\n                \r\n                const colorData: ColorData = {\r\n                  colorValue: color,\r\n                  colorLabel: colorLabel,\r\n                  images: smartSplitUrls(variant.imageUrl),\r\n                  stock: size ? '' : stockValue,\r\n                  price: variant.price !== undefined && variant.price !== null ? String(priceInDefaultCurrency) : '',\r\n                  compareAtPrice: variant.compareAtPrice !== undefined && variant.compareAtPrice !== null ? String(compareAtPriceInDefaultCurrency) : '',\r\n                  sizes: [],\r\n                  sizeStocks: {},\r\n                  sizePrices: {},\r\n                  sizeCompareAtPrices: {},\r\n                  sizeLabels: {},\r\n                  isFeatured: !!variant.isFeatured,\r\n                };\r\n                \r\n                if (size) {\r\n                  colorData.sizes = [size];\r\n                  colorData.sizeStocks = { [size]: stockValue };\r\n                  if (variant.price !== undefined && variant.price !== null) {\r\n                    colorData.sizePrices![size] = String(priceInDefaultCurrency);\r\n                  }\r\n                  if (variant.compareAtPrice !== undefined && variant.compareAtPrice !== null) {\r\n                    colorData.sizeCompareAtPrices![size] = String(compareAtPriceInDefaultCurrency);\r\n                  }\r\n                  if (variant.sizeLabel) {\r\n                    colorData.sizeLabels = { [size]: variant.sizeLabel };\r\n                  }\r\n                }\r\n                \r\n                colorDataMap.set(color, colorData);\r\n              } else {\r\n                const existingColorData = colorDataMap.get(color)!;\r\n                \r\n                if (variant.imageUrl) {\r\n                  const imageUrls = smartSplitUrls(variant.imageUrl);\r\n                  imageUrls.forEach((url: string) => {\r\n                    const exists = existingColorData.images.some(existingUrl => {\r\n                      if (url.startsWith('data:') || existingUrl.startsWith('data:')) {\r\n                        return url === existingUrl;\r\n                      }\r\n                      const n1 = existingUrl.startsWith('/') ? existingUrl : `/${existingUrl}`;\r\n                      const n2 = url.startsWith('/') ? url : `/${url}`;\r\n                      return n1 === n2 || existingUrl === url;\r\n                    });\r\n                    \r\n                    if (url && !exists) {\r\n                      existingColorData.images.push(url);\r\n                    }\r\n                  });\r\n                }\r\n                \r\n                if (size) {\r\n                  if (!existingColorData.sizes.includes(size)) {\r\n                    existingColorData.sizes.push(size);\r\n                  }\r\n                  existingColorData.sizeStocks[size] = stockValue;\r\n                  if (!existingColorData.sizePrices) existingColorData.sizePrices = {};\r\n                  if (variant.price !== undefined && variant.price !== null) {\r\n                    const priceInDefaultCurrency = convertPrice(typeof variant.price === 'number' ? variant.price : parseFloat(String(variant.price || '0')), 'USD', defaultCurrency);\r\n                    existingColorData.sizePrices[size] = String(priceInDefaultCurrency);\r\n                  }\r\n                  if (!existingColorData.sizeCompareAtPrices) existingColorData.sizeCompareAtPrices = {};\r\n                  if (variant.compareAtPrice !== undefined && variant.compareAtPrice !== null) {\r\n                    const compareAtPriceInDefaultCurrency = convertPrice(typeof variant.compareAtPrice === 'number' ? variant.compareAtPrice : parseFloat(String(variant.compareAtPrice || '0')), 'USD', defaultCurrency);\r\n                    existingColorData.sizeCompareAtPrices[size] = String(compareAtPriceInDefaultCurrency);\r\n                  }\r\n                  if (variant.sizeLabel) {\r\n                    if (!existingColorData.sizeLabels) existingColorData.sizeLabels = {};\r\n                    existingColorData.sizeLabels[size] = variant.sizeLabel;\r\n                  }\r\n                } else {\r\n                  const currentStockNum = parseInt(existingColorData.stock) || 0;\r\n                  const variantStockNum = parseInt(stockValue) || 0;\r\n                  existingColorData.stock = String(currentStockNum + variantStockNum);\r\n                }\r\n\r\n                if (variant.isFeatured) {\r\n                  existingColorData.isFeatured = true;\r\n                }\r\n              }\r\n            }\r\n            \r\n            if (index === 0) {\r\n              const firstPriceUSD = variant.price !== undefined && variant.price !== null ? variant.price : 0;\r\n              const firstCompareAtPriceUSD = variant.compareAtPrice !== undefined && variant.compareAtPrice !== null ? variant.compareAtPrice : 0;\r\n              firstPrice = firstPriceUSD > 0 ? String(convertPrice(firstPriceUSD, 'USD', defaultCurrency)) : '';\r\n              firstCompareAtPrice = firstCompareAtPriceUSD > 0 ? String(convertPrice(firstCompareAtPriceUSD, 'USD', defaultCurrency)) : '';\r\n              firstSku = variant.sku || '';\r\n            }\r\n          });\r\n          \r\n          const mergedVariant: Variant = {\r\n            id: `variant-${Date.now()}-${Math.random()}`,\r\n            price: firstPrice,\r\n            compareAtPrice: firstCompareAtPrice,\r\n            sku: firstSku,\r\n            colors: Array.from(colorDataMap.values()),\r\n          };\r\n          \r\n          const variantImages = new Set<string>();\r\n          \r\n          mergedVariant.colors.forEach(c => {\r\n            c.images.forEach(img => {\r\n              if (img) {\r\n                variantImages.add(img);\r\n                const normalized = img.startsWith('/') ? img : `/${img}`;\r\n                variantImages.add(normalized);\r\n              }\r\n            });\r\n          });\r\n          \r\n          console.log(' [ADMIN] Collecting variant images from product.variants...');\r\n          (product.variants || []).forEach((variant: any, idx: number) => {\r\n            if (variant.imageUrl) {\r\n              if (typeof variant.imageUrl === 'string' && variant.imageUrl.startsWith('data:')) {\r\n                variantImages.add(variant.imageUrl);\r\n                console.log(`   Added variant base64 image (length: ${variant.imageUrl.length})`);\r\n              } else {\r\n                const imageUrls = typeof variant.imageUrl === 'string' \r\n                  ? variant.imageUrl.split(',').map((url: string) => url.trim()).filter(Boolean)\r\n                  : [];\r\n                imageUrls.forEach((url: string) => {\r\n                  if (url) {\r\n                    variantImages.add(url);\r\n                    const normalizedWithSlash = url.startsWith('/') ? url : `/${url}`;\r\n                    const normalizedWithoutSlash = url.startsWith('/') ? url.substring(1) : url;\r\n                    variantImages.add(normalizedWithSlash);\r\n                    variantImages.add(normalizedWithoutSlash);\r\n                    const urlWithoutQuery = url.split('?')[0];\r\n                    if (urlWithoutQuery !== url) {\r\n                      variantImages.add(urlWithoutQuery);\r\n                      const normalizedWithoutQuery = urlWithoutQuery.startsWith('/') ? urlWithoutQuery : `/${urlWithoutQuery}`;\r\n                      variantImages.add(normalizedWithoutQuery);\r\n                    }\r\n                    console.log(`   Added variant URL: ${url.substring(0, 50)}...`);\r\n                  }\r\n                });\r\n              }\r\n            } else {\r\n              console.log(` [ADMIN] Variant ${idx} has no imageUrl`);\r\n            }\r\n          });\r\n          console.log(` [ADMIN] Total variant images collected: ${variantImages.size}`);\r\n\r\n          const mediaList = product.media || [];\r\n          console.log(' [ADMIN] Loading main media images. Total media:', mediaList.length);\r\n          \r\n          const { main } = separateMainAndVariantImages(\r\n            Array.isArray(mediaList) ? mediaList : [],\r\n            variantImages.size > 0 ? Array.from(variantImages) : []\r\n          );\r\n          \r\n          const normalizedMedia = cleanImageUrls(main);\r\n          console.log(` [ADMIN] Main media loaded: ${normalizedMedia.length} images (after separation from ${variantImages.size} variant images)`);\r\n          \r\n          const featuredIndexFromApi = Array.isArray(mediaList)\r\n            ? mediaList.findIndex((item: any) => {\r\n                const url = typeof item === 'string' ? item : item?.url || '';\r\n                if (!url) return false;\r\n                return typeof item === 'object' && item?.isFeatured === true;\r\n              })\r\n            : -1;\r\n\r\n          const mainProductImage = (product as any).mainProductImage \r\n            || (normalizedMedia.length > 0 ? normalizedMedia[0] : '');\r\n\r\n          const brandIds = product.brandId ? [product.brandId] : [];\r\n\r\n          setFormData((prev: any) => ({\r\n            ...prev,\r\n            title: product.title || '',\r\n            slug: product.slug || '',\r\n            descriptionHtml: product.descriptionHtml || '',\r\n            brandIds: brandIds,\r\n            primaryCategoryId: product.primaryCategoryId || '',\r\n            categoryIds: product.categoryIds || [],\r\n            published: product.published || false,\r\n            featured: product.featured || false,\r\n            imageUrls: normalizedMedia,\r\n            featuredImageIndex:\r\n              featuredIndexFromApi >= 0 && featuredIndexFromApi < normalizedMedia.length\r\n                ? featuredIndexFromApi\r\n                : 0,\r\n            mainProductImage: normalizedMedia.length > 0 && normalizedMedia[featuredIndexFromApi >= 0 && featuredIndexFromApi < normalizedMedia.length ? featuredIndexFromApi : 0]\r\n              ? normalizedMedia[featuredIndexFromApi >= 0 && featuredIndexFromApi < normalizedMedia.length ? featuredIndexFromApi : 0]\r\n              : mainProductImage || '',\r\n            variants: [mergedVariant],\r\n            labels: (product.labels || []).map((label: any) => ({\r\n              id: label.id || '',\r\n              type: label.type || 'text',\r\n              value: label.value || '',\r\n              position: label.position || 'top-left',\r\n              color: label.color || null,\r\n            })),\r\n          }));\r\n          \r\n          setUseNewBrand(false);\r\n          setUseNewCategory(false);\r\n          setNewBrandName('');\r\n          setNewCategoryName('');\r\n          \r\n          if (product.variants && product.variants.length > 0) {\r\n            (window as any).__productVariantsToConvert = product.variants;\r\n            setHasVariantsToLoad(true);\r\n          }\r\n          \r\n          if (product.attributeIds && product.attributeIds.length > 0) {\r\n            (window as any).__productAttributeIds = product.attributeIds;\r\n            console.log(' [ADMIN] Product attributeIds loaded:', product.attributeIds);\r\n          }\r\n          \r\n          const variants = product.variants || [];\r\n          const hasVariants = variants.length > 0;\r\n          const hasVariantsWithAttributes = hasVariants && \r\n            variants.some((variant: any) => {\r\n              if (variant.attributes && typeof variant.attributes === 'object' && Object.keys(variant.attributes).length > 0) {\r\n                return true;\r\n              }\r\n              if (variant.options && Array.isArray(variant.options) && variant.options.length > 0) {\r\n                return true;\r\n              }\r\n              return false;\r\n            });\r\n          \r\n          console.log(' [ADMIN] Product type check:', {\r\n            hasVariants,\r\n            variantsCount: variants.length,\r\n            hasVariantsWithAttributes,\r\n            firstVariant: hasVariants && variants.length > 0 ? {\r\n              hasAttributes: !!(variants[0] && (variants[0] as any).attributes && typeof (variants[0] as any).attributes === 'object' && Object.keys((variants[0] as any).attributes).length > 0),\r\n              hasOptions: !!((variants[0] as any).options && Array.isArray((variants[0] as any).options) && (variants[0] as any).options.length > 0),\r\n              attributes: (variants[0] as any).attributes,\r\n              optionsCount: ((variants[0] as any).options?.length || 0),\r\n            } : null,\r\n          });\r\n          \r\n          if (!hasVariantsWithAttributes) {\r\n            console.log(' [ADMIN] Product variants have no attributes, setting productType to \"simple\"');\r\n            setProductType('simple');\r\n            \r\n            if (hasVariants && variants.length > 0) {\r\n              const firstVariant = variants[0] as any;\r\n              setSimpleProductData({\r\n                price: firstVariant.price ? String(convertPrice(typeof firstVariant.price === 'number' ? firstVariant.price : parseFloat(String(firstVariant.price || '0')), 'USD', defaultCurrency)) : '',\r\n                compareAtPrice: firstVariant.compareAtPrice ? String(convertPrice(typeof firstVariant.compareAtPrice === 'number' ? firstVariant.compareAtPrice : parseFloat(String(firstVariant.compareAtPrice || '0')), 'USD', defaultCurrency)) : '',\r\n                sku: firstVariant.sku || '',\r\n                quantity: String(firstVariant.stock || 0),\r\n              });\r\n            } else {\r\n              setSimpleProductData({\r\n                price: '',\r\n                compareAtPrice: '',\r\n                sku: '',\r\n                quantity: '0',\r\n              });\r\n            }\r\n          } else {\r\n            console.log(' [ADMIN] Product variants have attributes, keeping productType as \"variable\"');\r\n            setProductType('variable');\r\n          }\r\n          \r\n          console.log(' [ADMIN] Product loaded for edit');\r\n        } catch (err: any) {\r\n          console.error(' [ADMIN] Error loading product:', err);\r\n          router.push('/admin/products');\r\n        } finally {\r\n          setLoadingProduct(false);\r\n        }\r\n      };\r\n      \r\n      loadProduct();\r\n    }\r\n  }, [productId, isLoggedIn, isAdmin, router, attributes, defaultCurrency, setLoadingProduct, setFormData, setUseNewBrand, setUseNewCategory, setNewBrandName, setNewCategoryName, setHasVariantsToLoad, setProductType, setSimpleProductData, t]);\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5005, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useProductVariantConversion.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { convertPrice, type CurrencyCode } from '@/lib/currency';\r\nimport type { GeneratedVariant } from '../types';\r\n\r\ninterface UseProductVariantConversionProps {\r\n  productId: string | null;\r\n  attributes: any[];\r\n  defaultCurrency: CurrencyCode;\r\n  setSelectedAttributesForVariants: (attrs: Set<string>) => void;\r\n  setSelectedAttributeValueIds: (ids: Record<string, string[]>) => void;\r\n  setGeneratedVariants: (variants: GeneratedVariant[]) => void;\r\n  setHasVariantsToLoad: (has: boolean) => void;\r\n}\r\n\r\nexport function useProductVariantConversion({\r\n  productId,\r\n  attributes,\r\n  defaultCurrency,\r\n  setSelectedAttributesForVariants,\r\n  setSelectedAttributeValueIds,\r\n  setGeneratedVariants,\r\n  setHasVariantsToLoad,\r\n}: UseProductVariantConversionProps) {\r\n  useEffect(() => {\r\n    if (productId && attributes.length > 0 && (window as any).__productVariantsToConvert) {\r\n      const productVariants = (window as any).__productVariantsToConvert;\r\n      console.log(' [ADMIN] Converting product variants to generatedVariants format:', {\r\n        variantsCount: productVariants.length,\r\n        attributesCount: attributes.length,\r\n        firstVariant: productVariants[0],\r\n      });\r\n      \r\n      const attributeIdsSet = new Set<string>();\r\n      const attributeValueIdsMap: Record<string, string[]> = {};\r\n      \r\n      productVariants.forEach((variant: any) => {\r\n        if (variant.options && Array.isArray(variant.options)) {\r\n          variant.options.forEach((opt: any) => {\r\n            let attributeId = opt.attributeId;\r\n            let valueId = opt.valueId;\r\n            \r\n            if (!attributeId && opt.attributeValue) {\r\n              attributeId = opt.attributeValue.attributeId || opt.attributeValue.attribute?.id;\r\n            }\r\n            if (!valueId && opt.attributeValue) {\r\n              valueId = opt.attributeValue.id;\r\n            }\r\n            \r\n            if (attributeId && valueId) {\r\n              attributeIdsSet.add(attributeId);\r\n              \r\n              if (!attributeValueIdsMap[attributeId]) {\r\n                attributeValueIdsMap[attributeId] = [];\r\n              }\r\n              if (!attributeValueIdsMap[attributeId].includes(valueId)) {\r\n                attributeValueIdsMap[attributeId].push(valueId);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      const productAttributeIds = (window as any).__productAttributeIds || [];\r\n      if (productAttributeIds.length > 0) {\r\n        console.log(' [ADMIN] Adding product attributeIds to selected attributes:', productAttributeIds);\r\n        productAttributeIds.forEach((attrId: string) => {\r\n          attributeIdsSet.add(attrId);\r\n        });\r\n      }\r\n      \r\n      if (attributeIdsSet.size > 0) {\r\n        console.log(' [ADMIN] Setting selectedAttributesForVariants with all attributes:', Array.from(attributeIdsSet));\r\n        setSelectedAttributesForVariants(attributeIdsSet);\r\n      }\r\n      \r\n      if (Object.keys(attributeValueIdsMap).length > 0) {\r\n        setSelectedAttributeValueIds(attributeValueIdsMap);\r\n      }\r\n      \r\n      interface VariantData {\r\n        id: string;\r\n        selectedValueIds: string[];\r\n        price: number;\r\n        compareAtPrice: number | null;\r\n        stock: number;\r\n        sku: string;\r\n        image: string | null;\r\n        originalVariantIds: string[];\r\n      }\r\n      \r\n      const variantDataList: VariantData[] = [];\r\n      \r\n      productVariants.forEach((variant: any, variantIndex: number) => {\r\n        const selectedValueIds: string[] = [];\r\n        \r\n        if (variant.attributes && typeof variant.attributes === 'object') {\r\n          console.log(` [ADMIN] Variant ${variantIndex} has attributes JSONB:`, variant.attributes);\r\n          \r\n          Object.keys(variant.attributes).forEach((attributeKey) => {\r\n            const attribute = attributes.find(a => a.key === attributeKey);\r\n            if (!attribute) {\r\n              console.warn(` [ADMIN] Attribute not found for key: ${attributeKey}`);\r\n              return;\r\n            }\r\n            \r\n            const attributeValues = variant.attributes[attributeKey];\r\n            if (Array.isArray(attributeValues)) {\r\n              attributeValues.forEach((attrValue: any) => {\r\n                const valueId = attrValue.valueId || attrValue.id;\r\n                const value = attrValue.value || attrValue;\r\n                \r\n                if (valueId) {\r\n                  if (!selectedValueIds.includes(valueId)) {\r\n                    selectedValueIds.push(valueId);\r\n                  }\r\n                } else if (value) {\r\n                  const foundValue = attribute.values.find((v: { id: string; value: string; label: string }) => \r\n                    v.value === value || v.label === value\r\n                  );\r\n                  if (foundValue && !selectedValueIds.includes(foundValue.id)) {\r\n                    selectedValueIds.push(foundValue.id);\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n        \r\n        if (selectedValueIds.length === 0 && variant.options && Array.isArray(variant.options)) {\r\n          console.log(` [ADMIN] Variant ${variantIndex} using options fallback:`, variant.options);\r\n          \r\n          const attributeValueMap: Record<string, Set<string>> = {};\r\n          \r\n          variant.options.forEach((opt: any) => {\r\n            let attributeId = opt.attributeId;\r\n            let valueId = opt.valueId;\r\n            let attributeKey = opt.attributeKey;\r\n            \r\n            if (!attributeId && opt.attributeValue) {\r\n              attributeId = opt.attributeValue.attributeId || opt.attributeValue.attribute?.id || opt.attributeValue.attributeId;\r\n              attributeKey = opt.attributeValue.attribute?.key || opt.attributeValue.attributeKey;\r\n            }\r\n            if (!valueId && opt.attributeValue) {\r\n              valueId = opt.attributeValue.id || opt.attributeValue.valueId;\r\n            }\r\n            \r\n            if (!attributeId && opt.attributeKey) {\r\n              const foundAttr = attributes.find(a => a.key === opt.attributeKey);\r\n              if (foundAttr) {\r\n                attributeId = foundAttr.id;\r\n                attributeKey = foundAttr.key;\r\n              }\r\n            }\r\n            \r\n            if (attributeId && !valueId && opt.value) {\r\n              const foundAttr = attributes.find(a => a.id === attributeId);\r\n              if (foundAttr) {\r\n                const foundValue = foundAttr.values.find((v: { id: string; value: string; label: string }) => v.value === opt.value || v.label === opt.value);\r\n                if (foundValue) {\r\n                  valueId = foundValue.id;\r\n                }\r\n              }\r\n            }\r\n            \r\n            if (attributeKey && valueId) {\r\n              if (!attributeValueMap[attributeKey]) {\r\n                attributeValueMap[attributeKey] = new Set();\r\n              }\r\n              attributeValueMap[attributeKey].add(valueId);\r\n            }\r\n          });\r\n          \r\n          Object.values(attributeValueMap).forEach((valueIdSet) => {\r\n            valueIdSet.forEach((valueId) => {\r\n              if (!selectedValueIds.includes(valueId)) {\r\n                selectedValueIds.push(valueId);\r\n              }\r\n            });\r\n          });\r\n        }\r\n        \r\n        let variantImage: string | null = null;\r\n        if (variant.imageUrl) {\r\n          if (typeof variant.imageUrl === 'string' && variant.imageUrl.startsWith('data:')) {\r\n            variantImage = variant.imageUrl;\r\n            console.log(` [ADMIN] Variant ${variantIndex} base64 image length:`, variantImage?.length || 0);\r\n          } else {\r\n            const imageUrls = typeof variant.imageUrl === 'string' \r\n              ? variant.imageUrl.split(',').map((url: string) => url.trim()).filter(Boolean)\r\n              : [];\r\n            variantImage = imageUrls.length > 0 ? imageUrls[0] : null;\r\n            console.log(` [ADMIN] Variant ${variantIndex} imageUrl length:`, variant.imageUrl?.length || 0, ' extracted image length:', variantImage?.length || 0);\r\n          }\r\n        } else {\r\n          console.log(` [ADMIN] Variant ${variantIndex} has no imageUrl`);\r\n        }\r\n        \r\n        const priceInDefaultCurrency = variant.price !== undefined && variant.price !== null \r\n          ? convertPrice(variant.price, 'USD', defaultCurrency)\r\n          : 0;\r\n        const compareAtPriceInDefaultCurrency = variant.compareAtPrice !== undefined && variant.compareAtPrice !== null \r\n          ? convertPrice(variant.compareAtPrice, 'USD', defaultCurrency)\r\n          : null;\r\n        \r\n        variantDataList.push({\r\n          id: variant.id || `variant-${Date.now()}-${variantIndex}-${Math.random()}`,\r\n          selectedValueIds: selectedValueIds.sort(),\r\n          price: priceInDefaultCurrency,\r\n          compareAtPrice: compareAtPriceInDefaultCurrency,\r\n          stock: variant.stock !== undefined && variant.stock !== null ? variant.stock : 0,\r\n          sku: variant.sku || '',\r\n          image: variantImage,\r\n          originalVariantIds: [variant.id || `variant-${variantIndex}`],\r\n        });\r\n      });\r\n      \r\n      const variantGroups = new Map<string, VariantData[]>();\r\n      \r\n      variantDataList.forEach((variantData) => {\r\n        const valueIdsKey = variantData.selectedValueIds.join(',');\r\n        const priceKey = variantData.price.toString();\r\n        const compareAtPriceKey = variantData.compareAtPrice !== null ? variantData.compareAtPrice.toString() : 'null';\r\n        \r\n        const groupKey = `${valueIdsKey}|${priceKey}|${compareAtPriceKey}`;\r\n        \r\n        if (!variantGroups.has(groupKey)) {\r\n          variantGroups.set(groupKey, []);\r\n        }\r\n        variantGroups.get(groupKey)!.push(variantData);\r\n      });\r\n      \r\n      const convertedVariants: Array<{\r\n        id: string;\r\n        selectedValueIds: string[];\r\n        price: string;\r\n        compareAtPrice: string;\r\n        stock: string;\r\n        sku: string;\r\n        image: string | null;\r\n      }> = [];\r\n      \r\n      variantGroups.forEach((group, groupKey) => {\r\n        const allValueIds = new Set<string>();\r\n        group.forEach(variantData => {\r\n          variantData.selectedValueIds.forEach(valueId => {\r\n            allValueIds.add(valueId);\r\n          });\r\n        });\r\n        \r\n        const firstVariant = group[0];\r\n        const allStocksSame = group.every(v => v.stock === firstVariant.stock);\r\n        const stockValue = allStocksSame ? firstVariant.stock : firstVariant.stock;\r\n        \r\n        const combinedSku = group.length === 1 \r\n          ? firstVariant.sku \r\n          : group.map(v => v.sku).filter(Boolean).join(', ');\r\n        \r\n        const combinedImage = firstVariant.image;\r\n        \r\n        convertedVariants.push({\r\n          id: `variant-group-${Date.now()}-${Math.random()}`,\r\n          selectedValueIds: Array.from(allValueIds).sort(),\r\n          price: firstVariant.price.toString(),\r\n          compareAtPrice: firstVariant.compareAtPrice !== null ? firstVariant.compareAtPrice.toString() : '',\r\n          stock: stockValue.toString(),\r\n          sku: combinedSku,\r\n          image: combinedImage,\r\n        });\r\n        \r\n        console.log(` [ADMIN] Grouped ${group.length} variants into 1 row:`, {\r\n          groupKey,\r\n          valueIds: Array.from(allValueIds),\r\n          price: firstVariant.price,\r\n          stock: stockValue,\r\n          originalVariantIds: group.flatMap(v => v.originalVariantIds),\r\n        });\r\n      });\r\n      \r\n      if (convertedVariants.length > 0) {\r\n        setGeneratedVariants(convertedVariants);\r\n        console.log(' [ADMIN] Converted product variants to generatedVariants:', {\r\n          totalVariants: convertedVariants.length,\r\n          totalOriginalVariants: productVariants.length,\r\n          attributeValueIdsMap,\r\n          convertedVariants: convertedVariants.map(v => ({\r\n            id: v.id,\r\n            valueIdsCount: v.selectedValueIds.length,\r\n            price: v.price,\r\n            stock: v.stock,\r\n            sku: v.sku,\r\n          })),\r\n        });\r\n        delete (window as any).__productVariantsToConvert;\r\n        setHasVariantsToLoad(false);\r\n      } else {\r\n        console.warn(' [ADMIN] No variants converted. Check variant options structure:', {\r\n          variantsCount: productVariants.length,\r\n          firstVariantOptions: productVariants[0]?.options,\r\n        });\r\n        setHasVariantsToLoad(false);\r\n      }\r\n    } else if (productId && attributes.length > 0) {\r\n      console.log(' [ADMIN] Waiting for variants to convert. Attributes loaded:', attributes.length);\r\n    }\r\n  }, [productId, attributes, defaultCurrency, setSelectedAttributesForVariants, setSelectedAttributeValueIds, setGeneratedVariants, setHasVariantsToLoad]);\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useProductAttributeHandlers.ts"],"sourcesContent":["import { useState } from 'react';\r\nimport { apiClient } from '../../../../../lib/api-client';\r\nimport { useTranslation } from '../../../../../lib/i18n-client';\r\nimport type { Attribute } from '../types';\r\n\r\ninterface UseProductAttributeHandlersProps {\r\n  attributes: Attribute[];\r\n  setAttributes: (updater: (prev: Attribute[]) => Attribute[]) => void;\r\n  getColorAttribute: () => Attribute | undefined;\r\n  getSizeAttribute: () => Attribute | undefined;\r\n}\r\n\r\nexport function useProductAttributeHandlers({\r\n  attributes,\r\n  setAttributes,\r\n  getColorAttribute,\r\n  getSizeAttribute,\r\n}: UseProductAttributeHandlersProps) {\r\n  const { t } = useTranslation();\r\n  const [newColorName, setNewColorName] = useState('');\r\n  const [newSizeName, setNewSizeName] = useState('');\r\n  const [addingColor, setAddingColor] = useState(false);\r\n  const [addingSize, setAddingSize] = useState(false);\r\n  const [colorMessage, setColorMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  const [sizeMessage, setSizeMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n\r\n  const handleAddColor = async () => {\r\n    setColorMessage(null);\r\n    const colorAttribute = getColorAttribute();\r\n    if (!colorAttribute) {\r\n      setColorMessage({ type: 'error', text: t('admin.products.add.colorAttributeNotFound') });\r\n      return;\r\n    }\r\n\r\n    if (!newColorName.trim()) {\r\n      setColorMessage({ type: 'error', text: t('admin.products.add.colorNameRequired') });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAddingColor(true);\r\n      const response = await apiClient.post<{ data: Attribute }>(`/api/v1/admin/attributes/${colorAttribute.id}/values`, {\r\n        label: newColorName.trim(),\r\n        locale: 'en',\r\n      });\r\n      \r\n      if (response.data) {\r\n        setAttributes((prev) => \r\n          prev.map((attr) => \r\n            attr.id === colorAttribute.id ? response.data : attr\r\n          )\r\n        );\r\n        setColorMessage({ type: 'success', text: t('admin.products.add.colorAddedSuccess').replace('{name}', newColorName.trim()) });\r\n        setNewColorName('');\r\n        setTimeout(() => setColorMessage(null), 3000);\r\n      }\r\n    } catch (err: any) {\r\n      setColorMessage({ type: 'error', text: err.message || t('admin.products.add.failedToAddColor') });\r\n    } finally {\r\n      setAddingColor(false);\r\n    }\r\n  };\r\n\r\n  const handleAddSize = async () => {\r\n    setSizeMessage(null);\r\n    const sizeAttribute = getSizeAttribute();\r\n    if (!sizeAttribute) {\r\n      setSizeMessage({ type: 'error', text: t('admin.products.add.sizeAttributeNotFound') });\r\n      return;\r\n    }\r\n\r\n    if (!newSizeName.trim()) {\r\n      setSizeMessage({ type: 'error', text: t('admin.products.add.sizeNameRequired') });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAddingSize(true);\r\n      const response = await apiClient.post<{ data: Attribute }>(`/api/v1/admin/attributes/${sizeAttribute.id}/values`, {\r\n        label: newSizeName.trim(),\r\n        locale: 'en',\r\n      });\r\n      \r\n      if (response.data) {\r\n        setAttributes((prev) => \r\n          prev.map((attr) => \r\n            attr.id === sizeAttribute.id ? response.data : attr\r\n          )\r\n        );\r\n        setSizeMessage({ type: 'success', text: t('admin.products.add.sizeAddedSuccess').replace('{name}', newSizeName.trim()) });\r\n        setNewSizeName('');\r\n        setTimeout(() => setSizeMessage(null), 3000);\r\n      }\r\n    } catch (err: any) {\r\n      setSizeMessage({ type: 'error', text: err.message || t('admin.products.add.failedToAddSize') });\r\n    } finally {\r\n      setAddingSize(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    newColorName,\r\n    setNewColorName,\r\n    newSizeName,\r\n    setNewSizeName,\r\n    addingColor,\r\n    addingSize,\r\n    colorMessage,\r\n    sizeMessage,\r\n    handleAddColor,\r\n    handleAddSize,\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAUO,SAAS,4BAA4B,EAC1C,UAAU,EACV,aAAa,EACb,iBAAiB,EACjB,gBAAgB,EACiB;;IACjC,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAC5B,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAqD;IACrG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAqD;IAEnG,MAAM,iBAAiB;QACrB,gBAAgB;QAChB,MAAM,iBAAiB;QACvB,IAAI,CAAC,gBAAgB;YACnB,gBAAgB;gBAAE,MAAM;gBAAS,MAAM,EAAE;YAA6C;YACtF;QACF;QAEA,IAAI,CAAC,aAAa,IAAI,IAAI;YACxB,gBAAgB;gBAAE,MAAM;gBAAS,MAAM,EAAE;YAAwC;YACjF;QACF;QAEA,IAAI;YACF,eAAe;YACf,MAAM,WAAW,MAAM,mJAAS,CAAC,IAAI,CAAsB,CAAC,yBAAyB,EAAE,eAAe,EAAE,CAAC,OAAO,CAAC,EAAE;gBACjH,OAAO,aAAa,IAAI;gBACxB,QAAQ;YACV;YAEA,IAAI,SAAS,IAAI,EAAE;gBACjB,cAAc,CAAC,OACb,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,eAAe,EAAE,GAAG,SAAS,IAAI,GAAG;gBAGpD,gBAAgB;oBAAE,MAAM;oBAAW,MAAM,EAAE,wCAAwC,OAAO,CAAC,UAAU,aAAa,IAAI;gBAAI;gBAC1H,gBAAgB;gBAChB,WAAW,IAAM,gBAAgB,OAAO;YAC1C;QACF,EAAE,OAAO,KAAU;YACjB,gBAAgB;gBAAE,MAAM;gBAAS,MAAM,IAAI,OAAO,IAAI,EAAE;YAAuC;QACjG,SAAU;YACR,eAAe;QACjB;IACF;IAEA,MAAM,gBAAgB;QACpB,eAAe;QACf,MAAM,gBAAgB;QACtB,IAAI,CAAC,eAAe;YAClB,eAAe;gBAAE,MAAM;gBAAS,MAAM,EAAE;YAA4C;YACpF;QACF;QAEA,IAAI,CAAC,YAAY,IAAI,IAAI;YACvB,eAAe;gBAAE,MAAM;gBAAS,MAAM,EAAE;YAAuC;YAC/E;QACF;QAEA,IAAI;YACF,cAAc;YACd,MAAM,WAAW,MAAM,mJAAS,CAAC,IAAI,CAAsB,CAAC,yBAAyB,EAAE,cAAc,EAAE,CAAC,OAAO,CAAC,EAAE;gBAChH,OAAO,YAAY,IAAI;gBACvB,QAAQ;YACV;YAEA,IAAI,SAAS,IAAI,EAAE;gBACjB,cAAc,CAAC,OACb,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,cAAc,EAAE,GAAG,SAAS,IAAI,GAAG;gBAGnD,eAAe;oBAAE,MAAM;oBAAW,MAAM,EAAE,uCAAuC,OAAO,CAAC,UAAU,YAAY,IAAI;gBAAI;gBACvH,eAAe;gBACf,WAAW,IAAM,eAAe,OAAO;YACzC;QACF,EAAE,OAAO,KAAU;YACjB,eAAe;gBAAE,MAAM;gBAAS,MAAM,IAAI,OAAO,IAAI,EAAE;YAAsC;QAC/F,SAAU;YACR,cAAc;QAChB;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GApGgB;;QAMA,yJAAc"}},
    {"offset": {"line": 5427, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useBrandAndCategoryCreation.ts"],"sourcesContent":["import { apiClient } from '@/lib/api-client';\r\nimport { useTranslation } from '@/lib/i18n-client';\r\nimport type { Brand, Category } from '../types';\r\n\r\ninterface UseBrandAndCategoryCreationProps {\r\n  formData: {\r\n    brandIds: string[];\r\n    primaryCategoryId: string;\r\n  };\r\n  useNewBrand: boolean;\r\n  newBrandName: string;\r\n  useNewCategory: boolean;\r\n  newCategoryName: string;\r\n  setBrands: (updater: (prev: Brand[]) => Brand[]) => void;\r\n  setCategories: (updater: (prev: Category[]) => Category[]) => void;\r\n  setLoading: (loading: boolean) => void;\r\n}\r\n\r\nexport function useBrandAndCategoryCreation({\r\n  formData,\r\n  useNewBrand,\r\n  newBrandName,\r\n  useNewCategory,\r\n  newCategoryName,\r\n  setBrands,\r\n  setCategories,\r\n  setLoading,\r\n}: UseBrandAndCategoryCreationProps) {\r\n  const { t } = useTranslation();\r\n\r\n  const createBrandAndCategory = async (): Promise<{\r\n    finalBrandIds: string[];\r\n    finalPrimaryCategoryId: string;\r\n    creationMessages: string[];\r\n    error: boolean;\r\n  }> => {\r\n    const creationMessages: string[] = [];\r\n    let finalBrandIds = [...formData.brandIds];\r\n    let finalPrimaryCategoryId = formData.primaryCategoryId;\r\n\r\n    // Create new brand if provided\r\n    if (useNewBrand && newBrandName.trim()) {\r\n      try {\r\n        console.log(' [ADMIN] Creating new brand:', newBrandName);\r\n        const brandResponse = await apiClient.post<{ data: Brand }>('/api/v1/admin/brands', {\r\n          name: newBrandName.trim(),\r\n          locale: 'en',\r\n        });\r\n        if (brandResponse.data) {\r\n          if (!finalBrandIds.includes(brandResponse.data.id)) {\r\n            finalBrandIds.push(brandResponse.data.id);\r\n          }\r\n          setBrands((prev) => [...prev, brandResponse.data]);\r\n          console.log(' [ADMIN] Brand created:', brandResponse.data.id);\r\n          creationMessages.push(t('admin.products.add.brandCreatedSuccess').replace('{name}', newBrandName.trim()));\r\n        }\r\n      } catch (err: any) {\r\n        console.error(' [ADMIN] Error creating brand:', err);\r\n        setLoading(false);\r\n        return { finalBrandIds, finalPrimaryCategoryId, creationMessages, error: true };\r\n      }\r\n    }\r\n\r\n    // Create new category if provided\r\n    if (useNewCategory && newCategoryName.trim()) {\r\n      try {\r\n        console.log(' [ADMIN] Creating new category:', newCategoryName);\r\n        const categoryResponse = await apiClient.post<{ data: Category }>('/api/v1/admin/categories', {\r\n          title: newCategoryName.trim(),\r\n          locale: 'en',\r\n          requiresSizes: false,\r\n        });\r\n        if (categoryResponse.data) {\r\n          finalPrimaryCategoryId = categoryResponse.data.id;\r\n          setCategories((prev) => [...prev, categoryResponse.data]);\r\n          console.log(' [ADMIN] Category created:', categoryResponse.data.id);\r\n          creationMessages.push(\r\n            t('admin.products.add.categoryCreatedSuccess').replace('{name}', newCategoryName.trim())\r\n          );\r\n        }\r\n      } catch (err: any) {\r\n        console.error(' [ADMIN] Error creating category:', err);\r\n        setLoading(false);\r\n        return { finalBrandIds, finalPrimaryCategoryId, creationMessages, error: true };\r\n      }\r\n    }\r\n\r\n    return { finalBrandIds, finalPrimaryCategoryId, creationMessages, error: false };\r\n  };\r\n\r\n  return { createBrandAndCategory };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAiBO,SAAS,4BAA4B,EAC1C,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,cAAc,EACd,eAAe,EACf,SAAS,EACT,aAAa,EACb,UAAU,EACuB;;IACjC,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,yJAAc;IAE5B,MAAM,yBAAyB;QAM7B,MAAM,mBAA6B,EAAE;QACrC,IAAI,gBAAgB;eAAI,SAAS,QAAQ;SAAC;QAC1C,IAAI,yBAAyB,SAAS,iBAAiB;QAEvD,+BAA+B;QAC/B,IAAI,eAAe,aAAa,IAAI,IAAI;YACtC,IAAI;gBACF,QAAQ,GAAG,CAAC,mCAAmC;gBAC/C,MAAM,gBAAgB,MAAM,mJAAS,CAAC,IAAI,CAAkB,wBAAwB;oBAClF,MAAM,aAAa,IAAI;oBACvB,QAAQ;gBACV;gBACA,IAAI,cAAc,IAAI,EAAE;oBACtB,IAAI,CAAC,cAAc,QAAQ,CAAC,cAAc,IAAI,CAAC,EAAE,GAAG;wBAClD,cAAc,IAAI,CAAC,cAAc,IAAI,CAAC,EAAE;oBAC1C;oBACA,UAAU,CAAC,OAAS;+BAAI;4BAAM,cAAc,IAAI;yBAAC;oBACjD,QAAQ,GAAG,CAAC,4BAA4B,cAAc,IAAI,CAAC,EAAE;oBAC7D,iBAAiB,IAAI,CAAC,EAAE,0CAA0C,OAAO,CAAC,UAAU,aAAa,IAAI;gBACvG;YACF,EAAE,OAAO,KAAU;gBACjB,QAAQ,KAAK,CAAC,mCAAmC;gBACjD,WAAW;gBACX,OAAO;oBAAE;oBAAe;oBAAwB;oBAAkB,OAAO;gBAAK;YAChF;QACF;QAEA,kCAAkC;QAClC,IAAI,kBAAkB,gBAAgB,IAAI,IAAI;YAC5C,IAAI;gBACF,QAAQ,GAAG,CAAC,qCAAqC;gBACjD,MAAM,mBAAmB,MAAM,mJAAS,CAAC,IAAI,CAAqB,4BAA4B;oBAC5F,OAAO,gBAAgB,IAAI;oBAC3B,QAAQ;oBACR,eAAe;gBACjB;gBACA,IAAI,iBAAiB,IAAI,EAAE;oBACzB,yBAAyB,iBAAiB,IAAI,CAAC,EAAE;oBACjD,cAAc,CAAC,OAAS;+BAAI;4BAAM,iBAAiB,IAAI;yBAAC;oBACxD,QAAQ,GAAG,CAAC,+BAA+B,iBAAiB,IAAI,CAAC,EAAE;oBACnE,iBAAiB,IAAI,CACnB,EAAE,6CAA6C,OAAO,CAAC,UAAU,gBAAgB,IAAI;gBAEzF;YACF,EAAE,OAAO,KAAU;gBACjB,QAAQ,KAAK,CAAC,sCAAsC;gBACpD,WAAW;gBACX,OAAO;oBAAE;oBAAe;oBAAwB;oBAAkB,OAAO;gBAAK;YAChF;QACF;QAEA,OAAO;YAAE;YAAe;YAAwB;YAAkB,OAAO;QAAM;IACjF;IAEA,OAAO;QAAE;IAAuB;AAClC;GAzEgB;;QAUA,yJAAc"}},
    {"offset": {"line": 5527, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useVariantConversionToFormData.ts"],"sourcesContent":["import type { Attribute, ColorData, Variant, GeneratedVariant } from '../types';\r\n\r\ninterface UseVariantConversionToFormDataProps {\r\n  productType: 'simple' | 'variable';\r\n  selectedAttributesForVariants: Set<string>;\r\n  generatedVariants: GeneratedVariant[];\r\n  attributes: Attribute[];\r\n  formDataSlug: string;\r\n  setFormData: (updater: (prev: any) => any) => void;\r\n}\r\n\r\nexport function useVariantConversionToFormData({\r\n  productType,\r\n  selectedAttributesForVariants,\r\n  generatedVariants,\r\n  attributes,\r\n  formDataSlug,\r\n  setFormData,\r\n}: UseVariantConversionToFormDataProps) {\r\n  const convertGeneratedVariantsToFormData = (): void => {\r\n    // Skip this for simple products\r\n    if (productType === 'variable' && selectedAttributesForVariants.size > 0 && generatedVariants.length > 0) {\r\n      console.log(' [ADMIN] Converting new variant builder variants to formData format...');\r\n      console.log(' [ADMIN] Total generated variants to convert:', generatedVariants.length);\r\n      \r\n      const allNewVariants: Variant[] = [];\r\n      const skuSetForConversion = new Set<string>();\r\n      \r\n      generatedVariants.forEach((variant, variantIndex) => {\r\n        const colorAttribute = attributes.find(a => a.key === 'color');\r\n        const sizeAttribute = attributes.find(a => a.key === 'size');\r\n        \r\n        const selectedColorValueIds = colorAttribute \r\n          ? variant.selectedValueIds.filter(id => colorAttribute.values.some(v => v.id === id))\r\n          : [];\r\n        const selectedSizeValueIds = sizeAttribute \r\n          ? variant.selectedValueIds.filter(id => sizeAttribute.values.some(v => v.id === id))\r\n          : [];\r\n        \r\n        const colors: ColorData[] = [];\r\n        \r\n        if (colorAttribute && selectedColorValueIds.length > 0) {\r\n          selectedColorValueIds.forEach((valueId) => {\r\n            const value = colorAttribute.values.find(v => v.id === valueId);\r\n            if (value) {\r\n              const colorData: ColorData = {\r\n                colorValue: value.value,\r\n                colorLabel: value.label,\r\n                images: [],\r\n                stock: variant.stock || '0',\r\n                sizes: [],\r\n                sizeStocks: {},\r\n              };\r\n              \r\n              if (value.imageUrl) {\r\n                colorData.images.push(value.imageUrl);\r\n                console.log(' [ADMIN] Added attribute value imageUrl to color:', value.imageUrl);\r\n              }\r\n              \r\n              if (variant.price) {\r\n                colorData.price = variant.price;\r\n              }\r\n              if (variant.compareAtPrice) {\r\n                colorData.compareAtPrice = variant.compareAtPrice;\r\n              }\r\n              \r\n              if (sizeAttribute && selectedSizeValueIds.length > 0) {\r\n                selectedSizeValueIds.forEach((sizeValueId) => {\r\n                  const sizeValue = sizeAttribute.values.find(v => v.id === sizeValueId);\r\n                  if (sizeValue) {\r\n                    colorData.sizes.push(sizeValue.value);\r\n                    colorData.sizeStocks[sizeValue.value] = variant.stock || '0';\r\n                    if (!colorData.sizePrices) colorData.sizePrices = {};\r\n                    colorData.sizePrices[sizeValue.value] = variant.price || '0';\r\n                  }\r\n                });\r\n              }\r\n              \r\n              colors.push(colorData);\r\n            }\r\n          });\r\n        } else if (sizeAttribute && selectedSizeValueIds.length > 0) {\r\n          const colorData: ColorData = {\r\n            colorValue: '',\r\n            colorLabel: '',\r\n            images: [],\r\n            stock: variant.stock || '0',\r\n            sizes: [],\r\n            sizeStocks: {},\r\n          };\r\n          \r\n          selectedSizeValueIds.forEach((sizeValueId) => {\r\n            const sizeValue = sizeAttribute.values.find(v => v.id === sizeValueId);\r\n            if (sizeValue) {\r\n              colorData.sizes.push(sizeValue.value);\r\n              colorData.sizeStocks[sizeValue.value] = variant.stock || '0';\r\n              if (!colorData.sizePrices) colorData.sizePrices = {};\r\n              colorData.sizePrices[sizeValue.value] = variant.price || '0';\r\n              \r\n              if (sizeValue.imageUrl) {\r\n                colorData.images.push(sizeValue.imageUrl);\r\n                console.log(' [ADMIN] Added size attribute value imageUrl:', sizeValue.imageUrl);\r\n              }\r\n            }\r\n          });\r\n          \r\n          if (variant.image) {\r\n            colorData.images.push(variant.image);\r\n          }\r\n          \r\n          colors.push(colorData);\r\n        } else {\r\n          const otherAttributeIds = Array.from(selectedAttributesForVariants).filter(\r\n            attrId => attrId !== colorAttribute?.id && attrId !== sizeAttribute?.id\r\n          );\r\n          \r\n          if (otherAttributeIds.length > 0) {\r\n            const colorData: ColorData = {\r\n              colorValue: '',\r\n              colorLabel: '',\r\n              images: [],\r\n              stock: variant.stock || '0',\r\n              sizes: [],\r\n              sizeStocks: {},\r\n            };\r\n            \r\n            otherAttributeIds.forEach((attributeId) => {\r\n              const attribute = attributes.find(a => a.id === attributeId);\r\n              if (!attribute) return;\r\n              \r\n              const selectedValueIds = variant.selectedValueIds.filter(id => \r\n                attribute.values.some(v => v.id === id)\r\n              );\r\n              \r\n              selectedValueIds.forEach((valueId) => {\r\n                const value = attribute.values.find(v => v.id === valueId);\r\n                if (value && value.imageUrl) {\r\n                  colorData.images.push(value.imageUrl);\r\n                  console.log(' [ADMIN] Added attribute value imageUrl from', attribute.key, ':', value.imageUrl);\r\n                }\r\n              });\r\n            });\r\n            \r\n            if (variant.image) {\r\n              colorData.images.push(variant.image);\r\n            }\r\n            \r\n            if (colorData.images.length > 0 || variant.stock) {\r\n              colors.push(colorData);\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (variant.image && colors.length > 0) {\r\n          const firstColor = colors[0];\r\n          if (!firstColor.images.includes(variant.image)) {\r\n            firstColor.images.push(variant.image);\r\n          }\r\n        }\r\n        \r\n        let variantSku = variant.sku ? variant.sku.trim() : '';\r\n        if (!variantSku || variantSku === '') {\r\n          const baseSlug = formDataSlug || 'PROD';\r\n          variantSku = `${baseSlug.toUpperCase()}-${Date.now()}-${variantIndex + 1}`;\r\n        }\r\n        \r\n        let finalSku = variantSku;\r\n        let skuCounter = 1;\r\n        while (skuSetForConversion.has(finalSku)) {\r\n          finalSku = `${variantSku}-${skuCounter}`;\r\n          skuCounter++;\r\n        }\r\n        skuSetForConversion.add(finalSku);\r\n        \r\n        allNewVariants.push({\r\n          id: variant.id || `variant-${Date.now()}-${variantIndex}-${Math.random()}`,\r\n          price: variant.price || '0',\r\n          compareAtPrice: variant.compareAtPrice || '',\r\n          sku: finalSku,\r\n          colors: colors.length > 0 ? colors : [],\r\n        });\r\n      });\r\n      \r\n      setFormData((prev) => ({ ...prev, variants: allNewVariants }));\r\n      console.log(' [ADMIN] Converted variants:', allNewVariants.length, 'with unique SKUs');\r\n    }\r\n  };\r\n\r\n  return { convertGeneratedVariantsToFormData };\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5682, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useVariantValidation.ts"],"sourcesContent":["import type { Variant } from '../types';\r\n\r\ninterface UseVariantValidationProps {\r\n  productType: 'simple' | 'variable';\r\n  variants: Variant[];\r\n  simpleProductData: {\r\n    price: string;\r\n    sku: string;\r\n    quantity: string;\r\n  };\r\n  isClothingCategory: () => boolean;\r\n  setLoading: (loading: boolean) => void;\r\n}\r\n\r\nexport function useVariantValidation({\r\n  productType,\r\n  variants,\r\n  simpleProductData,\r\n  isClothingCategory,\r\n  setLoading,\r\n}: UseVariantValidationProps) {\r\n  const validateVariants = (): boolean => {\r\n    // Skip variant validation for Simple products - they create variants later in the process\r\n    if (productType === 'variable' && variants.length === 0) {\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n\r\n    // Validate all variants (skip for simple products - validation is done in variant creation)\r\n    if (productType === 'variable') {\r\n      const skuSet = new Set<string>();\r\n      for (const variant of variants) {\r\n        const variantSku = variant.sku ? variant.sku.trim() : '';\r\n        if (!variantSku || variantSku === '') {\r\n          setLoading(false);\r\n          return false;\r\n        }\r\n        \r\n        if (skuSet.has(variantSku)) {\r\n          setLoading(false);\r\n          return false;\r\n        }\r\n        skuSet.add(variantSku);\r\n        \r\n        const categoryRequiresSizes = isClothingCategory();\r\n        const colorData = variant.colors && variant.colors.length > 0 ? variant.colors : [];\r\n        \r\n        if (colorData.length > 0) {\r\n          for (const colorDataItem of colorData) {\r\n            const colorSizes = colorDataItem.sizes || [];\r\n            const colorSizeStocks = colorDataItem.sizeStocks || {};\r\n            \r\n            const hasColor = colorDataItem.colorValue && colorDataItem.colorValue.trim() !== '';\r\n            \r\n            if (hasColor) {\r\n              const colorPriceValue = parseFloat(colorDataItem.price || '0');\r\n              if (!colorDataItem.price || isNaN(colorPriceValue) || colorPriceValue <= 0) {\r\n                setLoading(false);\r\n                return false;\r\n              }\r\n            } else {\r\n              if (colorData.indexOf(colorDataItem) === 0) {\r\n                const variantPriceValue = parseFloat(variant.price || '0');\r\n                if (!variant.price || isNaN(variantPriceValue) || variantPriceValue <= 0) {\r\n                  setLoading(false);\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (colorSizes.length > 0) {\r\n              for (const size of colorSizes) {\r\n                const stock = colorSizeStocks[size];\r\n                if (!stock || stock.trim() === '' || parseInt(stock) < 0) {\r\n                  setLoading(false);\r\n                  return false;\r\n                }\r\n              }\r\n            } else {\r\n              if (!colorDataItem.stock || colorDataItem.stock.trim() === '' || parseInt(colorDataItem.stock) < 0) {\r\n                setLoading(false);\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Validate simple product fields\r\n    if (productType === 'simple') {\r\n      if (!simpleProductData.price || simpleProductData.price.trim() === '') {\r\n        setLoading(false);\r\n        return false;\r\n      }\r\n      if (!simpleProductData.sku || simpleProductData.sku.trim() === '') {\r\n        setLoading(false);\r\n        return false;\r\n      }\r\n      if (!simpleProductData.quantity || simpleProductData.quantity.trim() === '') {\r\n        setLoading(false);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  return { validateVariants };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAcO,SAAS,qBAAqB,EACnC,WAAW,EACX,QAAQ,EACR,iBAAiB,EACjB,kBAAkB,EAClB,UAAU,EACgB;IAC1B,MAAM,mBAAmB;QACvB,0FAA0F;QAC1F,IAAI,gBAAgB,cAAc,SAAS,MAAM,KAAK,GAAG;YACvD,WAAW;YACX,OAAO;QACT;QAEA,4FAA4F;QAC5F,IAAI,gBAAgB,YAAY;YAC9B,MAAM,SAAS,IAAI;YACnB,KAAK,MAAM,WAAW,SAAU;gBAC9B,MAAM,aAAa,QAAQ,GAAG,GAAG,QAAQ,GAAG,CAAC,IAAI,KAAK;gBACtD,IAAI,CAAC,cAAc,eAAe,IAAI;oBACpC,WAAW;oBACX,OAAO;gBACT;gBAEA,IAAI,OAAO,GAAG,CAAC,aAAa;oBAC1B,WAAW;oBACX,OAAO;gBACT;gBACA,OAAO,GAAG,CAAC;gBAEX,MAAM,wBAAwB;gBAC9B,MAAM,YAAY,QAAQ,MAAM,IAAI,QAAQ,MAAM,CAAC,MAAM,GAAG,IAAI,QAAQ,MAAM,GAAG,EAAE;gBAEnF,IAAI,UAAU,MAAM,GAAG,GAAG;oBACxB,KAAK,MAAM,iBAAiB,UAAW;wBACrC,MAAM,aAAa,cAAc,KAAK,IAAI,EAAE;wBAC5C,MAAM,kBAAkB,cAAc,UAAU,IAAI,CAAC;wBAErD,MAAM,WAAW,cAAc,UAAU,IAAI,cAAc,UAAU,CAAC,IAAI,OAAO;wBAEjF,IAAI,UAAU;4BACZ,MAAM,kBAAkB,WAAW,cAAc,KAAK,IAAI;4BAC1D,IAAI,CAAC,cAAc,KAAK,IAAI,MAAM,oBAAoB,mBAAmB,GAAG;gCAC1E,WAAW;gCACX,OAAO;4BACT;wBACF,OAAO;4BACL,IAAI,UAAU,OAAO,CAAC,mBAAmB,GAAG;gCAC1C,MAAM,oBAAoB,WAAW,QAAQ,KAAK,IAAI;gCACtD,IAAI,CAAC,QAAQ,KAAK,IAAI,MAAM,sBAAsB,qBAAqB,GAAG;oCACxE,WAAW;oCACX,OAAO;gCACT;4BACF;wBACF;wBAEA,IAAI,WAAW,MAAM,GAAG,GAAG;4BACzB,KAAK,MAAM,QAAQ,WAAY;gCAC7B,MAAM,QAAQ,eAAe,CAAC,KAAK;gCACnC,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,MAAM,SAAS,SAAS,GAAG;oCACxD,WAAW;oCACX,OAAO;gCACT;4BACF;wBACF,OAAO;4BACL,IAAI,CAAC,cAAc,KAAK,IAAI,cAAc,KAAK,CAAC,IAAI,OAAO,MAAM,SAAS,cAAc,KAAK,IAAI,GAAG;gCAClG,WAAW;gCACX,OAAO;4BACT;wBACF;oBACF;gBACF;YACF;QACF;QAEA,iCAAiC;QACjC,IAAI,gBAAgB,UAAU;YAC5B,IAAI,CAAC,kBAAkB,KAAK,IAAI,kBAAkB,KAAK,CAAC,IAAI,OAAO,IAAI;gBACrE,WAAW;gBACX,OAAO;YACT;YACA,IAAI,CAAC,kBAAkB,GAAG,IAAI,kBAAkB,GAAG,CAAC,IAAI,OAAO,IAAI;gBACjE,WAAW;gBACX,OAAO;YACT;YACA,IAAI,CAAC,kBAAkB,QAAQ,IAAI,kBAAkB,QAAQ,CAAC,IAAI,OAAO,IAAI;gBAC3E,WAAW;gBACX,OAAO;YACT;QACF;QAEA,OAAO;IACT;IAEA,OAAO;QAAE;IAAiB;AAC5B"}},
    {"offset": {"line": 5775, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useImageProcessingForSubmit.ts"],"sourcesContent":["interface ProcessImagesForSubmitProps {\r\n  imageUrls: string[];\r\n  featuredImageIndex: number;\r\n  mainProductImage: string;\r\n  variants: any[];\r\n}\r\n\r\nexport function processImagesForSubmit({\r\n  imageUrls,\r\n  featuredImageIndex,\r\n  mainProductImage,\r\n  variants,\r\n}: ProcessImagesForSubmitProps): {\r\n  finalMedia: string[];\r\n  mainImage: string | null;\r\n  processedVariants: any[];\r\n} {\r\n  const isBase64Image = (url: string): boolean => {\r\n    return url.startsWith('data:image/');\r\n  };\r\n\r\n  const isUrl = (url: string): boolean => {\r\n    return url.startsWith('http://') || url.startsWith('https://');\r\n  };\r\n\r\n  const getBase64Size = (base64: string): number => {\r\n    const base64Data = base64.includes(',') ? base64.split(',')[1] : base64;\r\n    return Math.ceil(base64Data.length * 0.75);\r\n  };\r\n\r\n  const processImages = (images: string[]): { processed: string[]; skipped: number } => {\r\n    const MAX_BASE64_SIZE = 5 * 1024 * 1024; // 5MB per image max\r\n    let skippedCount = 0;\r\n    \r\n    const processed = images.filter(img => {\r\n      if (isUrl(img)) {\r\n        return true;\r\n      }\r\n      \r\n      if (isBase64Image(img)) {\r\n        const size = getBase64Size(img);\r\n        if (size > MAX_BASE64_SIZE) {\r\n          console.warn(` [ADMIN] Image too large (${Math.round(size / 1024)}KB), skipping to avoid 413 error.`);\r\n          skippedCount++;\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n    \r\n    return { processed, skipped: skippedCount };\r\n  };\r\n\r\n  const processMainImagesWithPositions = (images: string[]): { mapping: (string | null)[]; skipped: number } => {\r\n    const MAX_BASE64_SIZE = 5 * 1024 * 1024;\r\n    const mapping: (string | null)[] = [];\r\n    let skippedCount = 0;\r\n    \r\n    images.forEach((img) => {\r\n      if (isUrl(img)) {\r\n        mapping.push(img);\r\n        return;\r\n      }\r\n      \r\n      if (isBase64Image(img)) {\r\n        const size = getBase64Size(img);\r\n        if (size > MAX_BASE64_SIZE) {\r\n          console.warn(` [ADMIN] Main image too large (${Math.round(size / 1024)}KB), skipping to avoid 413 error.`);\r\n          skippedCount++;\r\n          mapping.push(null);\r\n          return;\r\n        }\r\n        mapping.push(img);\r\n        return;\r\n      }\r\n      \r\n      mapping.push(img);\r\n    });\r\n    \r\n    return { mapping, skipped: skippedCount };\r\n  };\r\n\r\n  const mainImages: string[] = [];\r\n  if (imageUrls.length > 0) {\r\n    mainImages.push(...imageUrls.filter(Boolean));\r\n  } else if (mainProductImage) {\r\n    mainImages.push(mainProductImage);\r\n  }\r\n\r\n  const mainImagesProcessed = mainImages.length > 0 ? processMainImagesWithPositions(mainImages) : { mapping: [], skipped: 0 };\r\n  const mainImageMapping = mainImagesProcessed.mapping;\r\n\r\n  const variantImages: string[] = [];\r\n  variants.forEach(variant => {\r\n    if (variant.imageUrl) {\r\n      const imageUrls = variant.imageUrl.split(',').map((url: string) => url.trim()).filter(Boolean);\r\n      variantImages.push(...imageUrls);\r\n    }\r\n  });\r\n\r\n  const variantImagesProcessed = variantImages.length > 0 ? processImages(variantImages) : { processed: [], skipped: 0 };\r\n  const processedVariantImages = variantImagesProcessed.processed;\r\n  const skippedImagesCount = mainImagesProcessed.skipped + variantImagesProcessed.skipped;\r\n  \r\n  if (skippedImagesCount > 0) {\r\n    console.warn(` [ADMIN] ${skippedImagesCount} large image(s) were skipped to avoid 413 error.`);\r\n  }\r\n\r\n  const processedVariants = [...variants];\r\n  let variantImageIndex = 0;\r\n  processedVariants.forEach(variant => {\r\n    if (variant.imageUrl) {\r\n      const imageUrls = variant.imageUrl.split(',').map((url: string) => url.trim()).filter(Boolean);\r\n      const processedUrls = processedVariantImages.slice(variantImageIndex, variantImageIndex + imageUrls.length);\r\n      variant.imageUrl = processedUrls.join(',');\r\n      variantImageIndex += imageUrls.length;\r\n    }\r\n  });\r\n\r\n  const finalMedia: string[] = [];\r\n  \r\n  if (imageUrls.length > 0) {\r\n    const processedImageUrls: string[] = [];\r\n    \r\n    imageUrls.forEach((originalUrl, index) => {\r\n      if (!originalUrl || !originalUrl.trim()) {\r\n        return;\r\n      }\r\n      \r\n      const mainImagesIndex = mainImages.indexOf(originalUrl);\r\n      if (mainImagesIndex >= 0 && mainImagesIndex < mainImageMapping.length) {\r\n        const processedImg = mainImageMapping[mainImagesIndex];\r\n        if (processedImg) {\r\n          processedImageUrls[index] = processedImg;\r\n        }\r\n      }\r\n    });\r\n    \r\n    if (processedImageUrls[featuredImageIndex]) {\r\n      finalMedia.push(processedImageUrls[featuredImageIndex]);\r\n    }\r\n    processedImageUrls.forEach((url, index) => {\r\n      if (index !== featuredImageIndex && url) {\r\n        finalMedia.push(url);\r\n      }\r\n    });\r\n  } else if (mainProductImage) {\r\n    const mainImgProcessed = mainImageMapping[0];\r\n    if (mainImgProcessed) {\r\n      finalMedia.push(mainImgProcessed);\r\n    }\r\n  }\r\n  \r\n  const mainImage = imageUrls.length > 0 && mainImageMapping.length > featuredImageIndex\r\n    ? mainImageMapping[featuredImageIndex]\r\n    : (mainImageMapping.length > 0 ? mainImageMapping[0] : mainProductImage);\r\n\r\n  return { finalMedia, mainImage, processedVariants };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5922, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useProductPayloadCreation.ts"],"sourcesContent":["import { apiClient } from '@/lib/api-client';\r\nimport type { AppRouterInstance } from 'next/dist/shared/lib/app-router-context.shared-runtime';\r\nimport type { Attribute } from '../types';\r\n\r\ninterface CreateAndSubmitPayloadProps {\r\n  formData: {\r\n    title: string;\r\n    slug: string;\r\n    descriptionHtml: string;\r\n    categoryIds: string[];\r\n    published: boolean;\r\n    featured: boolean;\r\n    imageUrls: string[];\r\n    featuredImageIndex: number;\r\n    mainProductImage: string;\r\n    labels: any[];\r\n  };\r\n  finalBrandIds: string[];\r\n  finalPrimaryCategoryId: string;\r\n  variants: any[];\r\n  attributeIds: string[];\r\n  finalMedia: string[];\r\n  mainImage: string | null;\r\n  isEditMode: boolean;\r\n  productId: string | null;\r\n  creationMessages: string[];\r\n  setLoading: (loading: boolean) => void;\r\n  router: AppRouterInstance;\r\n}\r\n\r\nexport async function createAndSubmitPayload({\r\n  formData,\r\n  finalBrandIds,\r\n  finalPrimaryCategoryId,\r\n  variants,\r\n  attributeIds,\r\n  finalMedia,\r\n  mainImage,\r\n  isEditMode,\r\n  productId,\r\n  creationMessages,\r\n  setLoading,\r\n  router,\r\n}: CreateAndSubmitPayloadProps): Promise<void> {\r\n  const payload: any = {\r\n      title: formData.title,\r\n      slug: formData.slug,\r\n      descriptionHtml: formData.descriptionHtml || undefined,\r\n      brandId: finalBrandIds.length > 0 ? finalBrandIds[0] : undefined,\r\n      primaryCategoryId: finalPrimaryCategoryId || undefined,\r\n      categoryIds: formData.categoryIds.length > 0 ? formData.categoryIds : undefined,\r\n      published: isEditMode ? formData.published : true,\r\n      featured: formData.featured,\r\n      locale: 'en',\r\n      variants: variants,\r\n      attributeIds: attributeIds.length > 0 ? attributeIds : undefined,\r\n    };\r\n    \r\n    if (finalMedia.length > 0) {\r\n      payload.media = finalMedia;\r\n    }\r\n    \r\n    if (mainImage) {\r\n      payload.mainProductImage = mainImage;\r\n    }\r\n\r\n    payload.labels = (formData.labels || [])\r\n      .filter((label) => label.value && label.value.trim() !== '')\r\n      .map((label) => ({\r\n        type: label.type,\r\n        value: label.value.trim(),\r\n        position: label.position,\r\n        color: label.color || null,\r\n      }));\r\n\r\n    console.log(' [ADMIN] Sending payload:', JSON.stringify(payload, null, 2));\r\n    \r\n    try {\r\n      if (isEditMode && productId) {\r\n        const product = await apiClient.put(`/api/v1/admin/products/${productId}`, payload);\r\n        console.log(' [ADMIN] Product updated:', product);\r\n        const baseMessage = '  !';\r\n        const extra = creationMessages.length ? `\\n\\n${creationMessages.join('\\n')}` : '';\r\n        alert(`${baseMessage}${extra}`);\r\n      } else {\r\n        const product = await apiClient.post('/api/v1/admin/products', payload);\r\n        console.log(' [ADMIN] Product created:', product);\r\n        const baseMessage = '  !';\r\n        const extra = creationMessages.length ? `\\n\\n${creationMessages.join('\\n')}` : '';\r\n        alert(`${baseMessage}${extra}`);\r\n      }\r\n      \r\n      router.push('/admin/products');\r\n    } catch (err: any) {\r\n      console.error(' [ADMIN] Error saving product:', err);\r\n      \r\n      let errorMessage = isEditMode ? '  ' : '  ';\r\n      \r\n      if (err?.data?.detail) {\r\n        errorMessage = err.data.detail;\r\n      } else if (err?.response?.data?.detail) {\r\n        errorMessage = err.response.data.detail;\r\n      } else if (err?.message) {\r\n        if (err.message.includes('<!DOCTYPE') || err.message.includes('<html')) {\r\n          const mongoErrorMatch = err.message.match(/MongoServerError[^<]+/);\r\n          if (mongoErrorMatch) {\r\n            errorMessage = `  : ${mongoErrorMatch[0]}`;\r\n          } else {\r\n            errorMessage = '  : SKU-      :';\r\n          }\r\n        } else {\r\n          errorMessage = err.message;\r\n        }\r\n      }\r\n      \r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AA8BO,eAAe,uBAAuB,EAC3C,QAAQ,EACR,aAAa,EACb,sBAAsB,EACtB,QAAQ,EACR,YAAY,EACZ,UAAU,EACV,SAAS,EACT,UAAU,EACV,SAAS,EACT,gBAAgB,EAChB,UAAU,EACV,MAAM,EACsB;IAC5B,MAAM,UAAe;QACjB,OAAO,SAAS,KAAK;QACrB,MAAM,SAAS,IAAI;QACnB,iBAAiB,SAAS,eAAe,IAAI;QAC7C,SAAS,cAAc,MAAM,GAAG,IAAI,aAAa,CAAC,EAAE,GAAG;QACvD,mBAAmB,0BAA0B;QAC7C,aAAa,SAAS,WAAW,CAAC,MAAM,GAAG,IAAI,SAAS,WAAW,GAAG;QACtE,WAAW,aAAa,SAAS,SAAS,GAAG;QAC7C,UAAU,SAAS,QAAQ;QAC3B,QAAQ;QACR,UAAU;QACV,cAAc,aAAa,MAAM,GAAG,IAAI,eAAe;IACzD;IAEA,IAAI,WAAW,MAAM,GAAG,GAAG;QACzB,QAAQ,KAAK,GAAG;IAClB;IAEA,IAAI,WAAW;QACb,QAAQ,gBAAgB,GAAG;IAC7B;IAEA,QAAQ,MAAM,GAAG,CAAC,SAAS,MAAM,IAAI,EAAE,EACpC,MAAM,CAAC,CAAC,QAAU,MAAM,KAAK,IAAI,MAAM,KAAK,CAAC,IAAI,OAAO,IACxD,GAAG,CAAC,CAAC,QAAU,CAAC;YACf,MAAM,MAAM,IAAI;YAChB,OAAO,MAAM,KAAK,CAAC,IAAI;YACvB,UAAU,MAAM,QAAQ;YACxB,OAAO,MAAM,KAAK,IAAI;QACxB,CAAC;IAEH,QAAQ,GAAG,CAAC,+BAA+B,KAAK,SAAS,CAAC,SAAS,MAAM;IAEzE,IAAI;QACF,IAAI,cAAc,WAAW;YAC3B,MAAM,UAAU,MAAM,mJAAS,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,WAAW,EAAE;YAC3E,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,MAAM,cAAc;YACpB,MAAM,QAAQ,iBAAiB,MAAM,GAAG,CAAC,IAAI,EAAE,iBAAiB,IAAI,CAAC,OAAO,GAAG;YAC/E,MAAM,GAAG,cAAc,OAAO;QAChC,OAAO;YACL,MAAM,UAAU,MAAM,mJAAS,CAAC,IAAI,CAAC,0BAA0B;YAC/D,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,MAAM,cAAc;YACpB,MAAM,QAAQ,iBAAiB,MAAM,GAAG,CAAC,IAAI,EAAE,iBAAiB,IAAI,CAAC,OAAO,GAAG;YAC/E,MAAM,GAAG,cAAc,OAAO;QAChC;QAEA,OAAO,IAAI,CAAC;IACd,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,mCAAmC;QAEjD,IAAI,eAAe,aAAa,gCAAgC;QAEhE,IAAI,KAAK,MAAM,QAAQ;YACrB,eAAe,IAAI,IAAI,CAAC,MAAM;QAChC,OAAO,IAAI,KAAK,UAAU,MAAM,QAAQ;YACtC,eAAe,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM;QACzC,OAAO,IAAI,KAAK,SAAS;YACvB,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,gBAAgB,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU;gBACtE,MAAM,kBAAkB,IAAI,OAAO,CAAC,KAAK,CAAC;gBAC1C,IAAI,iBAAiB;oBACnB,eAAe,CAAC,uBAAuB,EAAE,eAAe,CAAC,EAAE,EAAE;gBAC/D,OAAO;oBACL,eAAe;gBACjB;YACF,OAAO;gBACL,eAAe,IAAI,OAAO;YAC5B;QACF;QAEA,MAAM;IACR,SAAU;QACR,WAAW;IACb;AACJ"}},
    {"offset": {"line": 6001, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/hooks/useProductFormHandlers.ts"],"sourcesContent":["import type { FormEvent } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { convertPrice, type CurrencyCode } from '@/lib/currency';\r\nimport type { Attribute, Variant, GeneratedVariant } from '../types';\r\nimport { useBrandAndCategoryCreation } from './useBrandAndCategoryCreation';\r\nimport { useVariantConversionToFormData } from './useVariantConversionToFormData';\r\nimport { useVariantValidation } from './useVariantValidation';\r\nimport { processImagesForSubmit } from './useImageProcessingForSubmit';\r\nimport { createAndSubmitPayload } from './useProductPayloadCreation';\r\n\r\ninterface UseProductFormHandlersProps {\r\n  formData: {\r\n    title: string;\r\n    slug: string;\r\n    descriptionHtml: string;\r\n    brandIds: string[];\r\n    primaryCategoryId: string;\r\n    categoryIds: string[];\r\n    published: boolean;\r\n    featured: boolean;\r\n    imageUrls: string[];\r\n    featuredImageIndex: number;\r\n    mainProductImage: string;\r\n    variants: Variant[];\r\n    labels: any[];\r\n  };\r\n  setFormData: (updater: (prev: any) => any) => void;\r\n  setLoading: (loading: boolean) => void;\r\n  setBrands: (updater: (prev: any[]) => any[]) => void;\r\n  setCategories: (updater: (prev: any[]) => any[]) => void;\r\n  productType: 'simple' | 'variable';\r\n  simpleProductData: {\r\n    price: string;\r\n    compareAtPrice: string;\r\n    sku: string;\r\n    quantity: string;\r\n  };\r\n  selectedAttributesForVariants: Set<string>;\r\n  generatedVariants: GeneratedVariant[];\r\n  attributes: Attribute[];\r\n  defaultCurrency: CurrencyCode;\r\n  useNewBrand: boolean;\r\n  newBrandName: string;\r\n  useNewCategory: boolean;\r\n  newCategoryName: string;\r\n  isEditMode: boolean;\r\n  productId: string | null;\r\n  getColorAttribute: () => Attribute | undefined;\r\n  getSizeAttribute: () => Attribute | undefined;\r\n  isClothingCategory: () => boolean;\r\n}\r\n\r\nexport function useProductFormHandlers({\r\n  formData,\r\n  setFormData,\r\n  setLoading,\r\n  setBrands,\r\n  setCategories,\r\n  productType,\r\n  simpleProductData,\r\n  selectedAttributesForVariants,\r\n  generatedVariants,\r\n  attributes,\r\n  defaultCurrency,\r\n  useNewBrand,\r\n  newBrandName,\r\n  useNewCategory,\r\n  newCategoryName,\r\n  isEditMode,\r\n  productId,\r\n  getColorAttribute,\r\n  getSizeAttribute,\r\n  isClothingCategory,\r\n}: UseProductFormHandlersProps) {\r\n  const router = useRouter();\r\n  \r\n  const { createBrandAndCategory } = useBrandAndCategoryCreation({\r\n    formData,\r\n    useNewBrand,\r\n    newBrandName,\r\n    useNewCategory,\r\n    newCategoryName,\r\n    setBrands,\r\n    setCategories,\r\n    setLoading,\r\n  });\r\n\r\n  const { convertGeneratedVariantsToFormData } = useVariantConversionToFormData({\r\n    productType,\r\n    selectedAttributesForVariants,\r\n    generatedVariants,\r\n    attributes,\r\n    formDataSlug: formData.slug,\r\n    setFormData,\r\n  });\r\n\r\n  const { validateVariants } = useVariantValidation({\r\n    productType,\r\n    variants: formData.variants,\r\n    simpleProductData,\r\n    isClothingCategory,\r\n    setLoading,\r\n  });\r\n\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log(' [ADMIN] Submitting product form:', formData);\r\n\r\n      // Create brand and category if needed\r\n      const brandCategoryResult = await createBrandAndCategory();\r\n      if (brandCategoryResult.error) {\r\n        return;\r\n      }\r\n      const { finalBrandIds, finalPrimaryCategoryId, creationMessages } = brandCategoryResult;\r\n\r\n      // Convert generated variants to formData format\r\n      convertGeneratedVariantsToFormData();\r\n\r\n      // Get current formData after potential update\r\n      const currentFormData = formData.variants.length > 0 ? formData : { ...formData, variants: [] };\r\n\r\n      // Validate variants\r\n      if (productType === 'variable' && currentFormData.variants.length === 0) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      if (!validateVariants()) {\r\n        return;\r\n      }\r\n\r\n      // Process variants for API\r\n      const variants: any[] = [];\r\n      const variantSkuSet = new Set<string>();\r\n\r\n      if (productType === 'simple') {\r\n        console.log(' [ADMIN] Processing Simple Product');\r\n        const priceUSD = convertPrice(parseFloat(simpleProductData.price), defaultCurrency, 'USD');\r\n        const compareAtPriceUSD = simpleProductData.compareAtPrice && simpleProductData.compareAtPrice.trim() !== ''\r\n          ? convertPrice(parseFloat(simpleProductData.compareAtPrice), defaultCurrency, 'USD')\r\n          : undefined;\r\n        const simpleVariant: any = {\r\n          price: priceUSD,\r\n          stock: parseInt(simpleProductData.quantity) || 0,\r\n          sku: simpleProductData.sku.trim(),\r\n          published: true,\r\n        };\r\n        if (compareAtPriceUSD) {\r\n          simpleVariant.compareAtPrice = compareAtPriceUSD;\r\n        }\r\n        variants.push(simpleVariant);\r\n        variantSkuSet.add(simpleProductData.sku.trim());\r\n        console.log(' [ADMIN] Simple product variant created:', simpleVariant);\r\n      } else {\r\n        // Variable products variant processing (simplified - full logic remains in original)\r\n        const useGeneratedVariants = generatedVariants.length > 0 && selectedAttributesForVariants.size > 0;\r\n        \r\n        if (useGeneratedVariants) {\r\n          console.log(' [ADMIN] Using generatedVariants format:', generatedVariants.length, 'variants');\r\n          const sizeAttribute = getSizeAttribute();\r\n          \r\n          generatedVariants.forEach((genVariant, variantIndex) => {\r\n            const variantPriceUSD = convertPrice(parseFloat(genVariant.price || '0'), defaultCurrency, 'USD');\r\n            const variantCompareAtPriceUSD = genVariant.compareAtPrice \r\n              ? convertPrice(parseFloat(genVariant.compareAtPrice), defaultCurrency, 'USD')\r\n              : undefined;\r\n            \r\n            const attributeValueMap: Record<string, Array<{ valueId: string; value: string }>> = {};\r\n            \r\n            genVariant.selectedValueIds.forEach((valueId) => {\r\n              const attribute = attributes.find(a => a.values.some(v => v.id === valueId));\r\n              if (attribute) {\r\n                const value = attribute.values.find(v => v.id === valueId);\r\n                if (value) {\r\n                  if (!attributeValueMap[attribute.key]) {\r\n                    attributeValueMap[attribute.key] = [];\r\n                  }\r\n                  attributeValueMap[attribute.key].push({ valueId: value.id, value: value.value });\r\n                }\r\n              }\r\n            });\r\n            \r\n            const attributeKeys = Object.keys(attributeValueMap);\r\n            if (attributeKeys.length === 0) {\r\n              const finalSku = genVariant.sku || `${currentFormData.slug || 'PROD'}-${Date.now()}-${variantIndex + 1}`;\r\n              let uniqueSku = finalSku;\r\n              let skuCounter = 1;\r\n              while (variantSkuSet.has(uniqueSku)) {\r\n                uniqueSku = `${finalSku}-${skuCounter}`;\r\n                skuCounter++;\r\n              }\r\n              variantSkuSet.add(uniqueSku);\r\n              variants.push({\r\n                price: variantPriceUSD,\r\n                compareAtPrice: variantCompareAtPriceUSD,\r\n                stock: parseInt(genVariant.stock || '0') || 0,\r\n                sku: uniqueSku,\r\n                imageUrl: genVariant.image || undefined,\r\n                published: true,\r\n              });\r\n            } else {\r\n              const attributeValueGroups = attributeKeys.map(key => \r\n                attributeValueMap[key].map(v => v.valueId)\r\n              );\r\n              \r\n              const generateCombinations = (groups: string[][]): string[][] => {\r\n                if (groups.length === 0) return [[]];\r\n                if (groups.length === 1) return groups[0].map(v => [v]);\r\n                const [firstGroup, ...restGroups] = groups;\r\n                const restCombinations = generateCombinations(restGroups);\r\n                const result: string[][] = [];\r\n                for (const value of firstGroup) {\r\n                  for (const combination of restCombinations) {\r\n                    result.push([value, ...combination]);\r\n                  }\r\n                }\r\n                return result;\r\n              };\r\n              \r\n              const combinations = generateCombinations(attributeValueGroups);\r\n              \r\n              combinations.forEach((combination, comboIndex) => {\r\n                const variantOptions: Array<{ attributeKey: string; value: string; valueId?: string }> = [];\r\n                combination.forEach((valueId) => {\r\n                  const attribute = attributes.find(a => a.values.some(v => v.id === valueId));\r\n                  if (attribute) {\r\n                    const value = attribute.values.find(v => v.id === valueId);\r\n                    if (value) {\r\n                      variantOptions.push({ attributeKey: attribute.key, value: value.value, valueId: value.id });\r\n                    }\r\n                  }\r\n                });\r\n                \r\n                const baseSlug = currentFormData.slug || 'PROD';\r\n                const valueParts = variantOptions.map(opt => opt.value.toUpperCase().replace(/\\s+/g, '-'));\r\n                const skuSuffix = valueParts.length > 0 ? `-${valueParts.join('-')}` : '';\r\n                const finalSku = genVariant.sku \r\n                  ? `${genVariant.sku}${skuSuffix}`\r\n                  : `${baseSlug.toUpperCase()}-${Date.now()}-${variantIndex + 1}-${comboIndex + 1}${skuSuffix}`;\r\n                \r\n                let uniqueSku = finalSku;\r\n                let skuCounter = 1;\r\n                while (variantSkuSet.has(uniqueSku)) {\r\n                  uniqueSku = `${finalSku}-${skuCounter}`;\r\n                  skuCounter++;\r\n                }\r\n                variantSkuSet.add(uniqueSku);\r\n                \r\n                variants.push({\r\n                  price: variantPriceUSD,\r\n                  compareAtPrice: variantCompareAtPriceUSD,\r\n                  stock: parseInt(genVariant.stock || '0') || 0,\r\n                  sku: uniqueSku,\r\n                  imageUrl: genVariant.image || undefined,\r\n                  published: true,\r\n                  options: variantOptions.length > 0 ? variantOptions : undefined,\r\n                });\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          // Legacy formData.variants processing (simplified)\r\n          console.log(' [ADMIN] Using formData.variants format (legacy)');\r\n          currentFormData.variants.forEach((variant, variantIndex) => {\r\n            const variantPriceUSD = convertPrice(parseFloat(variant.price || '0'), defaultCurrency, 'USD');\r\n            const baseVariantData: any = { price: variantPriceUSD, published: true };\r\n            if (variant.compareAtPrice) {\r\n              baseVariantData.compareAtPrice = convertPrice(parseFloat(variant.compareAtPrice), defaultCurrency, 'USD');\r\n            }\r\n            const colorDataArray = variant.colors || [];\r\n            // Simplified variant processing - full logic would be in separate hook\r\n            if (colorDataArray.length > 0) {\r\n              colorDataArray.forEach((colorData, colorIndex) => {\r\n                const colorSizes = colorData.sizes || [];\r\n                const colorSizeStocks = colorData.sizeStocks || {};\r\n                if (colorSizes.length > 0) {\r\n                  colorSizes.forEach((size) => {\r\n                    const stockForVariant = colorSizeStocks[size] || colorData.stock || '0';\r\n                    const skuSuffix = colorDataArray.length > 1 || colorSizes.length > 1 \r\n                      ? `-${colorIndex + 1}-${colorSizes.indexOf(size) + 1}` : '';\r\n                    let finalSku = colorData.sizeLabels?.[size] || variant.sku ? `${variant.sku?.trim()}${skuSuffix}` : undefined;\r\n                    if (!finalSku || finalSku === '') {\r\n                      finalSku = `${currentFormData.slug || 'PROD'}-${Date.now()}-${variantIndex + 1}-${colorIndex + 1}-${colorSizes.indexOf(size) + 1}`;\r\n                    }\r\n                    let uniqueSku = finalSku;\r\n                    let skuCounter = 1;\r\n                    while (variantSkuSet.has(uniqueSku)) {\r\n                      uniqueSku = `${finalSku}-${skuCounter}`;\r\n                      skuCounter++;\r\n                    }\r\n                    variantSkuSet.add(uniqueSku);\r\n                    const variantImageUrl = colorData.images && colorData.images.length > 0 ? colorData.images.join(',') : undefined;\r\n                    const sizePrice = colorData.sizePrices?.[size];\r\n                    const finalPriceRaw = sizePrice && sizePrice.trim() !== ''\r\n                      ? parseFloat(sizePrice)\r\n                      : (colorData.price && colorData.price.trim() !== '' ? parseFloat(colorData.price) : baseVariantData.price);\r\n                    const finalPrice = convertPrice(finalPriceRaw, defaultCurrency, 'USD');\r\n                    const variantOptions: Array<{ attributeKey: string; value: string; valueId?: string }> = [];\r\n                    if (colorData.colorValue && colorData.colorValue.trim() !== '') {\r\n                      const colorAttr = attributes.find(a => a.key === 'color');\r\n                      const colorValue = colorAttr?.values.find(v => v.value === colorData.colorValue);\r\n                      if (colorValue) {\r\n                        variantOptions.push({ attributeKey: 'color', value: colorData.colorValue, valueId: colorValue.id });\r\n                      } else {\r\n                        variantOptions.push({ attributeKey: 'color', value: colorData.colorValue });\r\n                      }\r\n                    }\r\n                    if (size && size.trim() !== '') {\r\n                      const sizeAttr = attributes.find(a => a.key === 'size');\r\n                      const sizeValue = sizeAttr?.values.find(v => v.value === size);\r\n                      if (sizeValue) {\r\n                        variantOptions.push({ attributeKey: 'size', value: size, valueId: sizeValue.id });\r\n                      } else {\r\n                        variantOptions.push({ attributeKey: 'size', value: size });\r\n                      }\r\n                    }\r\n                    variants.push({\r\n                      ...baseVariantData,\r\n                      price: finalPrice,\r\n                      color: colorData.colorValue,\r\n                      size: size,\r\n                      stock: parseInt(stockForVariant) || 0,\r\n                      sku: uniqueSku,\r\n                      imageUrl: variantImageUrl,\r\n                      options: variantOptions.length > 0 ? variantOptions : undefined,\r\n                    });\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      // Final SKU validation\r\n      const finalSkuSet = new Set<string>();\r\n      for (let i = 0; i < variants.length; i++) {\r\n        const variant = variants[i];\r\n        if (!variant.sku || variant.sku.trim() === '') {\r\n          const baseSlug = currentFormData.slug || 'PROD';\r\n          variant.sku = `${baseSlug.toUpperCase()}-${Date.now()}-${i + 1}`;\r\n        } else {\r\n          variant.sku = variant.sku.trim();\r\n        }\r\n        let finalSku = variant.sku;\r\n        let skuCounter = 1;\r\n        while (finalSkuSet.has(finalSku)) {\r\n          const baseSlug = currentFormData.slug || 'PROD';\r\n          finalSku = `${baseSlug.toUpperCase()}-${Date.now()}-${i + 1}-${skuCounter}-${Math.random().toString(36).substr(2, 4)}`;\r\n          skuCounter++;\r\n        }\r\n        variant.sku = finalSku;\r\n        finalSkuSet.add(finalSku);\r\n      }\r\n\r\n      // Collect attribute IDs\r\n      const attributeIdsSet = new Set<string>();\r\n      const colorAttribute = getColorAttribute();\r\n      const sizeAttribute = getSizeAttribute();\r\n      if (colorAttribute) attributeIdsSet.add(colorAttribute.id);\r\n      if (sizeAttribute) attributeIdsSet.add(sizeAttribute.id);\r\n      const attributeIds = Array.from(attributeIdsSet);\r\n\r\n      // Process images\r\n      const { finalMedia, mainImage, processedVariants } = processImagesForSubmit({\r\n        imageUrls: currentFormData.imageUrls,\r\n        featuredImageIndex: currentFormData.featuredImageIndex,\r\n        mainProductImage: currentFormData.mainProductImage,\r\n        variants: variants,\r\n      });\r\n      const finalVariants = processedVariants.length > 0 ? processedVariants : variants;\r\n\r\n      // Create and submit payload\r\n      await createAndSubmitPayload({\r\n        formData: currentFormData,\r\n        finalBrandIds,\r\n        finalPrimaryCategoryId,\r\n        variants: finalVariants,\r\n        attributeIds,\r\n        finalMedia,\r\n        mainImage,\r\n        isEditMode,\r\n        productId,\r\n        creationMessages,\r\n        setLoading,\r\n        router,\r\n      });\r\n    } catch (err: any) {\r\n      console.error(' [ADMIN] Error saving product:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { handleSubmit };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/admin/products/add/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, Suspense, useRef, useMemo } from 'react';\nimport type { ChangeEvent, FormEvent } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useAuth } from '../../../../lib/auth/AuthContext';\nimport { Card, Button, Input } from '@shop/ui';\nimport { apiClient } from '../../../../lib/api-client';\nimport { getColorHex } from '../../../../lib/colorMap';\nimport { useTranslation } from '../../../../lib/i18n-client';\nimport { convertPrice, CURRENCIES, type CurrencyCode } from '../../../../lib/currency';\nimport {\n  smartSplitUrls,\n  cleanImageUrls,\n  separateMainAndVariantImages,\n  processImageFile,\n} from '../../../../lib/utils/image-utils';\nimport type { Brand, Category, Attribute, ColorData, Variant, ProductLabel, ProductData, GeneratedVariant } from './types';\nimport { BasicInformation } from './components/BasicInformation';\nimport { ProductImages } from './components/ProductImages';\nimport { CategoriesBrands } from './components/CategoriesBrands';\nimport { SimpleProductFields } from './components/SimpleProductFields';\nimport { AttributesSelection } from './components/AttributesSelection';\nimport { VariantBuilder } from './components/VariantBuilder';\nimport { ProductLabels } from './components/ProductLabels';\nimport { ValueSelectionModal } from './components/ValueSelectionModal';\nimport { Publishing } from './components/Publishing';\nimport { FormActions } from './components/FormActions';\nimport { PageHeader } from './components/PageHeader';\nimport { useLabelManagement } from './hooks/useLabelManagement';\nimport { useImageHandling } from './hooks/useImageHandling';\nimport { useVariantGeneration } from './hooks/useVariantGeneration';\nimport { useProductDataLoading } from './hooks/useProductDataLoading';\nimport { useProductEditMode } from './hooks/useProductEditMode';\nimport { useProductVariantConversion } from './hooks/useProductVariantConversion';\nimport { useProductAttributeHandlers } from './hooks/useProductAttributeHandlers';\nimport { useProductFormHandlers } from './hooks/useProductFormHandlers';\nimport { generateSlug, isClothingCategory as checkIsClothingCategory } from './utils/productUtils';\n\nfunction AddProductPageContent() {\n  const { t } = useTranslation();\n  const { isLoggedIn, isAdmin, isLoading } = useAuth();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const productId = searchParams.get('id');\n  const isEditMode = !!productId;\n  const [loading, setLoading] = useState(false);\n  const [loadingProduct, setLoadingProduct] = useState(false);\n  const [brands, setBrands] = useState<Brand[]>([]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [attributes, setAttributes] = useState<Attribute[]>([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    slug: '',\n    descriptionHtml: '',\n    brandIds: [] as string[], // Changed to array for multi-select\n    primaryCategoryId: '',\n    categoryIds: [] as string[],\n    published: false,\n    featured: false,\n    imageUrls: [] as string[],\n    featuredImageIndex: 0,\n    mainProductImage: '' as string, // Main product image (base64)\n    variants: [] as Variant[],\n    labels: [] as ProductLabel[],\n  });\n  const [categoriesExpanded, setCategoriesExpanded] = useState(false);\n  const [brandsExpanded, setBrandsExpanded] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const variantImageInputRefs = useRef<Record<string, HTMLInputElement | null>>({});\n  const attributesDropdownRef = useRef<HTMLDivElement | null>(null);\n  const [attributesDropdownOpen, setAttributesDropdownOpen] = useState(false);\n  const [colorImageTarget, setColorImageTarget] = useState<{ variantId: string; colorValue: string } | null>(null);\n  const [imageUploadLoading, setImageUploadLoading] = useState(false);\n  const [imageUploadError, setImageUploadError] = useState<string | null>(null);\n  const [newBrandName, setNewBrandName] = useState('');\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [useNewBrand, setUseNewBrand] = useState(false);\n  const [useNewCategory, setUseNewCategory] = useState(false);\n  // Attribute handlers state moved to hook\n  // Default currency from settings\n  const [defaultCurrency, setDefaultCurrency] = useState<CurrencyCode>('AMD');\n  \n  // Product Type: 'simple' or 'variable' (default: 'variable')\n  const [productType, setProductType] = useState<'simple' | 'variable'>('variable');\n  // Simple product fields (only used when productType === 'simple')\n  const [simpleProductData, setSimpleProductData] = useState({\n    price: '',\n    compareAtPrice: '',\n    sku: '',\n    quantity: '',\n  });\n  // New Multi-Attribute Variant Builder state\n  const [selectedAttributesForVariants, setSelectedAttributesForVariants] = useState<Set<string>>(new Set()); // Selected attribute IDs\n  const [selectedAttributeValueIds, setSelectedAttributeValueIds] = useState<Record<string, string[]>>({}); // Key: attributeId, Value: array of selected value IDs\n  // State for managing value selection modal\n  const [openValueModal, setOpenValueModal] = useState<{ variantId: string; attributeId: string } | null>(null);\n  const [generatedVariants, setGeneratedVariants] = useState<GeneratedVariant[]>([]);\n  // Track if we're loading variants in edit mode (to show table immediately)\n  const [hasVariantsToLoad, setHasVariantsToLoad] = useState(false);\n\n  // Use data loading hook\n  useProductDataLoading({\n    isLoggedIn,\n    isAdmin,\n    isLoading,\n    setBrands,\n    setCategories,\n    setAttributes,\n    setDefaultCurrency,\n    attributesDropdownOpen,\n    setAttributesDropdownOpen,\n    attributesDropdownRef,\n    categoriesExpanded,\n    setCategoriesExpanded,\n    brandsExpanded,\n    setBrandsExpanded,\n  });\n\n  // Use edit mode hook\n  useProductEditMode({\n    productId,\n    isLoggedIn,\n    isAdmin,\n    attributes,\n    defaultCurrency,\n    setLoadingProduct,\n    setFormData,\n    setUseNewBrand,\n    setUseNewCategory,\n    setNewBrandName,\n    setNewCategoryName,\n    setHasVariantsToLoad,\n    setProductType,\n    setSimpleProductData,\n  });\n\n  // Use variant conversion hook\n  useProductVariantConversion({\n    productId,\n    attributes,\n    defaultCurrency,\n    setSelectedAttributesForVariants,\n    setSelectedAttributeValueIds,\n    setGeneratedVariants,\n    setHasVariantsToLoad,\n  });\n\n  // Variant generation using hook\n  const { applyToAllVariants } = useVariantGeneration({\n    selectedAttributesForVariants,\n    selectedAttributeValueIds,\n    attributes,\n    generatedVariants,\n    formDataSlug: formData.slug,\n    formDataTitle: formData.title,\n    isEditMode,\n    productId,\n    setGeneratedVariants,\n  });\n\n  const handleTitleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const title = e.target.value;\n    setFormData((prev) => ({\n      ...prev,\n      title,\n      slug: prev.slug || generateSlug(title),\n    }));\n  };\n\n  // Check if selected category requires sizes\n  const isClothingCategory = () => checkIsClothingCategory(formData.primaryCategoryId, categories);\n\n  // Image handling using hook\n  const {\n    addImageUrl,\n    removeImageUrl,\n    updateImageUrl,\n    setFeaturedImage,\n    handleUploadImages,\n    handleUploadVariantImage,\n    handleUploadColorImages,\n    addColorImages,\n  } = useImageHandling({\n    imageUrls: formData.imageUrls,\n    featuredImageIndex: formData.featuredImageIndex,\n    variants: formData.variants,\n    generatedVariants,\n    colorImageTarget,\n    setImageUrls: (updater) => setFormData((prev) => ({ ...prev, imageUrls: updater(prev.imageUrls) })),\n    setFeaturedImageIndex: (index) => setFormData((prev) => ({ ...prev, featuredImageIndex: index })),\n    setMainProductImage: (image) => setFormData((prev) => ({ ...prev, mainProductImage: image })),\n    setVariants: (updater) => setFormData((prev) => ({ ...prev, variants: updater(prev.variants) })),\n    setGeneratedVariants,\n    setImageUploadLoading,\n    setImageUploadError,\n    setColorImageTarget,\n    t,\n  });\n\n\n  // Label management using hook\n  const { addLabel, removeLabel, updateLabel } = useLabelManagement(\n    formData.labels,\n    (updater) => setFormData((prev) => ({ ...prev, labels: updater(prev.labels) }))\n  );\n\n  // Memoize color and size attributes to avoid unnecessary recalculations\n  const colorAttribute = useMemo(() => {\n    if (!attributes || attributes.length === 0) {\n      return undefined;\n    }\n    const colorAttr = attributes.find((attr) => attr.key === 'color');\n    if (!colorAttr) {\n      console.log(' [ADMIN] Color attribute not found. Available attributes:', attributes.map(a => ({ key: a.key, name: a.name })));\n    } else {\n      console.log(' [ADMIN] Color attribute found:', { id: colorAttr.id, key: colorAttr.key, valuesCount: colorAttr.values?.length || 0 });\n    }\n    return colorAttr;\n  }, [attributes]);\n\n  const sizeAttribute = useMemo(() => {\n    if (!attributes || attributes.length === 0) {\n      return undefined;\n    }\n    const sizeAttr = attributes.find((attr) => attr.key === 'size');\n    if (!sizeAttr) {\n      console.log(' [ADMIN] Size attribute not found. Available attributes:', attributes.map(a => ({ key: a.key, name: a.name })));\n    } else {\n      console.log(' [ADMIN] Size attribute found:', { id: sizeAttr.id, key: sizeAttr.key, valuesCount: sizeAttr.values?.length || 0 });\n    }\n    return sizeAttr;\n  }, [attributes]);\n\n  // Keep getColorAttribute and getSizeAttribute for backward compatibility\n  const getColorAttribute = () => colorAttribute;\n  const getSizeAttribute = () => sizeAttribute;\n\n  // Use attribute handlers hook\n  const attributeHandlers = useProductAttributeHandlers({\n    attributes,\n    setAttributes,\n    getColorAttribute,\n    getSizeAttribute,\n  });\n\n  // Use form handlers hook\n  const { handleSubmit } = useProductFormHandlers({\n    formData,\n    setFormData,\n    setLoading,\n    setBrands,\n    setCategories,\n    productType,\n    simpleProductData,\n    selectedAttributesForVariants,\n    generatedVariants,\n    attributes,\n    defaultCurrency,\n    useNewBrand,\n    newBrandName,\n    useNewCategory,\n    newCategoryName,\n    isEditMode,\n    productId,\n    getColorAttribute,\n    getSizeAttribute,\n    isClothingCategory,\n  });\n\n  if (isLoading || loadingProduct) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">{loadingProduct ? t('admin.products.add.loadingProduct') : t('admin.products.add.loading')}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isLoggedIn || !isAdmin) {\n    return null;\n  }\n\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Main Content */}\n        <div>\n          <PageHeader isEditMode={isEditMode} />\n\n          <Card className=\"p-6 pb-24 sm:pb-24\">\n          <form onSubmit={handleSubmit} className=\"space-y-14\">\n            {/* Basic Information */}\n            <BasicInformation\n              productType={productType}\n              setProductType={setProductType}\n              title={formData.title}\n              slug={formData.slug}\n              descriptionHtml={formData.descriptionHtml}\n              onTitleChange={handleTitleChange}\n              onSlugChange={(e) => setFormData((prev) => ({ ...prev, slug: e.target.value }))}\n              onDescriptionChange={(e) => setFormData((prev) => ({ ...prev, descriptionHtml: e.target.value }))}\n            />\n\n            {/* Product Images */}\n            <ProductImages\n              imageUrls={formData.imageUrls}\n              featuredImageIndex={formData.featuredImageIndex}\n              imageUploadLoading={imageUploadLoading}\n              imageUploadError={imageUploadError}\n              fileInputRef={fileInputRef}\n              onUploadImages={handleUploadImages}\n              onRemoveImage={removeImageUrl}\n              onSetFeaturedImage={setFeaturedImage}\n            />\n\n            {/* Categories & Brands */}\n            <CategoriesBrands\n              categories={categories}\n              brands={brands}\n              categoryIds={formData.categoryIds}\n              brandIds={formData.brandIds}\n              categoriesExpanded={categoriesExpanded}\n              brandsExpanded={brandsExpanded}\n              useNewCategory={useNewCategory}\n              useNewBrand={useNewBrand}\n              newCategoryName={newCategoryName}\n              newBrandName={newBrandName}\n              onCategoriesExpandedChange={setCategoriesExpanded}\n              onBrandsExpandedChange={setBrandsExpanded}\n              onUseNewCategoryChange={setUseNewCategory}\n              onUseNewBrandChange={setUseNewBrand}\n              onNewCategoryNameChange={setNewCategoryName}\n              onNewBrandNameChange={setNewBrandName}\n              onCategoryIdsChange={(ids) => setFormData((prev) => ({ ...prev, categoryIds: ids }))}\n              onBrandIdsChange={(ids) => setFormData((prev) => ({ ...prev, brandIds: ids }))}\n              onPrimaryCategoryIdChange={(id) => setFormData((prev) => ({ ...prev, primaryCategoryId: id }))}\n              isClothingCategory={isClothingCategory}\n              onVariantsUpdate={(updater) => setFormData((prev) => ({ ...prev, variants: updater(prev.variants) }))}\n            />\n\n            {/* Simple Product Fields - Only shown when productType === 'simple' */}\n            {productType === 'simple' && (\n              <SimpleProductFields\n                price={simpleProductData.price}\n                compareAtPrice={simpleProductData.compareAtPrice}\n                sku={simpleProductData.sku}\n                quantity={simpleProductData.quantity}\n                defaultCurrency={defaultCurrency}\n                onPriceChange={(value) => setSimpleProductData((prev) => ({ ...prev, price: value }))}\n                onCompareAtPriceChange={(value) => setSimpleProductData((prev) => ({ ...prev, compareAtPrice: value }))}\n                onSkuChange={(value) => setSimpleProductData((prev) => ({ ...prev, sku: value }))}\n                onQuantityChange={(value) => setSimpleProductData((prev) => ({ ...prev, quantity: value }))}\n              />\n            )}\n\n            {/* Select Attributes for Variants - Only shown when productType === 'variable' */}\n            {productType === 'variable' && (\n              <AttributesSelection\n                attributes={attributes}\n                selectedAttributesForVariants={selectedAttributesForVariants}\n                selectedAttributeValueIds={selectedAttributeValueIds}\n                attributesDropdownOpen={attributesDropdownOpen}\n                attributesDropdownRef={attributesDropdownRef}\n                onAttributesDropdownToggle={() => setAttributesDropdownOpen(!attributesDropdownOpen)}\n                onAttributeToggle={(attributeId, checked) => {\n                  const newSet = new Set(selectedAttributesForVariants);\n                  if (checked) {\n                    newSet.add(attributeId);\n                  } else {\n                    newSet.delete(attributeId);\n                    const newValueIds = { ...selectedAttributeValueIds };\n                    delete newValueIds[attributeId];\n                    setSelectedAttributeValueIds(newValueIds);\n                  }\n                  setSelectedAttributesForVariants(newSet);\n                }}\n                onAttributeRemove={(attributeId) => {\n                  const newSet = new Set(selectedAttributesForVariants);\n                  newSet.delete(attributeId);\n                  const newValueIds = { ...selectedAttributeValueIds };\n                  delete newValueIds[attributeId];\n                  setSelectedAttributeValueIds(newValueIds);\n                  setSelectedAttributesForVariants(newSet);\n                }}\n              />\n            )}\n\n            {/* New Multi-Attribute Variant Builder - Only shown when productType === 'variable' */}\n            {productType === 'variable' &&\n              ((isEditMode && (generatedVariants.length > 0 || hasVariantsToLoad)) ||\n                selectedAttributesForVariants.size > 0) && (\n                <VariantBuilder\n                  generatedVariants={generatedVariants}\n                  attributes={attributes}\n                  selectedAttributesForVariants={selectedAttributesForVariants}\n                  isEditMode={isEditMode}\n                  hasVariantsToLoad={hasVariantsToLoad}\n                  defaultCurrency={defaultCurrency}\n                  imageUploadLoading={imageUploadLoading}\n                  slug={formData.slug}\n                  title={formData.title}\n                  variantImageInputRefs={variantImageInputRefs}\n                  onVariantUpdate={setGeneratedVariants}\n                  onVariantDelete={(variantId) => {\n                    setGeneratedVariants((prev) => prev.filter((v) => v.id !== variantId));\n                  }}\n                  onVariantAdd={() => {\n                    const newVariant: GeneratedVariant = {\n                      id: `variant-${Date.now()}-${Math.random()}`,\n                      selectedValueIds: [],\n                      price: '0.00',\n                      compareAtPrice: '0.00',\n                      stock: '0',\n                      sku: 'PROD',\n                      image: null,\n                    };\n                    setGeneratedVariants((prev) => {\n                      const updated = [...prev, newVariant];\n                      console.log(' [VARIANT BUILDER] New manual variant added:', {\n                        newVariantId: newVariant.id,\n                        totalVariants: updated.length,\n                        manualVariants: updated.filter((v) => v.id !== 'variant-all').length,\n                        autoVariants: updated.filter((v) => v.id === 'variant-all').length,\n                      });\n                      return updated;\n                    });\n                  }}\n                  onApplyToAll={applyToAllVariants}\n                  onVariantImageUpload={handleUploadVariantImage}\n                  onOpenValueModal={setOpenValueModal}\n                  generateSlug={generateSlug}\n                />\n              )}\n\n            {/* Product Labels */}\n            <ProductLabels\n              labels={formData.labels}\n              onAddLabel={addLabel}\n              onRemoveLabel={removeLabel}\n              onUpdateLabel={updateLabel}\n            />\n\n            {/* Publishing */}\n            <Publishing\n              featured={formData.featured}\n              onFeaturedChange={(featured) => setFormData((prev) => ({ ...prev, featured }))}\n            />\n\n            {/* Actions - Sticky */}\n            <FormActions loading={loading} isEditMode={isEditMode} />\n          </form>\n        </Card>\n        </div>\n      </div>\n\n      {/* Value Selection Modal */}\n      {openValueModal && (\n        <ValueSelectionModal\n          openValueModal={openValueModal}\n          variant={generatedVariants.find((v) => v.id === openValueModal.variantId)}\n          attribute={attributes.find((a) => a.id === openValueModal.attributeId)}\n          selectedAttributeValueIds={selectedAttributeValueIds}\n          onClose={() => setOpenValueModal(null)}\n          onVariantUpdate={setGeneratedVariants}\n          onAttributeValueIdsUpdate={setSelectedAttributeValueIds}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default function AddProductPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4\"></div>\n          <p className=\"text-sm text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    }>\n      <AddProductPageContent />\n    </Suspense>\n  );\n}"],"names":[],"mappings":"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"}}]
}