{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/api/v1/products/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { productsService } from \"@/lib/services/products.service\";\r\n\r\nexport async function GET(req: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const filters = {\r\n      category: searchParams.get(\"category\") || undefined,\r\n      search: searchParams.get(\"search\") || undefined,\r\n      filter: searchParams.get(\"filter\") || searchParams.get(\"filters\") || undefined,\r\n      minPrice: searchParams.get(\"minPrice\")\r\n        ? parseFloat(searchParams.get(\"minPrice\")!)\r\n        : undefined,\r\n      maxPrice: searchParams.get(\"maxPrice\")\r\n        ? parseFloat(searchParams.get(\"maxPrice\")!)\r\n        : undefined,\r\n      colors: searchParams.get(\"colors\") || undefined,\r\n      sizes: searchParams.get(\"sizes\") || undefined,\r\n      brand: searchParams.get(\"brand\") || undefined,\r\n      sort: searchParams.get(\"sort\") || \"createdAt\",\r\n      page: searchParams.get(\"page\")\r\n        ? parseInt(searchParams.get(\"page\")!)\r\n        : 1,\r\n      limit: searchParams.get(\"limit\")\r\n        ? parseInt(searchParams.get(\"limit\")!)\r\n        : 24,\r\n      lang: searchParams.get(\"lang\") || \"en\",\r\n    };\r\n\r\n    console.log('üîç [PRODUCTS API] Filters received:', filters);\r\n    const result = await productsService.findAll(filters);\r\n    console.log('‚úÖ [PRODUCTS API] Result:', {\r\n      dataLength: result.data?.length || 0,\r\n      total: result.meta?.total || 0,\r\n      page: result.meta?.page || 0,\r\n      totalPages: result.meta?.totalPages || 0\r\n    });\r\n    return NextResponse.json(result);\r\n  } catch (error: any) {\r\n    console.error(\"‚ùå [PRODUCTS] Error:\", error);\r\n    return NextResponse.json(\r\n      {\r\n        type: error.type || \"https://api.shop.am/problems/internal-error\",\r\n        title: error.title || \"Internal Server Error\",\r\n        status: error.status || 500,\r\n        detail: error.detail || error.message || \"An error occurred\",\r\n        instance: req.url,\r\n      },\r\n      { status: error.status || 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;;;AAGO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,UAAU;YACd,UAAU,aAAa,GAAG,CAAC,eAAe;YAC1C,QAAQ,aAAa,GAAG,CAAC,aAAa;YACtC,QAAQ,aAAa,GAAG,CAAC,aAAa,aAAa,GAAG,CAAC,cAAc;YACrE,UAAU,aAAa,GAAG,CAAC,cACvB,WAAW,aAAa,GAAG,CAAC,eAC5B;YACJ,UAAU,aAAa,GAAG,CAAC,cACvB,WAAW,aAAa,GAAG,CAAC,eAC5B;YACJ,QAAQ,aAAa,GAAG,CAAC,aAAa;YACtC,OAAO,aAAa,GAAG,CAAC,YAAY;YACpC,OAAO,aAAa,GAAG,CAAC,YAAY;YACpC,MAAM,aAAa,GAAG,CAAC,WAAW;YAClC,MAAM,aAAa,GAAG,CAAC,UACnB,SAAS,aAAa,GAAG,CAAC,WAC1B;YACJ,OAAO,aAAa,GAAG,CAAC,WACpB,SAAS,aAAa,GAAG,CAAC,YAC1B;YACJ,MAAM,aAAa,GAAG,CAAC,WAAW;QACpC;QAEA,QAAQ,GAAG,CAAC,uCAAuC;QACnD,MAAM,SAAS,MAAM,gBAAgB,OAAO,CAAC;QAC7C,QAAQ,GAAG,CAAC,4BAA4B;YACtC,YAAY,OAAO,IAAI,EAAE,UAAU;YACnC,OAAO,OAAO,IAAI,EAAE,SAAS;YAC7B,MAAM,OAAO,IAAI,EAAE,QAAQ;YAC3B,YAAY,OAAO,IAAI,EAAE,cAAc;QACzC;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,MAAM,MAAM,IAAI,IAAI;YACpB,OAAO,MAAM,KAAK,IAAI;YACtB,QAAQ,MAAM,MAAM,IAAI;YACxB,QAAQ,MAAM,MAAM,IAAI,MAAM,OAAO,IAAI;YACzC,UAAU,IAAI,GAAG;QACnB,GACA;YAAE,QAAQ,MAAM,MAAM,IAAI;QAAI;IAElC;AACF"}}]
}