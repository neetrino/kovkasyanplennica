{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Button.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { ButtonHTMLAttributes, forwardRef, ReactElement } from 'react';\r\n\r\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\r\n  function Button(\r\n    { variant = 'primary', size = 'md', className = '', children, ...props },\r\n    ref\r\n  ): ReactElement {\r\n    const baseStyles = 'font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n    \r\n    const variantStyles = {\r\n      primary: 'bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-900',\r\n      secondary: 'bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500',\r\n      outline: 'bg-transparent text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500',\r\n      ghost: 'bg-transparent text-gray-900 hover:bg-gray-100 focus:ring-gray-500',\r\n    };\r\n    \r\n    const sizeStyles = {\r\n      sm: 'px-3 py-1.5 text-sm',\r\n      md: 'px-4 py-2 text-base',\r\n      lg: 'px-6 py-3 text-lg',\r\n    };\r\n    \r\n    return (\r\n      <button\r\n        ref={ref}\r\n        className={`${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${className}`}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,MAAM,uBAAS,IAAA,mNAAU,EAC9B,SAAS,OACP,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,EACxE,GAAG;IAEH,MAAM,aAAa;IAEnB,MAAM,gBAAgB;QACpB,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,GAAG,WAAW,CAAC,EAAE,aAAa,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;QACpF,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Card.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { HTMLAttributes, forwardRef, ReactElement } from 'react';\r\n\r\ninterface CardProps extends HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Card = forwardRef<HTMLDivElement, CardProps>(\r\n  function Card({ className = '', children, ...props }, ref): ReactElement {\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={`bg-white border border-gray-200 rounded-lg shadow-sm ${className}`}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,MAAM,qBAAO,IAAA,mNAAU,EAC5B,SAAS,KAAK,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,GAAG;IACvD,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAC,qDAAqD,EAAE,WAAW;QAC7E,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Input.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { InputHTMLAttributes, forwardRef } from 'react';\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  label?: string;\r\n  error?: string;\r\n}\r\n\r\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\r\n  function Input({ label, error, className = '', onKeyDown, ...props }, ref) {\r\n    // Ensure pipe character (|) works in all input fields\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      // Allow pipe character (|) - key code 220 or Shift+Backslash\r\n      if (e.key === '|' || e.keyCode === 220 || (e.shiftKey && e.key === '\\\\')) {\r\n        // Allow the default behavior for pipe character\r\n        return;\r\n      }\r\n      \r\n      // Call original onKeyDown if provided\r\n      if (onKeyDown) {\r\n        onKeyDown(e);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"w-full\">\r\n        {label && (\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            {label}\r\n          </label>\r\n        )}\r\n        <input\r\n          ref={ref}\r\n          className={`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed ${\r\n            error ? 'border-error focus:ring-error' : 'border-gray-300'\r\n          } ${className}`}\r\n          onKeyDown={handleKeyDown}\r\n          {...props}\r\n        />\r\n        {error && (\r\n          <p className=\"mt-1 text-sm text-error\">{error}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,MAAM,sBAAQ,IAAA,mNAAU,EAC7B,SAAS,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,GAAG;IACvE,sDAAsD;IACtD,MAAM,gBAAgB,CAAC;QACrB,6DAA6D;QAC7D,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,OAAO,KAAK,OAAQ,EAAE,QAAQ,IAAI,EAAE,GAAG,KAAK,MAAO;YACxE,gDAAgD;YAChD;QACF;QAEA,sCAAsC;QACtC,IAAI,WAAW;YACb,UAAU;QACZ;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;YACZ,uBACC,8OAAC;gBAAM,WAAU;0BACd;;;;;;0BAGL,8OAAC;gBACC,KAAK;gBACL,WAAW,CAAC,gKAAgK,EAC1K,QAAQ,kCAAkC,kBAC3C,CAAC,EAAE,WAAW;gBACf,WAAW;gBACV,GAAG,KAAK;;;;;;YAEV,uBACC,8OAAC;gBAAE,WAAU;0BAA2B;;;;;;;;;;;;AAIhD"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/index.ts"],"sourcesContent":["export { Button } from './Button';\r\nexport { Card } from './Card';\r\nexport { Input } from './Input';\r\n\r\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/checkout/CheckoutForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Card, Input } from '@shop/ui';\r\nimport { UseFormRegister, UseFormSetValue, FieldErrors, UseFormWatch } from 'react-hook-form';\r\nimport { useTranslation } from '../../lib/i18n-client';\r\n\r\ntype CheckoutFormData = {\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  phone: string;\r\n  shippingMethod: 'pickup' | 'delivery';\r\n  paymentMethod: 'idram' | 'arca' | 'cash_on_delivery';\r\n  shippingAddress?: string;\r\n  shippingCity?: string;\r\n  cardNumber?: string;\r\n  cardExpiry?: string;\r\n  cardCvv?: string;\r\n  cardHolderName?: string;\r\n};\r\n\r\ninterface CheckoutFormProps {\r\n  register: UseFormRegister<CheckoutFormData>;\r\n  setValue: UseFormSetValue<CheckoutFormData>;\r\n  errors: FieldErrors<CheckoutFormData>;\r\n  isSubmitting: boolean;\r\n  shippingMethod: 'pickup' | 'delivery';\r\n  paymentMethod: 'idram' | 'arca' | 'cash_on_delivery';\r\n  paymentMethods: Array<{\r\n    id: 'idram' | 'arca' | 'cash_on_delivery';\r\n    name: string;\r\n    description: string;\r\n    logo: string | null;\r\n  }>;\r\n  logoErrors: Record<string, boolean>;\r\n  setLogoErrors: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  error: string | null;\r\n  setError: React.Dispatch<React.SetStateAction<string | null>>;\r\n}\r\n\r\nexport function CheckoutForm({\r\n  register,\r\n  setValue,\r\n  errors,\r\n  isSubmitting,\r\n  shippingMethod,\r\n  paymentMethod,\r\n  paymentMethods,\r\n  logoErrors,\r\n  setLogoErrors,\r\n  error,\r\n  setError,\r\n}: CheckoutFormProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"lg:col-span-2 space-y-6\">\r\n      {/* Contact Information */}\r\n      <Card className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">{t('checkout.contactInformation')}</h2>\r\n        <div className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Input\r\n              label={t('checkout.form.firstName')}\r\n              type=\"text\"\r\n              {...register('firstName')}\r\n              error={errors.firstName?.message}\r\n              disabled={isSubmitting}\r\n            />\r\n            <Input\r\n              label={t('checkout.form.lastName')}\r\n              type=\"text\"\r\n              {...register('lastName')}\r\n              error={errors.lastName?.message}\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Input\r\n              label={t('checkout.form.email')}\r\n              type=\"email\"\r\n              {...register('email')}\r\n              error={errors.email?.message}\r\n              disabled={isSubmitting}\r\n            />\r\n            <Input\r\n              label={t('checkout.form.phone')}\r\n              type=\"tel\"\r\n              placeholder={t('checkout.placeholders.phone')}\r\n              {...register('phone')}\r\n              error={errors.phone?.message}\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Shipping Method */}\r\n      <Card className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">{t('checkout.shippingMethod')}</h2>\r\n        {errors.shippingMethod && (\r\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n            <p className=\"text-sm text-red-600\">{errors.shippingMethod.message}</p>\r\n          </div>\r\n        )}\r\n        <div className=\"space-y-3\">\r\n          <label\r\n            className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\r\n              shippingMethod === 'pickup'\r\n                ? 'border-purple-600 bg-purple-50'\r\n                : 'border-gray-300 hover:bg-gray-50'\r\n            }`}\r\n          >\r\n            <input\r\n              type=\"radio\"\r\n              {...register('shippingMethod')}\r\n              value=\"pickup\"\r\n              checked={shippingMethod === 'pickup'}\r\n              onChange={(e) => setValue('shippingMethod', e.target.value as 'pickup' | 'delivery')}\r\n              className=\"mr-4\"\r\n              disabled={isSubmitting}\r\n            />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-gray-900\">{t('checkout.shipping.storePickup')}</div>\r\n              <div className=\"text-sm text-gray-600\">{t('checkout.shipping.storePickupDescription')}</div>\r\n            </div>\r\n          </label>\r\n          <label\r\n            className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\r\n              shippingMethod === 'delivery'\r\n                ? 'border-purple-600 bg-purple-50'\r\n                : 'border-gray-300 hover:bg-gray-50'\r\n            }`}\r\n          >\r\n            <input\r\n              type=\"radio\"\r\n              {...register('shippingMethod')}\r\n              value=\"delivery\"\r\n              checked={shippingMethod === 'delivery'}\r\n              onChange={(e) => setValue('shippingMethod', e.target.value as 'pickup' | 'delivery')}\r\n              className=\"mr-4\"\r\n              disabled={isSubmitting}\r\n            />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-gray-900\">{t('checkout.shipping.delivery')}</div>\r\n              <div className=\"text-sm text-gray-600\">{t('checkout.shipping.deliveryDescription')}</div>\r\n            </div>\r\n          </label>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Shipping Address - Only show for delivery */}\r\n      {shippingMethod === 'delivery' && (\r\n        <Card className=\"p-6\" data-shipping-section>\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">{t('checkout.shippingAddress')}</h2>\r\n          {(error && error.includes('shipping address')) || (errors.shippingAddress || errors.shippingCity) ? (\r\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-sm text-red-600\">\r\n                {error && error.includes('shipping address') \r\n                  ? error \r\n                  : (errors.shippingAddress?.message || \r\n                     errors.shippingCity?.message)}\r\n              </p>\r\n            </div>\r\n          ) : null}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <Input\r\n                label={t('checkout.form.address')}\r\n                type=\"text\"\r\n                placeholder={t('checkout.placeholders.address')}\r\n                {...register('shippingAddress', {\r\n                  onChange: () => {\r\n                    if (error && error.includes('shipping address')) {\r\n                      setError(null);\r\n                    }\r\n                  }\r\n                })}\r\n                error={errors.shippingAddress?.message}\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Input\r\n                label={t('checkout.form.city')}\r\n                type=\"text\"\r\n                placeholder={t('checkout.placeholders.city')}\r\n                {...register('shippingCity', {\r\n                  onChange: () => {\r\n                    if (error && error.includes('shipping address')) {\r\n                      setError(null);\r\n                    }\r\n                  }\r\n                })}\r\n                error={errors.shippingCity?.message}\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Payment Method */}\r\n      <Card className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">{t('checkout.paymentMethod')}</h2>\r\n        {errors.paymentMethod && (\r\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n            <p className=\"text-sm text-red-600\">{errors.paymentMethod.message}</p>\r\n          </div>\r\n        )}\r\n        <div className=\"space-y-3\">\r\n          {paymentMethods.map((method) => (\r\n            <label\r\n              key={method.id}\r\n              className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\r\n                paymentMethod === method.id\r\n                  ? 'border-purple-600 bg-purple-50'\r\n                  : 'border-gray-300 hover:bg-gray-50'\r\n              }`}\r\n            >\r\n              <input\r\n                type=\"radio\"\r\n                {...register('paymentMethod')}\r\n                value={method.id}\r\n                checked={paymentMethod === method.id}\r\n                onChange={(e) => setValue('paymentMethod', e.target.value as 'idram' | 'arca' | 'cash_on_delivery')}\r\n                className=\"mr-4\"\r\n                disabled={isSubmitting}\r\n              />\r\n              <div className=\"flex items-center gap-4 flex-1\">\r\n                <div className=\"relative w-20 h-12 flex-shrink-0 bg-white rounded border border-gray-200 flex items-center justify-center overflow-hidden\">\r\n                  {!method.logo || logoErrors[method.id] ? (\r\n                    <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <img\r\n                      src={method.logo}\r\n                      alt={method.name}\r\n                      className=\"w-full h-full object-contain p-1.5\"\r\n                      loading=\"lazy\"\r\n                      onError={() => {\r\n                        setLogoErrors((prev) => ({ ...prev, [method.id]: true }));\r\n                      }}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-medium text-gray-900\">{method.name}</div>\r\n                  <div className=\"text-sm text-gray-600\">{method.description}</div>\r\n                </div>\r\n              </div>\r\n            </label>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/checkout/CheckoutModals.tsx"],"sourcesContent":["'use client';\n\nimport { Button, Input } from '@shop/ui';\nimport { UseFormRegister, UseFormSetValue, UseFormHandleSubmit, FieldErrors } from 'react-hook-form';\nimport { useTranslation } from '../../lib/i18n-client';\nimport { formatPriceInCurrency } from '../../lib/currency';\n\ntype CheckoutFormData = {\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  shippingMethod: 'pickup' | 'delivery';\n  paymentMethod: 'idram' | 'arca' | 'cash_on_delivery';\n  shippingAddress?: string;\n  shippingCity?: string;\n  cardNumber?: string;\n  cardExpiry?: string;\n  cardCvv?: string;\n  cardHolderName?: string;\n};\n\ninterface Cart {\n  id: string;\n  items: any[];\n  totals: {\n    subtotal: number;\n    discount: number;\n    shipping: number;\n    tax: number;\n    total: number;\n    currency: string;\n  };\n  itemsCount: number;\n}\n\ninterface CheckoutModalsProps {\n  showShippingModal: boolean;\n  setShowShippingModal: (show: boolean) => void;\n  showCardModal: boolean;\n  setShowCardModal: (show: boolean) => void;\n  register: UseFormRegister<CheckoutFormData>;\n  setValue: UseFormSetValue<CheckoutFormData>;\n  handleSubmit: UseFormHandleSubmit<CheckoutFormData>;\n  errors: FieldErrors<CheckoutFormData>;\n  isSubmitting: boolean;\n  shippingMethod: 'pickup' | 'delivery';\n  paymentMethod: 'idram' | 'arca' | 'cash_on_delivery';\n  shippingCity: string | undefined;\n  cart: Cart | null;\n  orderSummary: {\n    subtotalDisplay: number;\n    taxDisplay: number;\n    shippingDisplay: number;\n    totalDisplay: number;\n  };\n  currency: 'USD' | 'AMD' | 'EUR' | 'RUB' | 'GEL';\n  loadingDeliveryPrice: boolean;\n  deliveryPrice: number | null;\n  logoErrors: Record<string, boolean>;\n  setLogoErrors: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\n  isLoggedIn: boolean;\n  onSubmit: (data: CheckoutFormData) => void;\n}\n\nexport function CheckoutModals({\n  showShippingModal,\n  setShowShippingModal,\n  showCardModal,\n  setShowCardModal,\n  register,\n  setValue,\n  handleSubmit,\n  errors,\n  isSubmitting,\n  shippingMethod,\n  paymentMethod,\n  shippingCity,\n  cart,\n  orderSummary,\n  currency,\n  loadingDeliveryPrice,\n  deliveryPrice,\n  logoErrors,\n  setLogoErrors,\n  isLoggedIn,\n  onSubmit,\n}: CheckoutModalsProps) {\n  const { t } = useTranslation();\n\n  return (\n    <>\n      {/* Shipping Address Modal for Guest Checkout */}\n      {showShippingModal && (\n        <div \n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4\"\n          onClick={() => {\n            console.log('[Checkout] Modal backdrop clicked, closing modal');\n            setShowShippingModal(false);\n          }}\n        >\n          <div \n            className=\"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto\"\n            onClick={(e) => {\n              e.stopPropagation();\n              console.log('[Checkout] Modal content clicked');\n            }}\n            style={{ zIndex: 10000 }}\n          >\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {shippingMethod === 'delivery' ? t('checkout.modals.completeOrder') : t('checkout.modals.confirmOrder')}\n              </h2>\n              <button\n                onClick={() => setShowShippingModal(false)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                aria-label={t('checkout.modals.closeModal')}\n              >\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Contact Information */}\n            <div className=\"space-y-4 mb-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">{t('checkout.contactInformation')}</h3>\n              <div>\n                <Input\n                  label={t('checkout.form.email')}\n                  type=\"email\"\n                  {...register('email')}\n                  error={errors.email?.message}\n                  disabled={isSubmitting}\n                />\n              </div>\n              <div>\n                <Input\n                  label={t('checkout.form.phone')}\n                  type=\"tel\"\n                  placeholder={t('checkout.placeholders.phone')}\n                  {...register('phone')}\n                  error={errors.phone?.message}\n                  disabled={isSubmitting}\n                />\n              </div>\n            </div>\n\n            {/* Error messages for contact info */}\n            {(errors.email || errors.phone) && (\n              <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-sm text-red-600\">\n                  {errors.email?.message || errors.phone?.message}\n                </p>\n              </div>\n            )}\n\n            {shippingMethod === 'delivery' ? (\n              <>\n                <div className=\"mb-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">{t('checkout.shippingAddress')}</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Input\n                        label={t('checkout.form.address')}\n                        type=\"text\"\n                        placeholder={t('checkout.placeholders.address')}\n                        {...register('shippingAddress')}\n                        error={errors.shippingAddress?.message}\n                        disabled={isSubmitting}\n                      />\n                    </div>\n                    <div>\n                      <Input\n                        label={t('checkout.form.city')}\n                        type=\"text\"\n                        placeholder={t('checkout.placeholders.city')}\n                        {...register('shippingCity')}\n                        error={errors.shippingCity?.message}\n                        disabled={isSubmitting}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                {(errors.shippingAddress || errors.shippingCity) && (\n                  <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                    <p className=\"text-sm text-red-600\">\n                      {errors.shippingAddress?.message || \n                       errors.shippingCity?.message}\n                    </p>\n                  </div>\n                )}\n\n                {/* Payment Details - Only show for card payments */}\n                {(paymentMethod === 'arca' || paymentMethod === 'idram') && (\n                  <div className=\"space-y-4 mb-6 mt-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      {t('checkout.payment.paymentDetails')} ({paymentMethod === 'idram' ? t('checkout.payment.idram') : t('checkout.payment.arca')})\n                    </h3>\n                    <div>\n                    <Input\n                      label={t('checkout.form.cardNumber')}\n                      type=\"text\"\n                      placeholder={t('checkout.placeholders.cardNumber')}\n                      maxLength={19}\n                      {...register('cardNumber')}\n                      error={errors.cardNumber?.message}\n                      disabled={isSubmitting}\n                      onChange={(e) => {\n                        let value = e.target.value.replace(/\\s/g, '');\n                        value = value.replace(/(.{4})/g, '$1 ').trim();\n                        setValue('cardNumber', value);\n                      }}\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Input\n                        label={t('checkout.form.expiryDate')}\n                        type=\"text\"\n                        placeholder={t('checkout.placeholders.expiryDate')}\n                        maxLength={5}\n                        {...register('cardExpiry')}\n                        error={errors.cardExpiry?.message}\n                        disabled={isSubmitting}\n                        onChange={(e) => {\n                          let value = e.target.value.replace(/\\D/g, '');\n                          if (value.length >= 2) {\n                            value = value.substring(0, 2) + '/' + value.substring(2, 4);\n                          }\n                          setValue('cardExpiry', value);\n                        }}\n                      />\n                    </div>\n                    <div>\n                      <Input\n                        label={t('checkout.form.cvv')}\n                        type=\"text\"\n                        placeholder={t('checkout.placeholders.cvv')}\n                        maxLength={4}\n                        {...register('cardCvv')}\n                        error={errors.cardCvv?.message}\n                        disabled={isSubmitting}\n                        onChange={(e) => {\n                          const value = e.target.value.replace(/\\D/g, '');\n                          setValue('cardCvv', value);\n                        }}\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Input\n                      label={t('checkout.form.cardHolderName')}\n                      type=\"text\"\n                      placeholder={t('checkout.placeholders.cardHolderName')}\n                      {...register('cardHolderName')}\n                      error={errors.cardHolderName?.message}\n                      disabled={isSubmitting}\n                    />\n                  </div>\n                  </div>\n                )}\n\n                {/* Cash on Delivery Info */}\n                {paymentMethod === 'cash_on_delivery' && (\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 mt-6\">\n                    <p className=\"text-sm text-green-800\">\n                      <strong>{t('checkout.payment.cashOnDelivery')}:</strong> {t('checkout.messages.cashOnDeliveryInfo')}\n                    </p>\n                  </div>\n                )}\n\n                {cart && (\n                  <div className=\"bg-gray-50 rounded-lg p-4 space-y-2 mt-4\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">{t('checkout.summary.items')}:</span>\n                      <span className=\"font-medium\">{cart.itemsCount}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">{t('checkout.summary.subtotal')}:</span>\n                      <span className=\"font-medium\">{formatPriceInCurrency(orderSummary.subtotalDisplay, currency)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">{t('checkout.summary.shipping')}:</span>\n                      <span className=\"font-medium\">\n                        {loadingDeliveryPrice\n                          ? t('checkout.shipping.loading')\n                          : deliveryPrice !== null\n                            ? formatPriceInCurrency(orderSummary.shippingDisplay, currency) + (shippingCity ? ` (${shippingCity})` : ` (${t('checkout.shipping.delivery')})`)\n                            : shippingMethod === 'delivery' ? t('checkout.shipping.enterCity') : t('checkout.shipping.freePickup')}\n                      </span>\n                    </div>\n                    <div className=\"border-t border-gray-200 pt-2 mt-2\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"font-semibold text-gray-900\">{t('checkout.summary.total')}:</span>\n                        <span className=\"font-bold text-gray-900\">\n                          {formatPriceInCurrency(orderSummary.totalDisplay, currency)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </>\n            ) : (\n              <div className=\"mb-6\">\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n                  <p className=\"text-sm text-blue-800\">\n                    <strong>{t('checkout.shipping.storePickup')}:</strong> {t('checkout.messages.storePickupInfo')}\n                  </p>\n                </div>\n\n                {/* Payment Details for Pickup - Only show for card payments */}\n                {(paymentMethod === 'arca' || paymentMethod === 'idram') && (\n                  <div className=\"space-y-4 mb-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      {t('checkout.payment.paymentDetails')} ({paymentMethod === 'idram' ? t('checkout.payment.idram') : t('checkout.payment.arca')})\n                    </h3>\n                    <div>\n                      <Input\n                        label={t('checkout.form.cardNumber')}\n                        type=\"text\"\n                        placeholder={t('checkout.placeholders.cardNumber')}\n                        maxLength={19}\n                        {...register('cardNumber')}\n                        error={errors.cardNumber?.message}\n                        disabled={isSubmitting}\n                        onChange={(e) => {\n                          let value = e.target.value.replace(/\\s/g, '');\n                          value = value.replace(/(.{4})/g, '$1 ').trim();\n                          setValue('cardNumber', value);\n                        }}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <Input\n                          label={t('checkout.form.expiryDate')}\n                          type=\"text\"\n                          placeholder={t('checkout.placeholders.expiryDate')}\n                          maxLength={5}\n                          {...register('cardExpiry')}\n                          error={errors.cardExpiry?.message}\n                          disabled={isSubmitting}\n                          onChange={(e) => {\n                            let value = e.target.value.replace(/\\D/g, '');\n                            if (value.length >= 2) {\n                              value = value.substring(0, 2) + '/' + value.substring(2, 4);\n                            }\n                            setValue('cardExpiry', value);\n                          }}\n                        />\n                      </div>\n                      <div>\n                        <Input\n                          label={t('checkout.form.cvv')}\n                          type=\"text\"\n                          placeholder={t('checkout.placeholders.cvv')}\n                          maxLength={4}\n                          {...register('cardCvv')}\n                          error={errors.cardCvv?.message}\n                          disabled={isSubmitting}\n                          onChange={(e) => {\n                            const value = e.target.value.replace(/\\D/g, '');\n                            setValue('cardCvv', value);\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div>\n                      <Input\n                        label={t('checkout.form.cardHolderName')}\n                        type=\"text\"\n                        placeholder={t('checkout.placeholders.cardHolderName')}\n                        {...register('cardHolderName')}\n                        error={errors.cardHolderName?.message}\n                        disabled={isSubmitting}\n                      />\n                    </div>\n                  </div>\n                )}\n\n                {/* Cash on Delivery Info for Pickup */}\n                {paymentMethod === 'cash_on_delivery' && (\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\n                    <p className=\"text-sm text-green-800\">\n                      <strong>{t('checkout.payment.cashOnDelivery')}:</strong> {t('checkout.messages.cashOnDeliveryPickup')}\n                    </p>\n                  </div>\n                )}\n\n                {cart && (\n                  <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">{t('checkout.summary.items')}:</span>\n                      <span className=\"font-medium\">{cart.itemsCount}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">{t('checkout.summary.subtotal')}:</span>\n                      <span className=\"font-medium\">{formatPriceInCurrency(orderSummary.subtotalDisplay, currency)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">{t('checkout.summary.shipping')}:</span>\n                      <span className=\"font-medium\">{t('checkout.shipping.freePickup')}</span>\n                    </div>\n                    <div className=\"border-t border-gray-200 pt-2 mt-2\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"font-semibold text-gray-900\">{t('checkout.summary.total')}:</span>\n                        <span className=\"font-bold text-gray-900\">\n                          {formatPriceInCurrency(orderSummary.totalDisplay, currency)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div className=\"flex gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"flex-1\"\n                onClick={() => setShowShippingModal(false)}\n                disabled={isSubmitting}\n              >\n                {t('checkout.buttons.cancel')}\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"primary\"\n                className=\"flex-1\"\n                onClick={handleSubmit(\n                  (data) => {\n                    setShowShippingModal(false);\n                    onSubmit(data);\n                  },\n                  (errors) => {\n                    console.log('[Checkout Modal] Validation errors:', errors);\n                    // Keep modal open if there are errors - scroll to first error\n                    const firstErrorField = Object.keys(errors)[0];\n                    if (firstErrorField) {\n                      const errorElement = document.querySelector(`[name=\"${firstErrorField}\"]`);\n                      if (errorElement) {\n                        errorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n                      }\n                    }\n                  }\n                )}\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? t('checkout.buttons.processing') : t('checkout.buttons.placeOrder')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ArCa Card Details Modal */}\n      {showCardModal && (\n        <div \n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4\"\n          onClick={() => {\n            console.log('[Checkout] Card modal backdrop clicked, closing modal');\n            setShowCardModal(false);\n          }}\n        >\n          <div \n            className=\"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto\"\n            onClick={(e) => {\n              e.stopPropagation();\n              console.log('[Checkout] Card modal content clicked');\n            }}\n            style={{ zIndex: 10000 }}\n          >\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {t('checkout.modals.cardDetails').replace('{method}', paymentMethod === 'arca' ? t('checkout.payment.arca') : t('checkout.payment.idram'))}\n              </h2>\n              <button\n                onClick={() => setShowCardModal(false)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                aria-label={t('checkout.modals.closeModal')}\n              >\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Payment Details */}\n            <div className=\"space-y-4 mb-6\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"relative w-16 h-10 flex-shrink-0 bg-white rounded border border-gray-200 flex items-center justify-center overflow-hidden\">\n                  {logoErrors[paymentMethod] ? (\n                    <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n                    </svg>\n                  ) : (\n                    <img\n                      src={paymentMethod === 'arca' ? '/assets/payments/arca.svg' : '/assets/payments/idram.svg'}\n                      alt={paymentMethod === 'arca' ? 'ArCa' : 'Idram'}\n                      className=\"w-full h-full object-contain p-1\"\n                      loading=\"lazy\"\n                      onError={() => {\n                        setLogoErrors((prev) => ({ ...prev, [paymentMethod]: true }));\n                      }}\n                    />\n                  )}\n                </div>\n                <div>\n                  <div className=\"font-semibold text-gray-900\">\n                    {paymentMethod === 'arca' ? t('checkout.payment.arca') : t('checkout.payment.idram')} {t('checkout.payment.paymentDetails')}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">{t('checkout.payment.enterCardDetails')}</div>\n                </div>\n              </div>\n\n              <div>\n                <Input\n                  label={t('checkout.form.cardNumber')}\n                  type=\"text\"\n                  placeholder={t('checkout.placeholders.cardNumber')}\n                  maxLength={19}\n                  {...register('cardNumber')}\n                  error={errors.cardNumber?.message}\n                  disabled={isSubmitting}\n                  onChange={(e) => {\n                    let value = e.target.value.replace(/\\s/g, '');\n                    value = value.replace(/(.{4})/g, '$1 ').trim();\n                    setValue('cardNumber', value);\n                  }}\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Input\n                    label={t('checkout.form.expiryDate')}\n                    type=\"text\"\n                    placeholder={t('checkout.placeholders.expiryDate')}\n                    maxLength={5}\n                    {...register('cardExpiry')}\n                    error={errors.cardExpiry?.message}\n                    disabled={isSubmitting}\n                    onChange={(e) => {\n                      let value = e.target.value.replace(/\\D/g, '');\n                      if (value.length >= 2) {\n                        value = value.substring(0, 2) + '/' + value.substring(2, 4);\n                      }\n                      setValue('cardExpiry', value);\n                    }}\n                  />\n                </div>\n                <div>\n                  <Input\n                    label={t('checkout.form.cvv')}\n                    type=\"text\"\n                    placeholder={t('checkout.placeholders.cvv')}\n                    maxLength={4}\n                    {...register('cardCvv')}\n                    error={errors.cardCvv?.message}\n                    disabled={isSubmitting}\n                    onChange={(e) => {\n                      const value = e.target.value.replace(/\\D/g, '');\n                      setValue('cardCvv', value);\n                    }}\n                  />\n                </div>\n              </div>\n              <div>\n                <Input\n                  label={t('checkout.form.cardHolderName')}\n                  type=\"text\"\n                  placeholder={t('checkout.placeholders.cardHolderName')}\n                  {...register('cardHolderName')}\n                  error={errors.cardHolderName?.message}\n                  disabled={isSubmitting}\n                />\n              </div>\n            </div>\n\n            {/* Error messages for card details */}\n            {(errors.cardNumber || errors.cardExpiry || errors.cardCvv || errors.cardHolderName) && (\n              <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-sm text-red-600\">\n                  {errors.cardNumber?.message || \n                   errors.cardExpiry?.message || \n                   errors.cardCvv?.message || \n                   errors.cardHolderName?.message}\n                </p>\n              </div>\n            )}\n\n            {/* Order Summary */}\n            {cart && (\n              <div className=\"bg-gray-50 rounded-lg p-4 space-y-2 mb-6\">\n                <h3 className=\"font-semibold text-gray-900 mb-3\">{t('checkout.orderSummary')}</h3>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">{t('checkout.summary.items')}:</span>\n                  <span className=\"font-medium\">{cart.itemsCount}</span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">{t('checkout.summary.subtotal')}:</span>\n                  <span className=\"font-medium\">{formatPriceInCurrency(orderSummary.subtotalDisplay, currency)}</span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">{t('checkout.summary.shipping')}:</span>\n                  <span className=\"font-medium\">\n                    {shippingMethod === 'pickup' \n                      ? t('checkout.shipping.freePickup')\n                      : loadingDeliveryPrice\n                        ? t('checkout.shipping.loading')\n                        : deliveryPrice !== null\n                          ? formatPriceInCurrency(orderSummary.shippingDisplay, currency) + (shippingCity ? ` (${shippingCity})` : ` (${t('checkout.shipping.delivery')})`)\n                          : t('checkout.shipping.enterCity')}\n                  </span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">{t('checkout.summary.tax')}:</span>\n                  <span className=\"font-medium\">{formatPriceInCurrency(orderSummary.taxDisplay, currency)}</span>\n                </div>\n                <div className=\"border-t border-gray-200 pt-2 mt-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-semibold text-gray-900\">{t('checkout.summary.total')}:</span>\n                    <span className=\"font-bold text-gray-900\">\n                      {formatPriceInCurrency(orderSummary.totalDisplay, currency)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"flex-1\"\n                onClick={() => setShowCardModal(false)}\n                disabled={isSubmitting}\n              >\n                {t('checkout.buttons.cancel')}\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"primary\"\n                className=\"flex-1\"\n                onClick={handleSubmit(\n                  (data) => {\n                    setShowCardModal(false);\n                    // If guest checkout, show shipping modal first, otherwise submit\n                    if (!isLoggedIn) {\n                      setShowShippingModal(true);\n                    } else {\n                      onSubmit(data);\n                    }\n                  },\n                  (errors) => {\n                    console.log('[Checkout Card Modal] Validation errors:', errors);\n                    // Keep modal open if there are errors - scroll to first error\n                    const firstErrorField = Object.keys(errors)[0];\n                    if (firstErrorField) {\n                      const errorElement = document.querySelector(`[name=\"${firstErrorField}\"]`);\n                      if (errorElement) {\n                        errorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n                      }\n                    }\n                  }\n                )}\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? t('checkout.buttons.processing') : t('checkout.buttons.continueToPayment')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2003, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/checkout/OrderSummary.tsx"],"sourcesContent":["'use client';\n\nimport { Card, Button } from '@shop/ui';\nimport { useTranslation } from '../../lib/i18n-client';\nimport { formatPriceInCurrency } from '../../lib/currency';\n\ninterface Cart {\n  id: string;\n  items: any[];\n  totals: {\n    subtotal: number;\n    discount: number;\n    shipping: number;\n    tax: number;\n    total: number;\n    currency: string;\n  };\n  itemsCount: number;\n}\n\ninterface OrderSummaryProps {\n  cart: Cart | null;\n  orderSummary: {\n    subtotalDisplay: number;\n    taxDisplay: number;\n    shippingDisplay: number;\n    totalDisplay: number;\n  };\n  currency: 'USD' | 'AMD' | 'EUR' | 'RUB' | 'GEL';\n  shippingMethod: 'pickup' | 'delivery';\n  shippingCity: string | undefined;\n  loadingDeliveryPrice: boolean;\n  deliveryPrice: number | null;\n  error: string | null;\n  isSubmitting: boolean;\n  onPlaceOrder: (e?: React.FormEvent) => void;\n}\n\nexport function OrderSummary({\n  cart,\n  orderSummary,\n  currency,\n  shippingMethod,\n  shippingCity,\n  loadingDeliveryPrice,\n  deliveryPrice,\n  error,\n  isSubmitting,\n  onPlaceOrder,\n}: OrderSummaryProps) {\n  const { t } = useTranslation();\n\n  return (\n    <div>\n      <Card className=\"p-6 sticky top-4\">\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">{t('checkout.orderSummary')}</h2>\n        <div className=\"space-y-4 mb-6\">\n          <div className=\"flex justify-between text-gray-600\">\n            <span>{t('checkout.summary.subtotal')}</span>\n            <span>{formatPriceInCurrency(orderSummary.subtotalDisplay, currency)}</span>\n          </div>\n          <div className=\"flex justify-between text-gray-600\">\n            <span>{t('checkout.summary.shipping')}</span>\n            <span>\n              {shippingMethod === 'pickup' \n                ? t('checkout.shipping.freePickup')\n                : loadingDeliveryPrice\n                  ? t('checkout.shipping.loading')\n                  : deliveryPrice !== null\n                    ? formatPriceInCurrency(orderSummary.shippingDisplay, currency) + (shippingCity ? ` (${shippingCity})` : ` (${t('checkout.shipping.delivery')})`)\n                    : t('checkout.shipping.enterCity')}\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-600\">\n            <span>{t('checkout.summary.tax')}</span>\n            <span>{formatPriceInCurrency(orderSummary.taxDisplay, currency)}</span>\n          </div>\n          <div className=\"border-t border-gray-200 pt-4\">\n            <div className=\"flex justify-between text-lg font-bold text-gray-900\">\n              <span>{t('checkout.summary.total')}</span>\n              <span>\n                {formatPriceInCurrency(orderSummary.totalDisplay, currency)}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n            <p className=\"text-sm text-red-600\">{error}</p>\n          </div>\n        )}\n\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          className=\"w-full\"\n          size=\"lg\"\n          disabled={isSubmitting}\n          onClick={onPlaceOrder}\n        >\n          {isSubmitting ? t('checkout.buttons.processing') : t('checkout.buttons.placeOrder')}\n        </Button>\n      </Card>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAsCO,SAAS,aAAa,EAC3B,IAAI,EACJ,YAAY,EACZ,QAAQ,EACR,cAAc,EACd,YAAY,EACZ,oBAAoB,EACpB,aAAa,EACb,KAAK,EACL,YAAY,EACZ,YAAY,EACM;IAClB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,sJAAc;IAE5B,qBACE,8OAAC;kBACC,cAAA,8OAAC,+HAAI;YAAC,WAAU;;8BACd,8OAAC;oBAAG,WAAU;8BAA4C,EAAE;;;;;;8BAC5D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAM,EAAE;;;;;;8CACT,8OAAC;8CAAM,IAAA,uJAAqB,EAAC,aAAa,eAAe,EAAE;;;;;;;;;;;;sCAE7D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAM,EAAE;;;;;;8CACT,8OAAC;8CACE,mBAAmB,WAChB,EAAE,kCACF,uBACE,EAAE,+BACF,kBAAkB,OAChB,IAAA,uJAAqB,EAAC,aAAa,eAAe,EAAE,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,8BAA8B,CAAC,CAAC,IAC9I,EAAE;;;;;;;;;;;;sCAGd,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAM,EAAE;;;;;;8CACT,8OAAC;8CAAM,IAAA,uJAAqB,EAAC,aAAa,UAAU,EAAE;;;;;;;;;;;;sCAExD,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;kDAAM,EAAE;;;;;;kDACT,8OAAC;kDACE,IAAA,uJAAqB,EAAC,aAAa,YAAY,EAAE;;;;;;;;;;;;;;;;;;;;;;;gBAMzD,uBACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;8BAIzC,8OAAC,mIAAM;oBACL,MAAK;oBACL,SAAQ;oBACR,WAAU;oBACV,MAAK;oBACL,UAAU;oBACV,SAAS;8BAER,eAAe,EAAE,iCAAiC,EAAE;;;;;;;;;;;;;;;;;AAK/D"}},
    {"offset": {"line": 2184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/checkout/checkoutUtils.ts"],"sourcesContent":["import { apiClient } from '../../lib/api-client';\r\nimport { Cart, CartItem } from './useCheckout';\r\n\r\nconst CART_KEY = 'shop_cart_guest';\r\n\r\nexport async function fetchCartForGuest(): Promise<Cart | null> {\r\n  if (typeof window === 'undefined') {\r\n    return null;\r\n  }\r\n\r\n  const stored = localStorage.getItem(CART_KEY);\r\n  const guestCart: Array<{ productId: string; productSlug?: string; variantId: string; quantity: number }> = stored ? JSON.parse(stored) : [];\r\n\r\n  if (guestCart.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const itemsWithDetails: Array<{ item: CartItem | null; shouldRemove: boolean }> = await Promise.all(\r\n    guestCart.map(async (item, index) => {\r\n      try {\r\n        if (!item.productSlug) {\r\n          return { item: null, shouldRemove: true };\r\n        }\r\n\r\n        const productData = await apiClient.get<{\r\n          id: string;\r\n          slug: string;\r\n          translations?: Array<{ title: string; locale: string }>;\r\n          media?: Array<{ url?: string; src?: string } | string>;\r\n          variants?: Array<{\r\n            _id: string;\r\n            id: string;\r\n            sku: string;\r\n            price: number;\r\n          }>;\r\n        }>(`/api/v1/products/${item.productSlug}`);\r\n\r\n        const variant = productData.variants?.find(v => \r\n          (v._id?.toString() || v.id) === item.variantId\r\n        ) || productData.variants?.[0];\r\n\r\n        if (!variant) {\r\n          return { item: null, shouldRemove: true };\r\n        }\r\n\r\n        const translation = productData.translations?.[0];\r\n        const imageUrl = productData.media?.[0] \r\n          ? (typeof productData.media[0] === 'string' \r\n              ? productData.media[0] \r\n              : productData.media[0].url || productData.media[0].src)\r\n          : null;\r\n\r\n        return {\r\n          item: {\r\n            id: `${item.productId}-${item.variantId}-${index}`,\r\n            variant: {\r\n              id: variant._id?.toString() || variant.id,\r\n              sku: variant.sku || '',\r\n              product: {\r\n                id: productData.id,\r\n                title: translation?.title || 'Product',\r\n                slug: productData.slug,\r\n                image: imageUrl,\r\n              },\r\n            },\r\n            quantity: item.quantity,\r\n            price: variant.price,\r\n            total: variant.price * item.quantity,\r\n          },\r\n          shouldRemove: false,\r\n        };\r\n      } catch (error: unknown) {\r\n        const err = error as { status?: number; statusCode?: number };\r\n        if (err?.status === 404 || err?.statusCode === 404) {\r\n          return { item: null, shouldRemove: true };\r\n        }\r\n        console.error(`Error fetching product ${item.productId}:`, error);\r\n        return { item: null, shouldRemove: false };\r\n      }\r\n    })\r\n  );\r\n\r\n  const itemsToRemove = itemsWithDetails\r\n    .map((result, index) => result.shouldRemove ? index : -1)\r\n    .filter(index => index !== -1);\r\n  \r\n  if (itemsToRemove.length > 0) {\r\n    const updatedCart = guestCart.filter((_, index) => !itemsToRemove.includes(index));\r\n    localStorage.setItem(CART_KEY, JSON.stringify(updatedCart));\r\n  }\r\n\r\n  const validItems = itemsWithDetails\r\n    .map(result => result.item)\r\n    .filter((item): item is CartItem => item !== null);\r\n  \r\n  if (validItems.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const subtotal = validItems.reduce((sum, item) => sum + item.total, 0);\r\n  const itemsCount = validItems.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n  return {\r\n    id: 'guest-cart',\r\n    items: validItems,\r\n    totals: {\r\n      subtotal,\r\n      discount: 0,\r\n      shipping: 0,\r\n      tax: 0,\r\n      total: subtotal,\r\n      currency: 'AMD',\r\n    },\r\n    itemsCount,\r\n  };\r\n}\r\n\r\nexport function clearGuestCart(): void {\r\n  localStorage.removeItem(CART_KEY);\r\n  window.dispatchEvent(new Event('cart-updated'));\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAGA,MAAM,WAAW;AAEV,eAAe;IACpB,wCAAmC;QACjC,OAAO;IACT;;;IAEA,MAAM;IACN,MAAM;IAMN,MAAM;IAiEN,MAAM;IASN,MAAM;IAQN,MAAM;IACN,MAAM;AAeR;AAEO,SAAS;IACd,aAAa,UAAU,CAAC;IACxB,OAAO,aAAa,CAAC,IAAI,MAAM;AACjC"}},
    {"offset": {"line": 2215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/checkout/useCheckout.ts"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { apiClient } from '../../lib/api-client';\nimport { getStoredCurrency, convertPrice } from '../../lib/currency';\nimport { getStoredLanguage } from '../../lib/language';\nimport { useAuth } from '../../lib/auth/AuthContext';\nimport { useTranslation } from '../../lib/i18n-client';\nimport { fetchCartForGuest, clearGuestCart } from './checkoutUtils';\n\nexport interface CartItem {\n  id: string;\n  variant: {\n    id: string;\n    sku: string;\n    product: {\n      id: string;\n      title: string;\n      slug: string;\n      image?: string | null;\n    };\n  };\n  quantity: number;\n  price: number;\n  total: number;\n}\n\nexport interface Cart {\n  id: string;\n  items: CartItem[];\n  totals: {\n    subtotal: number;\n    discount: number;\n    shipping: number;\n    tax: number;\n    total: number;\n    currency: string;\n  };\n  itemsCount: number;\n}\n\nexport type CheckoutFormData = {\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  shippingMethod: 'pickup' | 'delivery';\n  paymentMethod: 'idram' | 'arca' | 'cash_on_delivery';\n  shippingAddress?: string;\n  shippingCity?: string;\n  cardNumber?: string;\n  cardExpiry?: string;\n  cardCvv?: string;\n  cardHolderName?: string;\n};\n\nexport function useCheckout() {\n  const router = useRouter();\n  const { isLoggedIn, isLoading, user } = useAuth();\n  const { t } = useTranslation();\n  const [cart, setCart] = useState<Cart | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [currency, setCurrency] = useState(getStoredCurrency());\n  const [language, setLanguage] = useState(getStoredLanguage());\n  const [logoErrors, setLogoErrors] = useState<Record<string, boolean>>({});\n  const [showShippingModal, setShowShippingModal] = useState(false);\n  const [showCardModal, setShowCardModal] = useState(false);\n  const [deliveryPrice, setDeliveryPrice] = useState<number | null>(null);\n  const [loadingDeliveryPrice, setLoadingDeliveryPrice] = useState(false);\n\n  // Payment methods configuration\n  const paymentMethods = useMemo(() => [\n    {\n      id: 'cash_on_delivery' as const,\n      name: t('checkout.payment.cashOnDelivery'),\n      description: t('checkout.payment.cashOnDeliveryDescription'),\n      logo: null,\n    },\n    {\n      id: 'idram' as const,\n      name: t('checkout.payment.idram'),\n      description: t('checkout.payment.idramDescription'),\n      logo: '/assets/payments/idram.svg',\n    },\n    {\n      id: 'arca' as const,\n      name: t('checkout.payment.arca'),\n      description: t('checkout.payment.arcaDescription'),\n      logo: '/assets/payments/arca.svg',\n    },\n  ], [t]);\n\n  // Create validation schema with translations\n  const checkoutSchema = useMemo(() => z.object({\n    firstName: z.string().min(1, t('checkout.errors.firstNameRequired')),\n    lastName: z.string().min(1, t('checkout.errors.lastNameRequired')),\n    email: z.string().email(t('checkout.errors.invalidEmail')).min(1, t('checkout.errors.emailRequired')),\n    phone: z.string().min(1, t('checkout.errors.phoneRequired')).regex(/^\\+?[0-9]{8,15}$/, t('checkout.errors.invalidPhone')),\n    shippingMethod: z.enum(['pickup', 'delivery'], {\n      message: t('checkout.errors.selectShippingMethod'),\n    }),\n    paymentMethod: z.enum(['idram', 'arca', 'cash_on_delivery'], {\n      message: t('checkout.errors.selectPaymentMethod'),\n    }),\n    shippingAddress: z.string().optional(),\n    shippingCity: z.string().optional(),\n    cardNumber: z.string().optional(),\n    cardExpiry: z.string().optional(),\n    cardCvv: z.string().optional(),\n    cardHolderName: z.string().optional(),\n  }).refine((data) => {\n    if (data.shippingMethod === 'delivery') {\n      return data.shippingAddress && data.shippingAddress.trim().length > 0;\n    }\n    return true;\n  }, {\n    message: t('checkout.errors.addressRequired'),\n    path: ['shippingAddress'],\n  }).refine((data) => {\n    if (data.shippingMethod === 'delivery') {\n      return data.shippingCity && data.shippingCity.trim().length > 0;\n    }\n    return true;\n  }, {\n    message: t('checkout.errors.cityRequired'),\n    path: ['shippingCity'],\n  }).refine((data) => {\n    if (data.paymentMethod === 'arca' || data.paymentMethod === 'idram') {\n      return data.cardNumber && data.cardNumber.replace(/\\s/g, '').length >= 13;\n    }\n    return true;\n  }, {\n    message: t('checkout.errors.cardNumberRequired'),\n    path: ['cardNumber'],\n  }).refine((data) => {\n    if (data.paymentMethod === 'arca' || data.paymentMethod === 'idram') {\n      return data.cardExpiry && /^\\d{2}\\/\\d{2}$/.test(data.cardExpiry);\n    }\n    return true;\n  }, {\n    message: t('checkout.errors.cardExpiryRequired'),\n    path: ['cardExpiry'],\n  }).refine((data) => {\n    if (data.paymentMethod === 'arca' || data.paymentMethod === 'idram') {\n      return data.cardCvv && data.cardCvv.length >= 3;\n    }\n    return true;\n  }, {\n    message: t('checkout.errors.cvvRequired'),\n    path: ['cardCvv'],\n  }).refine((data) => {\n    if (data.paymentMethod === 'arca' || data.paymentMethod === 'idram') {\n      return data.cardHolderName && data.cardHolderName.trim().length > 0;\n    }\n    return true;\n  }, {\n    message: t('checkout.errors.cardHolderNameRequired'),\n    path: ['cardHolderName'],\n  }), [t]);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n    setValue,\n    watch,\n  } = useForm<CheckoutFormData>({\n    resolver: zodResolver(checkoutSchema),\n    defaultValues: {\n      firstName: '',\n      lastName: '',\n      email: '',\n      phone: '',\n      shippingMethod: 'pickup',\n      paymentMethod: 'cash_on_delivery',\n      shippingAddress: '',\n      shippingCity: '',\n      cardNumber: '',\n      cardExpiry: '',\n      cardCvv: '',\n      cardHolderName: '',\n    },\n  });\n\n  const paymentMethod = watch('paymentMethod');\n  const shippingMethod = watch('shippingMethod');\n  const shippingCity = watch('shippingCity');\n\n  // Fetch delivery price when city changes\n  useEffect(() => {\n    const fetchDeliveryPrice = async () => {\n      if (shippingMethod === 'delivery' && shippingCity && shippingCity.trim().length > 0) {\n        setLoadingDeliveryPrice(true);\n        try {\n          console.log(' [CHECKOUT] Fetching delivery price for city:', shippingCity);\n          const response = await apiClient.get<{ price: number }>('/api/v1/delivery/price', {\n            params: {\n              city: shippingCity.trim(),\n              country: 'Armenia',\n            },\n          });\n          console.log(' [CHECKOUT] Delivery price fetched:', response.price);\n          setDeliveryPrice(response.price);\n        } catch (err: unknown) {\n          console.error(' [CHECKOUT] Error fetching delivery price:', err);\n          setDeliveryPrice(0);\n        } finally {\n          setLoadingDeliveryPrice(false);\n        }\n      } else {\n        setDeliveryPrice(null);\n      }\n    };\n\n    const timeoutId = setTimeout(() => {\n      fetchDeliveryPrice();\n    }, 500);\n\n    return () => clearTimeout(timeoutId);\n  }, [shippingCity, shippingMethod]);\n\n  useEffect(() => {\n    if (isLoading) {\n      return;\n    }\n\n    fetchCart();\n\n    const handleCurrencyUpdate = () => {\n      setCurrency(getStoredCurrency());\n    };\n\n    const handleLanguageUpdate = () => {\n      setLanguage(getStoredLanguage());\n    };\n\n    const handleCurrencyRatesUpdate = () => {\n      setCurrency(getStoredCurrency());\n    };\n\n    window.addEventListener('currency-updated', handleCurrencyUpdate);\n    window.addEventListener('language-updated', handleLanguageUpdate);\n    window.addEventListener('currency-rates-updated', handleCurrencyRatesUpdate);\n\n    return () => {\n      window.removeEventListener('currency-updated', handleCurrencyUpdate);\n      window.removeEventListener('language-updated', handleLanguageUpdate);\n      window.removeEventListener('currency-rates-updated', handleCurrencyRatesUpdate);\n    };\n  }, [isLoggedIn, isLoading, router]);\n\n  useEffect(() => {\n    async function loadUserProfile() {\n      if (isLoading) {\n        console.log(' [CHECKOUT] Waiting for auth to load...');\n        return;\n      }\n\n      if (isLoggedIn) {\n        console.log(' [CHECKOUT] User is logged in, loading profile data...');\n        \n        if (user) {\n          console.log(' [CHECKOUT] Using user data from auth context:', {\n            firstName: user.firstName,\n            lastName: user.lastName,\n            email: user.email,\n            phone: user.phone\n          });\n          \n          if (user.firstName) {\n            setValue('firstName', user.firstName);\n          }\n          if (user.lastName) {\n            setValue('lastName', user.lastName);\n          }\n          if (user.email) {\n            setValue('email', user.email);\n          }\n          if (user.phone) {\n            setValue('phone', user.phone);\n          }\n        }\n        \n        try {\n          const profile = await apiClient.get<{\n            id: string;\n            email?: string;\n            phone?: string;\n            firstName?: string;\n            lastName?: string;\n            addresses?: Array<{\n              id: string;\n              firstName?: string;\n              lastName?: string;\n              addressLine1?: string;\n              addressLine2?: string;\n              city?: string;\n              state?: string;\n              postalCode?: string;\n              countryCode?: string;\n              phone?: string;\n              isDefault?: boolean;\n            }>;\n          }>('/api/v1/users/profile');\n          \n          console.log(' [CHECKOUT] Profile loaded from API:', {\n            firstName: profile.firstName,\n            lastName: profile.lastName,\n            email: profile.email,\n            phone: profile.phone,\n            addressesCount: profile.addresses?.length || 0\n          });\n          \n          if (profile.firstName) {\n            setValue('firstName', profile.firstName);\n            console.log(' [CHECKOUT] Set firstName:', profile.firstName);\n          }\n          if (profile.lastName) {\n            setValue('lastName', profile.lastName);\n            console.log(' [CHECKOUT] Set lastName:', profile.lastName);\n          }\n          if (profile.email) {\n            setValue('email', profile.email);\n            console.log(' [CHECKOUT] Set email:', profile.email);\n          }\n          if (profile.phone) {\n            setValue('phone', profile.phone);\n            console.log(' [CHECKOUT] Set phone:', profile.phone);\n          }\n          \n          if (profile.addresses && profile.addresses.length > 0) {\n            const defaultAddress = profile.addresses.find(addr => addr.isDefault) || profile.addresses[0];\n            \n            if (defaultAddress) {\n              console.log(' [CHECKOUT] Auto-filling shipping address from saved address:', {\n                city: defaultAddress.city,\n                hasAddress: !!defaultAddress.addressLine1\n              });\n              \n              if (defaultAddress.addressLine1) {\n                const fullAddress = defaultAddress.addressLine2 \n                  ? `${defaultAddress.addressLine1}, ${defaultAddress.addressLine2}`\n                  : defaultAddress.addressLine1;\n                setValue('shippingAddress', fullAddress);\n                console.log(' [CHECKOUT] Set shippingAddress:', fullAddress);\n              }\n              \n              if (defaultAddress.city) {\n                setValue('shippingCity', defaultAddress.city);\n                console.log(' [CHECKOUT] Set shippingCity:', defaultAddress.city);\n              }\n            }\n          }\n        } catch (error) {\n          console.error(' [CHECKOUT] Error loading user profile from API:', error);\n          console.log(' [CHECKOUT] Using data from auth context instead');\n        }\n      } else {\n        console.log(' [CHECKOUT] User is not logged in, form will remain empty');\n      }\n    }\n    \n    loadUserProfile();\n  }, [isLoggedIn, isLoading, user, setValue]);\n\n  async function fetchCart() {\n    try {\n      setLoading(true);\n      \n      if (isLoggedIn) {\n        const response = await apiClient.get<{ cart: Cart }>('/api/v1/cart');\n        setCart(response.cart);\n        return;\n      }\n\n      const guestCart = await fetchCartForGuest();\n      setCart(guestCart);\n    } catch (error) {\n      console.error('Error fetching cart:', error);\n      setError(t('checkout.errors.failedToLoadCart'));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const handlePlaceOrder = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('[Checkout] handlePlaceOrder called', { \n      isLoggedIn, \n      isLoading, \n      showShippingModal,\n      paymentMethod,\n      shippingMethod,\n      cart: cart ? 'exists' : 'null'\n    });\n    \n    if (shippingMethod === 'delivery') {\n      const formData = watch();\n      const hasShippingAddress = formData.shippingAddress && formData.shippingAddress.trim().length > 0;\n      const hasShippingCity = formData.shippingCity && formData.shippingCity.trim().length > 0;\n      \n      if (!hasShippingAddress || !hasShippingCity) {\n        console.log('[Checkout] Shipping address validation failed:', {\n          hasShippingAddress,\n          hasShippingCity\n        });\n        setError(t('checkout.errors.fillShippingAddress'));\n        const shippingSection = document.querySelector('[data-shipping-section]');\n        if (shippingSection) {\n          shippingSection.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n        return;\n      }\n    }\n    \n    if (paymentMethod === 'arca' || paymentMethod === 'idram') {\n      console.log('[Checkout] Opening card modal for payment:', paymentMethod);\n      setShowCardModal(true);\n      return;\n    }\n    \n    if (!isLoggedIn) {\n      console.log('[Checkout] Opening modal for guest checkout');\n      setShowShippingModal(true);\n      return;\n    }\n    \n    console.log('[Checkout] Submitting directly (logged in user, cash on delivery)');\n    handleSubmit(onSubmit)(e);\n  };\n\n  async function onSubmit(data: CheckoutFormData) {\n    setError(null);\n\n    try {\n      if (!cart) {\n        throw new Error(t('checkout.errors.cartEmpty'));\n      }\n\n      let cartId = cart.id;\n      let items = undefined;\n\n      if (!isLoggedIn && cart.id === 'guest-cart') {\n        console.log('[Checkout] Guest checkout - sending items directly...');\n        items = cart.items.map(item => ({\n          productId: item.variant.product.id,\n          variantId: item.variant.id,\n          quantity: item.quantity,\n        }));\n        cartId = 'guest-cart';\n      }\n\n      const shippingAddress = data.shippingMethod === 'delivery' && \n        data.shippingAddress && \n        data.shippingCity\n        ? {\n            address: data.shippingAddress,\n            city: data.shippingCity,\n          }\n        : undefined;\n\n      console.log('[Checkout] Submitting order:', {\n        cartId: cartId,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        phone: data.phone,\n        shippingMethod: data.shippingMethod,\n        paymentMethod: data.paymentMethod,\n        hasShippingAddress: !!shippingAddress,\n        isGuest: !isLoggedIn,\n      });\n\n      const shippingAmount = data.shippingMethod === 'delivery' && deliveryPrice !== null ? deliveryPrice : 0;\n\n      const response = await apiClient.post<{\n        order: {\n          id: string;\n          number: string;\n          status: string;\n          paymentStatus: string;\n          total: number;\n          currency: string;\n        };\n        payment: {\n          provider: string;\n          paymentUrl: string | null;\n          expiresAt: string | null;\n        };\n        nextAction: string;\n      }>('/api/v1/orders/checkout', {\n        cartId: cartId,\n        ...(items ? { items } : {}),\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        phone: data.phone,\n        shippingMethod: data.shippingMethod,\n        ...(shippingAddress ? { shippingAddress } : {}),\n        shippingAmount: shippingAmount,\n        paymentMethod: data.paymentMethod,\n      });\n\n      console.log('[Checkout] Order created:', response.order.number);\n      \n      if (cart?.items && cart.items.length > 0) {\n        console.log('[Checkout] Verifying stock update for variants:', cart.items.map((item: CartItem) => ({\n          variantId: item.variant.id,\n          quantity: item.quantity,\n        })));\n        \n        try {\n          console.log('[Checkout] Stock update verification: Stock is updated server-side in transaction');\n        } catch (verifyError) {\n          console.warn('[Checkout] Could not verify stock update:', verifyError);\n        }\n      }\n\n      if (!isLoggedIn) {\n        clearGuestCart();\n      }\n\n      if (response.payment?.paymentUrl) {\n        console.log('[Checkout] Redirecting to payment gateway:', response.payment.paymentUrl);\n        window.location.href = response.payment.paymentUrl;\n        return;\n      }\n\n      router.push(`/orders/${response.order.number}`);\n    } catch (err: unknown) {\n      const error = err as { message?: string };\n      console.error('[Checkout] Error creating order:', err);\n      setError(error.message || t('checkout.errors.failedToCreateOrder'));\n    }\n  }\n\n  // Calculate all values in AMD first, then convert to display currency\n  const orderSummary = useMemo(() => {\n    if (!cart || cart.items.length === 0) {\n      return {\n        subtotalAMD: 0,\n        taxAMD: 0,\n        shippingAMD: 0,\n        totalAMD: 0,\n        subtotalDisplay: 0,\n        taxDisplay: 0,\n        shippingDisplay: 0,\n        totalDisplay: 0,\n      };\n    }\n\n    const subtotalAMD = convertPrice(cart.totals.subtotal, 'USD', 'AMD');\n    const taxAMD = convertPrice(cart.totals.tax, 'USD', 'AMD');\n    const shippingAMD = shippingMethod === 'delivery' && deliveryPrice !== null ? deliveryPrice : 0;\n    const totalAMD = subtotalAMD + taxAMD + shippingAMD;\n    \n    const subtotalDisplay = currency === 'AMD' ? subtotalAMD : convertPrice(subtotalAMD, 'AMD', currency);\n    const taxDisplay = currency === 'AMD' ? taxAMD : convertPrice(taxAMD, 'AMD', currency);\n    const shippingDisplay = currency === 'AMD' ? shippingAMD : convertPrice(shippingAMD, 'AMD', currency);\n    const totalDisplay = currency === 'AMD' ? totalAMD : convertPrice(totalAMD, 'AMD', currency);\n    \n    return {\n      subtotalAMD,\n      taxAMD,\n      shippingAMD,\n      totalAMD,\n      subtotalDisplay,\n      taxDisplay,\n      shippingDisplay,\n      totalDisplay,\n    };\n  }, [cart, shippingMethod, deliveryPrice, currency]);\n\n  return {\n    // State\n    cart,\n    loading,\n    error,\n    setError,\n    currency,\n    logoErrors,\n    setLogoErrors,\n    showShippingModal,\n    setShowShippingModal,\n    showCardModal,\n    setShowCardModal,\n    deliveryPrice,\n    loadingDeliveryPrice,\n    // Form\n    register,\n    handleSubmit,\n    errors,\n    isSubmitting,\n    setValue,\n    watch,\n    // Computed\n    paymentMethod,\n    shippingMethod,\n    shippingCity,\n    paymentMethods,\n    orderSummary,\n    // Actions\n    handlePlaceOrder,\n    onSubmit,\n    // Auth\n    isLoggedIn,\n  };\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2745, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/checkout/page.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { Card, Button } from '@shop/ui';\nimport { useTranslation } from '../../lib/i18n-client';\nimport { CheckoutForm } from './CheckoutForm';\nimport { CheckoutModals } from './CheckoutModals';\nimport { OrderSummary } from './OrderSummary';\nimport { useCheckout } from './useCheckout';\n\nexport default function CheckoutPage() {\n  const router = useRouter();\n  const { t } = useTranslation();\n  \n  const {\n    cart,\n    loading,\n    error,\n    setError,\n    currency,\n    logoErrors,\n    setLogoErrors,\n    showShippingModal,\n    setShowShippingModal,\n    showCardModal,\n    setShowCardModal,\n    deliveryPrice,\n    loadingDeliveryPrice,\n    register,\n    handleSubmit,\n    errors,\n    isSubmitting,\n    setValue,\n    paymentMethod,\n    shippingMethod,\n    shippingCity,\n    paymentMethods,\n    orderSummary,\n    handlePlaceOrder,\n    onSubmit,\n    isLoggedIn,\n  } = useCheckout();\n\n  if (loading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\"></div>\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2 space-y-4\">\n              <div className=\"h-96 bg-gray-200 rounded\"></div>\n            </div>\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!cart || cart.items.length === 0) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">{t('checkout.title')}</h1>\n        <Card className=\"p-6 text-center\">\n          <p className=\"text-gray-600 mb-4\">{t('checkout.errors.cartEmpty')}</p>\n          <Button variant=\"primary\" onClick={() => router.push('/products')}>\n            {t('checkout.buttons.continueShopping')}\n          </Button>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">{t('checkout.title')}</h1>\n\n      <form onSubmit={handlePlaceOrder}>\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Checkout Form */}\n          <CheckoutForm\n            register={register}\n            setValue={setValue}\n            errors={errors}\n            isSubmitting={isSubmitting}\n            shippingMethod={shippingMethod}\n            paymentMethod={paymentMethod}\n            paymentMethods={paymentMethods}\n            logoErrors={logoErrors}\n            setLogoErrors={setLogoErrors}\n            error={error}\n            setError={setError}\n          />\n\n          {/* Order Summary */}\n          <OrderSummary\n            cart={cart}\n            orderSummary={orderSummary}\n            currency={currency}\n            shippingMethod={shippingMethod}\n            shippingCity={shippingCity}\n            loadingDeliveryPrice={loadingDeliveryPrice}\n            deliveryPrice={deliveryPrice}\n            error={error}\n            isSubmitting={isSubmitting}\n            onPlaceOrder={(e) => {\n              if (e) {\n                handlePlaceOrder(e);\n              } else {\n                handlePlaceOrder({ preventDefault: () => {} } as React.FormEvent);\n              }\n            }}\n          />\n        </div>\n      </form>\n\n      <CheckoutModals\n        showShippingModal={showShippingModal}\n        setShowShippingModal={setShowShippingModal}\n        showCardModal={showCardModal}\n        setShowCardModal={setShowCardModal}\n        register={register}\n        setValue={setValue}\n        handleSubmit={handleSubmit}\n        errors={errors}\n        isSubmitting={isSubmitting}\n        shippingMethod={shippingMethod}\n        paymentMethod={paymentMethod}\n        shippingCity={shippingCity}\n        cart={cart}\n        orderSummary={orderSummary}\n        currency={currency}\n        loadingDeliveryPrice={loadingDeliveryPrice}\n        deliveryPrice={deliveryPrice}\n        logoErrors={logoErrors}\n        setLogoErrors={setLogoErrors}\n        isLoggedIn={isLoggedIn}\n        onSubmit={onSubmit}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,sJAAc;IAE5B,MAAM,EACJ,IAAI,EACJ,OAAO,EACP,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,UAAU,EACV,aAAa,EACb,iBAAiB,EACjB,oBAAoB,EACpB,aAAa,EACb,gBAAgB,EAChB,aAAa,EACb,oBAAoB,EACpB,QAAQ,EACR,YAAY,EACZ,MAAM,EACN,YAAY,EACZ,QAAQ,EACR,aAAa,EACb,cAAc,EACd,YAAY,EACZ,cAAc,EACd,YAAY,EACZ,gBAAgB,EAChB,QAAQ,EACR,UAAU,EACX,GAAG,IAAA,4JAAW;IAEf,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;;;;;;;;;;0CAEjB,8OAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;IAKzB;IAEA,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,MAAM,KAAK,GAAG;QACpC,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAyC,EAAE;;;;;;8BACzD,8OAAC,+HAAI;oBAAC,WAAU;;sCACd,8OAAC;4BAAE,WAAU;sCAAsB,EAAE;;;;;;sCACrC,8OAAC,mIAAM;4BAAC,SAAQ;4BAAU,SAAS,IAAM,OAAO,IAAI,CAAC;sCAClD,EAAE;;;;;;;;;;;;;;;;;;IAKb;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyC,EAAE;;;;;;0BAEzD,8OAAC;gBAAK,UAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC,+JAAY;4BACX,UAAU;4BACV,UAAU;4BACV,QAAQ;4BACR,cAAc;4BACd,gBAAgB;4BAChB,eAAe;4BACf,gBAAgB;4BAChB,YAAY;4BACZ,eAAe;4BACf,OAAO;4BACP,UAAU;;;;;;sCAIZ,8OAAC,+JAAY;4BACX,MAAM;4BACN,cAAc;4BACd,UAAU;4BACV,gBAAgB;4BAChB,cAAc;4BACd,sBAAsB;4BACtB,eAAe;4BACf,OAAO;4BACP,cAAc;4BACd,cAAc,CAAC;gCACb,IAAI,GAAG;oCACL,iBAAiB;gCACnB,OAAO;oCACL,iBAAiB;wCAAE,gBAAgB,KAAO;oCAAE;gCAC9C;4BACF;;;;;;;;;;;;;;;;;0BAKN,8OAAC,mKAAc;gBACb,mBAAmB;gBACnB,sBAAsB;gBACtB,eAAe;gBACf,kBAAkB;gBAClB,UAAU;gBACV,UAAU;gBACV,cAAc;gBACd,QAAQ;gBACR,cAAc;gBACd,gBAAgB;gBAChB,eAAe;gBACf,cAAc;gBACd,MAAM;gBACN,cAAc;gBACd,UAAU;gBACV,sBAAsB;gBACtB,eAAe;gBACf,YAAY;gBACZ,eAAe;gBACf,YAAY;gBACZ,UAAU;;;;;;;;;;;;AAIlB"}}]
}