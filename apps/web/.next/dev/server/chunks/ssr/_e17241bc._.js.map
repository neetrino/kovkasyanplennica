{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/components/RelatedProducts.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef, type MouseEvent, type TouchEvent } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { useRouter } from 'next/navigation';\r\nimport { apiClient } from '../lib/api-client';\r\nimport { formatPrice, getStoredCurrency } from '../lib/currency';\r\nimport { getStoredLanguage, type LanguageCode } from '../lib/language';\r\nimport { t } from '../lib/i18n';\r\nimport { useAuth } from '../lib/auth/AuthContext';\r\nimport { CartIcon as CartPngIcon } from './icons/CartIcon';\r\n\r\ninterface RelatedProduct {\r\n  id: string;\r\n  slug: string;\r\n  title: string;\r\n  price: number;\r\n  originalPrice?: number | null;\r\n  compareAtPrice: number | null;\r\n  discountPercent?: number | null;\r\n  image: string | null;\r\n  inStock: boolean;\r\n  brand?: {\r\n    id: string;\r\n    name: string;\r\n  } | null;\r\n  categories?: Array<{\r\n    id: string;\r\n    slug: string;\r\n    title: string;\r\n  }>;\r\n  variants?: Array<{\r\n    options?: Array<{\r\n      key: string;\r\n      value: string;\r\n    }>;\r\n  }>;\r\n}\r\n\r\ninterface RelatedProductsProps {\r\n  categorySlug?: string;\r\n  currentProductId: string;\r\n}\r\n\r\n/**\r\n * RelatedProducts component - displays products from the same category in a carousel\r\n * Shown at the bottom of the single product page\r\n */\r\nexport function RelatedProducts({ categorySlug, currentProductId }: RelatedProductsProps) {\r\n  const router = useRouter();\r\n  const { isLoggedIn } = useAuth();\r\n  const [products, setProducts] = useState<RelatedProduct[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [visibleCards, setVisibleCards] = useState(4);\r\n  const [addingToCart, setAddingToCart] = useState<Set<string>>(new Set());\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startX, setStartX] = useState(0);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const [hasMoved, setHasMoved] = useState(false);\r\n  const carouselRef = useRef<HTMLDivElement>(null);\r\n  // Initialize language with 'en' to match server-side default and prevent hydration mismatch\r\n  const [language, setLanguage] = useState<LanguageCode>('en');\r\n  const [imageErrors, setImageErrors] = useState<Set<string>>(new Set());\r\n\r\n  // Initialize language from localStorage after mount to prevent hydration mismatch\r\n  useEffect(() => {\r\n    setLanguage(getStoredLanguage());\r\n    \r\n    const handleLanguageUpdate = () => {\r\n      setLanguage(getStoredLanguage());\r\n    };\r\n    \r\n    window.addEventListener('language-updated', handleLanguageUpdate);\r\n    return () => {\r\n      window.removeEventListener('language-updated', handleLanguageUpdate);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchRelatedProducts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Build params - if no categorySlug, fetch all products\r\n        const params: Record<string, string> = {\r\n          limit: '30', // Fetch more to ensure we have 10 after filtering\r\n          lang: language,\r\n        };\r\n        \r\n        if (categorySlug) {\r\n          params.category = categorySlug;\r\n          console.log('[RelatedProducts] Fetching related products for category:', categorySlug);\r\n        } else {\r\n          console.log('[RelatedProducts] No categorySlug, fetching all products');\r\n        }\r\n        \r\n        const response = await apiClient.get<{\r\n          data: RelatedProduct[];\r\n          meta: {\r\n            total: number;\r\n          };\r\n        }>('/api/v1/products', {\r\n          params,\r\n        });\r\n\r\n        console.log('[RelatedProducts] Received products:', response.data.length);\r\n        // Filter out current product and take exactly 10\r\n        const filtered = response.data.filter(p => p.id !== currentProductId);\r\n        console.log('[RelatedProducts] After filtering current product:', filtered.length);\r\n        const finalProducts = filtered.slice(0, 10);\r\n        console.log('[RelatedProducts] Final products to display:', finalProducts.length);\r\n        setProducts(finalProducts);\r\n      } catch (error) {\r\n        console.error('[RelatedProducts] Error fetching related products:', error);\r\n        setProducts([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRelatedProducts();\r\n  }, [categorySlug, currentProductId]);\r\n\r\n  // Determine visible cards based on screen size\r\n  useEffect(() => {\r\n    const updateVisibleCards = () => {\r\n      const width = window.innerWidth;\r\n      if (width < 640) {\r\n        setVisibleCards(1); // mobile\r\n      } else if (width < 1024) {\r\n        setVisibleCards(2); // tablet\r\n      } else if (width < 1280) {\r\n        setVisibleCards(3); // desktop\r\n      } else {\r\n        setVisibleCards(4); // large desktop\r\n      }\r\n    };\r\n\r\n    updateVisibleCards();\r\n    window.addEventListener('resize', updateVisibleCards);\r\n    return () => window.removeEventListener('resize', updateVisibleCards);\r\n  }, []);\r\n\r\n  // Auto-rotate carousel\r\n  useEffect(() => {\r\n    if (products.length <= visibleCards || isDragging) return; // Don't auto-rotate if all products are visible or if dragging\r\n    \r\n    const interval = setInterval(() => {\r\n      setCurrentIndex((prevIndex) => {\r\n        const maxIndex = Math.max(0, products.length - visibleCards);\r\n        return prevIndex >= maxIndex ? 0 : prevIndex + 1;\r\n      });\r\n    }, 5000); // Change every 5 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [products.length, visibleCards, isDragging]);\r\n\r\n  // Adjust currentIndex when visibleCards changes\r\n  useEffect(() => {\r\n    const maxIndex = Math.max(0, products.length - visibleCards);\r\n    setCurrentIndex((prevIndex) => {\r\n      if (prevIndex > maxIndex) {\r\n        return maxIndex;\r\n      }\r\n      return prevIndex;\r\n    });\r\n  }, [visibleCards, products.length]);\r\n\r\n  const maxIndex = Math.max(0, products.length - visibleCards);\r\n\r\n  const goToPrevious = () => {\r\n    setCurrentIndex((prevIndex) => {\r\n      return prevIndex === 0 ? maxIndex : prevIndex - 1;\r\n    });\r\n  };\r\n\r\n  const goToNext = () => {\r\n    setCurrentIndex((prevIndex) => {\r\n      return prevIndex >= maxIndex ? 0 : prevIndex + 1;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Handle mouse down for dragging\r\n   */\r\n  const handleMouseDown = (e: MouseEvent<HTMLDivElement>) => {\r\n    if (!carouselRef.current) return;\r\n    setHasMoved(false);\r\n    setIsDragging(true);\r\n    setStartX(e.pageX - carouselRef.current.offsetLeft);\r\n    setScrollLeft(currentIndex);\r\n  };\r\n\r\n  /**\r\n   * Handle mouse move for dragging\r\n   */\r\n  const handleMouseMove = (e: MouseEvent<HTMLDivElement>) => {\r\n    if (!isDragging || !carouselRef.current) return;\r\n    const x = e.pageX - carouselRef.current.offsetLeft;\r\n    const deltaX = Math.abs(x - startX);\r\n    \r\n    // Only consider it dragging if mouse moved more than 5px\r\n    if (deltaX > 5) {\r\n      setHasMoved(true);\r\n      e.preventDefault();\r\n      const walk = (x - startX) * 2; // Scroll speed multiplier\r\n      const cardWidth = 100 / visibleCards;\r\n      const newIndex = Math.round((scrollLeft - walk / (carouselRef.current.offsetWidth / 100)) / cardWidth);\r\n      const clampedIndex = Math.max(0, Math.min(maxIndex, newIndex));\r\n      setCurrentIndex(clampedIndex);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle mouse up/leave to stop dragging\r\n   */\r\n  const handleMouseUp = () => {\r\n    const wasDragging = isDragging;\r\n    const didMove = hasMoved;\r\n    setIsDragging(false);\r\n    // Reset hasMoved after a short delay to allow click events to process\r\n    // Only reset if we were actually dragging\r\n    if (wasDragging && didMove) {\r\n      setTimeout(() => setHasMoved(false), 150);\r\n    } else {\r\n      setHasMoved(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle touch start for mobile dragging\r\n   */\r\n  const handleTouchStart = (e: TouchEvent<HTMLDivElement>) => {\r\n    if (!carouselRef.current) return;\r\n    setHasMoved(false);\r\n    setIsDragging(true);\r\n    setStartX(e.touches[0].pageX - carouselRef.current.offsetLeft);\r\n    setScrollLeft(currentIndex);\r\n  };\r\n\r\n  /**\r\n   * Handle touch move for mobile dragging\r\n   */\r\n  const handleTouchMove = (e: TouchEvent<HTMLDivElement>) => {\r\n    if (!isDragging || !carouselRef.current) return;\r\n    const x = e.touches[0].pageX - carouselRef.current.offsetLeft;\r\n    const deltaX = Math.abs(x - startX);\r\n    \r\n    // Only consider it dragging if touch moved more than 5px\r\n    if (deltaX > 5) {\r\n      setHasMoved(true);\r\n      const walk = (x - startX) * 2;\r\n      const cardWidth = 100 / visibleCards;\r\n      const newIndex = Math.round((scrollLeft - walk / (carouselRef.current.offsetWidth / 100)) / cardWidth);\r\n      const clampedIndex = Math.max(0, Math.min(maxIndex, newIndex));\r\n      setCurrentIndex(clampedIndex);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle touch end to stop dragging\r\n   */\r\n  const handleTouchEnd = () => {\r\n    const wasDragging = isDragging;\r\n    const didMove = hasMoved;\r\n    setIsDragging(false);\r\n    // Reset hasMoved after a short delay to allow click events to process\r\n    // Only reset if we were actually dragging\r\n    if (wasDragging && didMove) {\r\n      setTimeout(() => setHasMoved(false), 150);\r\n    } else {\r\n      setHasMoved(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle wheel scroll for horizontal scrolling\r\n   */\r\n  const handleWheel = (e: React.WheelEvent<HTMLDivElement>) => {\r\n    if (e.deltaY === 0) return;\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? 1 : -1;\r\n    setCurrentIndex((prevIndex) => {\r\n      const newIndex = prevIndex + delta;\r\n      return Math.max(0, Math.min(maxIndex, newIndex));\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Handle adding product to cart\r\n   */\r\n  const handleAddToCart = async (e: MouseEvent, product: RelatedProduct) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    \r\n    if (!product.inStock) {\r\n      return;\r\n    }\r\n\r\n    if (!isLoggedIn) {\r\n      router.push(`/login?redirect=/products/${product.slug}`);\r\n      return;\r\n    }\r\n\r\n    setAddingToCart(prev => new Set(prev).add(product.id));\r\n\r\n    try {\r\n      // Get product details to get variant ID\r\n      interface ProductDetails {\r\n        id: string;\r\n        slug: string;\r\n        variants?: Array<{\r\n          id: string;\r\n          sku: string;\r\n          price: number;\r\n          stock: number;\r\n          available: boolean;\r\n        }>;\r\n      }\r\n\r\n      const encodedSlug = encodeURIComponent(product.slug.trim());\r\n      const productDetails = await apiClient.get<ProductDetails>(`/api/v1/products/${encodedSlug}`);\r\n\r\n      if (!productDetails.variants || productDetails.variants.length === 0) {\r\n        alert('No variants available');\r\n        return;\r\n      }\r\n\r\n      const variantId = productDetails.variants[0].id;\r\n      \r\n      await apiClient.post(\r\n        '/api/v1/cart/items',\r\n        {\r\n          productId: product.id,\r\n          variantId: variantId,\r\n          quantity: 1,\r\n        }\r\n      );\r\n\r\n      // Trigger cart update event\r\n      window.dispatchEvent(new Event('cart-updated'));\r\n    } catch (error: any) {\r\n      console.error('[RelatedProducts] Error adding to cart:', error);\r\n      if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {\r\n        router.push(`/login?redirect=/products/${product.slug}`);\r\n      } else {\r\n        alert('Failed to add product to cart. Please try again.');\r\n      }\r\n    } finally {\r\n      setAddingToCart(prev => {\r\n        const next = new Set(prev);\r\n        next.delete(product.id);\r\n        return next;\r\n      });\r\n    }\r\n  };\r\n\r\n  const currency = getStoredCurrency();\r\n\r\n  // Always show the section, even if no products (will show loading or empty state)\r\n  return (\r\n    <section className=\"py-12 mt-20 border-t border-gray-200\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <h2 className=\"text-3xl font-bold text-gray-900 mb-10\">{t(language, 'product.related_products_title')}</h2>\r\n        \r\n        {loading ? (\r\n          // Loading state\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((i) => (\r\n              <div key={i} className=\"animate-pulse\">\r\n                <div className=\"aspect-square bg-gray-200 rounded-lg mb-4\"></div>\r\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : products.length === 0 ? (\r\n          // Empty state\r\n          <div className=\"text-center py-12\">\r\n            <p className=\"text-gray-500 text-lg\">{t(language, 'product.noRelatedProducts')}</p>\r\n          </div>\r\n        ) : (\r\n          // Products Carousel\r\n          <div className=\"relative\">\r\n            {/* Carousel Container */}\r\n            <div \r\n              ref={carouselRef}\r\n              className=\"relative overflow-hidden cursor-grab active:cursor-grabbing select-none\"\r\n              onMouseDown={handleMouseDown}\r\n              onMouseMove={handleMouseMove}\r\n              onMouseUp={handleMouseUp}\r\n              onMouseLeave={handleMouseUp}\r\n              onTouchStart={handleTouchStart}\r\n              onTouchMove={handleTouchMove}\r\n              onTouchEnd={handleTouchEnd}\r\n              onWheel={handleWheel}\r\n            >\r\n              <div\r\n                className=\"flex items-stretch\"\r\n                style={{\r\n                  transform: `translateX(-${currentIndex * (100 / visibleCards)}%)`,\r\n                  transition: isDragging ? 'none' : 'transform 0.5s ease-in-out',\r\n                }}\r\n              >\r\n                {products.map((product) => {\r\n                  const hasImage = product.image && !imageErrors.has(product.id);\r\n                  // Get category name from product categories\r\n                  const categoryName = product.categories && product.categories.length > 0 \r\n                    ? product.categories.map(c => c.title).join(', ')\r\n                    : product.brand?.name || 'Product';\r\n                  \r\n                  return (\r\n                    <div\r\n                      key={product.id}\r\n                      className=\"flex-shrink-0 px-3 h-full\"\r\n                      style={{ width: `${100 / visibleCards}%` }}\r\n                    >\r\n                      <div className=\"group relative h-full flex flex-col\">\r\n                        <Link\r\n                          href={`/products/${product.slug}`}\r\n                          className=\"block cursor-pointer flex-1 flex flex-col\"\r\n                          onClick={(e) => {\r\n                            // Prevent navigation only if we actually dragged (moved more than threshold)\r\n                            if (hasMoved) {\r\n                              e.preventDefault();\r\n                              e.stopPropagation();\r\n                              return;\r\n                            }\r\n                            // Allow navigation - Link will handle it\r\n                            console.log('[RelatedProducts] Navigating to product:', product.slug);\r\n                          }}\r\n                        >\r\n                          <div className=\"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow flex flex-col h-full\">\r\n                            {/* Product Image */}\r\n                            <div className=\"relative aspect-square bg-gray-100 overflow-hidden flex-shrink-0\">\r\n                              {hasImage ? (\r\n                                <Image\r\n                                  src={product.image!}\r\n                                  alt={product.title}\r\n                                  fill\r\n                                  className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                                  sizes=\"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw\"\r\n                                  unoptimized\r\n                                  onError={() => {\r\n                                    setImageErrors(prev => new Set(prev).add(product.id));\r\n                                  }}\r\n                                />\r\n                              ) : (\r\n                                <div className=\"w-full h-full bg-gray-200 flex items-center justify-center\">\r\n                                  <span className=\"text-gray-400 text-sm\">{t(language, 'common.messages.noImage')}</span>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n\r\n                            {/* Product Info */}\r\n                            <div className=\"p-4 flex flex-col flex-1\">\r\n                              {/* Title */}\r\n                              <h3 className=\"text-sm font-semibold text-gray-900 mb-1 line-clamp-2 group-hover:text-gray-600 transition-colors\">\r\n                                {product.title}\r\n                              </h3>\r\n\r\n                              {/* Category */}\r\n                              <p className=\"text-xs text-gray-500 mb-3\">\r\n                                {categoryName}\r\n                              </p>\r\n\r\n                              {/* Price */}\r\n                              <div className=\"flex flex-col gap-1 mt-auto\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <span className=\"text-lg font-bold text-gray-900\">\r\n                                    {formatPrice(product.price, currency)}\r\n                                  </span>\r\n                                  {product.discountPercent && product.discountPercent > 0 && (\r\n                                    <span className=\"text-xs font-semibold text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded\">\r\n                                      -{product.discountPercent}%\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                                {(product.originalPrice && product.originalPrice > product.price) || \r\n                                 (product.compareAtPrice && product.compareAtPrice > product.price) ? (\r\n                                  <span className=\"text-sm text-gray-500 line-through decoration-gray-400\">\r\n                                    {formatPrice(\r\n                                      (product.originalPrice && product.originalPrice > product.price) \r\n                                        ? product.originalPrice \r\n                                        : (product.compareAtPrice || 0),\r\n                                      currency\r\n                                    )}\r\n                                  </span>\r\n                                ) : null}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </Link>\r\n\r\n                        {/* Cart Icon Button */}\r\n                        <button\r\n                          onClick={(e) => handleAddToCart(e, product)}\r\n                          disabled={!product.inStock || addingToCart.has(product.id)}\r\n                          className=\"absolute bottom-3 right-3 w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 bg-white/90 backdrop-blur-sm shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed z-20 group/cart\"\r\n                          title={product.inStock ? 'Add to cart' : 'Out of stock'}\r\n                          aria-label={product.inStock ? 'Add to cart' : 'Out of stock'}\r\n                        >\r\n                          {addingToCart.has(product.id) ? (\r\n                            <svg className=\"animate-spin h-5 w-5 text-green-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                            </svg>\r\n                          ) : (\r\n                            <div className={`transition-colors duration-200 ${product.inStock ? 'text-gray-600 group-hover/cart:text-green-600' : 'text-gray-400'}`}>\r\n                              <CartPngIcon size={24} />\r\n                            </div>\r\n                          )}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Navigation Arrows - Only show if there are more products than visible */}\r\n            {products.length > visibleCards && (\r\n              <>\r\n                <button\r\n                  onClick={goToPrevious}\r\n                  className=\"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-12 bg-white/90 hover:bg-white text-gray-900 p-2 rounded-full shadow-lg transition-all z-20 cursor-pointer hover:scale-110\"\r\n                  aria-label=\"Previous products\"\r\n                >\r\n                  <svg\r\n                    className=\"w-5 h-5\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2.5}\r\n                      d=\"M15 19l-7-7 7-7\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n\r\n                <button\r\n                  onClick={goToNext}\r\n                  className=\"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-12 bg-white/90 hover:bg-white text-gray-900 p-2 rounded-full shadow-lg transition-all z-20 cursor-pointer hover:scale-110\"\r\n                  aria-label=\"Next products\"\r\n                >\r\n                  <svg\r\n                    className=\"w-5 h-5\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2.5}\r\n                      d=\"M9 5l7 7-7 7\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            {/* Dots Indicator - Only show if there are more products than visible */}\r\n            {products.length > visibleCards && (\r\n              <div className=\"flex justify-center gap-2 mt-6\">\r\n                {Array.from({ length: Math.ceil(products.length / visibleCards) }).map((_, index) => {\r\n                  const startIndex = index * visibleCards;\r\n                  const endIndex = Math.min(startIndex + visibleCards, products.length);\r\n                  const isActive = currentIndex >= startIndex && currentIndex < endIndex;\r\n                  \r\n                  return (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setCurrentIndex(startIndex)}\r\n                      className={`h-2 rounded-full transition-all duration-300 ${\r\n                        isActive\r\n                          ? 'bg-gray-900 w-8'\r\n                          : 'bg-gray-300 hover:bg-gray-400 w-2'\r\n                      }`}\r\n                      aria-label={`Go to slide ${index + 1}`}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 716, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Button.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { ButtonHTMLAttributes, forwardRef, ReactElement } from 'react';\r\n\r\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\r\n  function Button(\r\n    { variant = 'primary', size = 'md', className = '', children, ...props },\r\n    ref\r\n  ): ReactElement {\r\n    const baseStyles = 'font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n    \r\n    const variantStyles = {\r\n      primary: 'bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-900',\r\n      secondary: 'bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500',\r\n      outline: 'bg-transparent text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500',\r\n      ghost: 'bg-transparent text-gray-900 hover:bg-gray-100 focus:ring-gray-500',\r\n    };\r\n    \r\n    const sizeStyles = {\r\n      sm: 'px-3 py-1.5 text-sm',\r\n      md: 'px-4 py-2 text-base',\r\n      lg: 'px-6 py-3 text-lg',\r\n    };\r\n    \r\n    return (\r\n      <button\r\n        ref={ref}\r\n        className={`${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${className}`}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,MAAM,uBAAS,IAAA,mNAAU,EAC9B,SAAS,OACP,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,EACxE,GAAG;IAEH,MAAM,aAAa;IAEnB,MAAM,gBAAgB;QACpB,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,GAAG,WAAW,CAAC,EAAE,aAAa,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;QACpF,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Card.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { HTMLAttributes, forwardRef, ReactElement } from 'react';\r\n\r\ninterface CardProps extends HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Card = forwardRef<HTMLDivElement, CardProps>(\r\n  function Card({ className = '', children, ...props }, ref): ReactElement {\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={`bg-white border border-gray-200 rounded-lg shadow-sm ${className}`}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,MAAM,qBAAO,IAAA,mNAAU,EAC5B,SAAS,KAAK,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,GAAG;IACvD,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAC,qDAAqD,EAAE,WAAW;QAC7E,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/Input.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { InputHTMLAttributes, forwardRef } from 'react';\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  label?: string;\r\n  error?: string;\r\n}\r\n\r\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\r\n  function Input({ label, error, className = '', onKeyDown, ...props }, ref) {\r\n    // Ensure pipe character (|) works in all input fields\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      // Allow pipe character (|) - key code 220 or Shift+Backslash\r\n      if (e.key === '|' || e.keyCode === 220 || (e.shiftKey && e.key === '\\\\')) {\r\n        // Allow the default behavior for pipe character\r\n        return;\r\n      }\r\n      \r\n      // Call original onKeyDown if provided\r\n      if (onKeyDown) {\r\n        onKeyDown(e);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"w-full\">\r\n        {label && (\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            {label}\r\n          </label>\r\n        )}\r\n        <input\r\n          ref={ref}\r\n          className={`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed ${\r\n            error ? 'border-error focus:ring-error' : 'border-gray-300'\r\n          } ${className}`}\r\n          onKeyDown={handleKeyDown}\r\n          {...props}\r\n        />\r\n        {error && (\r\n          <p className=\"mt-1 text-sm text-error\">{error}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,MAAM,sBAAQ,IAAA,mNAAU,EAC7B,SAAS,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,GAAG;IACvE,sDAAsD;IACtD,MAAM,gBAAgB,CAAC;QACrB,6DAA6D;QAC7D,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,OAAO,KAAK,OAAQ,EAAE,QAAQ,IAAI,EAAE,GAAG,KAAK,MAAO;YACxE,gDAAgD;YAChD;QACF;QAEA,sCAAsC;QACtC,IAAI,WAAW;YACb,UAAU;QACZ;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;YACZ,uBACC,8OAAC;gBAAM,WAAU;0BACd;;;;;;0BAGL,8OAAC;gBACC,KAAK;gBACL,WAAW,CAAC,gKAAgK,EAC1K,QAAQ,kCAAkC,kBAC3C,CAAC,EAAE,WAAW;gBACf,WAAW;gBACV,GAAG,KAAK;;;;;;YAEV,uBACC,8OAAC;gBAAE,WAAU;0BAA2B;;;;;;;;;;;;AAIhD"}},
    {"offset": {"line": 840, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/packages/ui/index.ts"],"sourcesContent":["export { Button } from './Button';\r\nexport { Card } from './Card';\r\nexport { Input } from './Input';\r\n\r\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 851, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/components/ProductReviews.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport type { FormEvent } from 'react';\r\nimport { Button } from '@shop/ui';\r\nimport { useAuth } from '../lib/auth/AuthContext';\r\nimport { useTranslation } from '../lib/i18n-client';\r\nimport { apiClient } from '../lib/api-client';\r\n\r\ninterface Review {\r\n  id: string;\r\n  userId: string;\r\n  userName: string;\r\n  rating: number;\r\n  comment: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface ProductReviewsProps {\r\n  productId?: string; // For backward compatibility\r\n  productSlug?: string; // Preferred: use slug for API calls\r\n}\r\n\r\nexport function ProductReviews({ productId, productSlug }: ProductReviewsProps) {\r\n  const { isLoggedIn, user } = useAuth();\r\n  const { t } = useTranslation();\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [rating, setRating] = useState(0);\r\n  const [hoveredRating, setHoveredRating] = useState(0);\r\n  const [comment, setComment] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadReviews();\r\n  }, [productId, productSlug]);\r\n\r\n  const loadReviews = async () => {\r\n    try {\r\n      // Use slug if available, otherwise fall back to productId\r\n      const identifier = productSlug || productId;\r\n      if (!identifier) {\r\n        console.warn('‚ö†Ô∏è [PRODUCT REVIEWS] No product identifier provided');\r\n        setReviews([]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      console.log('üìù [PRODUCT REVIEWS] Loading reviews for product:', identifier);\r\n      setLoading(true);\r\n      const data = await apiClient.get<Review[]>(`/api/v1/products/${identifier}/reviews`);\r\n      console.log('‚úÖ [PRODUCT REVIEWS] Reviews loaded:', data?.length || 0);\r\n      setReviews(data || []);\r\n    } catch (error: any) {\r\n      console.error('‚ùå [PRODUCT REVIEWS] Error loading reviews:', error);\r\n      // If 404, product might not have reviews yet - that's okay\r\n      if (error.status !== 404) {\r\n        console.error('Failed to load reviews:', error);\r\n      }\r\n      setReviews([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!isLoggedIn) {\r\n      alert(t('common.reviews.loginRequired'));\r\n      return;\r\n    }\r\n\r\n    if (rating === 0) {\r\n      alert(t('common.reviews.ratingRequired'));\r\n      return;\r\n    }\r\n\r\n    if (!comment.trim()) {\r\n      alert(t('common.reviews.commentRequired'));\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      // Use slug if available, otherwise fall back to productId\r\n      const identifier = productSlug || productId;\r\n      if (!identifier) {\r\n        alert(t('common.reviews.submitError'));\r\n        return;\r\n      }\r\n\r\n      console.log('üìù [PRODUCT REVIEWS] Submitting review:', { identifier, rating, commentLength: comment.length });\r\n      \r\n      const newReview = await apiClient.post<Review>(`/api/v1/products/${identifier}/reviews`, {\r\n        rating,\r\n        comment: comment.trim(),\r\n      });\r\n\r\n      console.log('‚úÖ [PRODUCT REVIEWS] Review submitted successfully:', newReview.id);\r\n\r\n      // Add new review to the list\r\n      setReviews([newReview, ...reviews]);\r\n      setRating(0);\r\n      setComment('');\r\n      setShowForm(false);\r\n      \r\n      // Dispatch event to update rating on product page\r\n      if (typeof window !== 'undefined') {\r\n        window.dispatchEvent(new Event('review-updated'));\r\n      }\r\n    } catch (error: any) {\r\n      console.error('‚ùå [PRODUCT REVIEWS] Error submitting review:', error);\r\n      \r\n      // Handle specific error cases\r\n      if (error.status === 409) {\r\n        // User already has a review - load it and show in edit mode\r\n        try {\r\n          const identifier = productSlug || productId;\r\n          if (!identifier) {\r\n            alert(t('common.reviews.alreadyReviewed') || 'You have already reviewed this product');\r\n            return;\r\n          }\r\n\r\n          console.log('üìù [PRODUCT REVIEWS] Loading existing review for user');\r\n          const existingReview = await apiClient.get<Review>(`/api/v1/products/${identifier}/reviews?my=true`);\r\n          \r\n          if (existingReview) {\r\n            // Add to reviews list if not already there\r\n            const reviewExists = reviews.some(r => r.id === existingReview.id);\r\n            if (!reviewExists) {\r\n              setReviews([existingReview, ...reviews]);\r\n            }\r\n            \r\n            // Show in edit mode\r\n            handleEditReview(existingReview);\r\n            alert(t('common.reviews.alreadyReviewed') || 'You have already reviewed this product. You can update your review below.');\r\n          } else {\r\n            alert(t('common.reviews.alreadyReviewed') || 'You have already reviewed this product');\r\n          }\r\n        } catch (loadError: any) {\r\n          console.error('‚ùå [PRODUCT REVIEWS] Error loading existing review:', loadError);\r\n          // Fallback to checking local reviews\r\n          if (userReview) {\r\n            handleEditReview(userReview);\r\n            alert(t('common.reviews.alreadyReviewed') || 'You have already reviewed this product. You can update your review below.');\r\n          } else {\r\n            alert(t('common.reviews.alreadyReviewed') || 'You have already reviewed this product');\r\n          }\r\n        }\r\n      } else if (error.status === 401) {\r\n        alert(t('common.reviews.loginRequired'));\r\n      } else {\r\n        alert(t('common.reviews.submitError'));\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const averageRating = reviews.length > 0\r\n    ? reviews.reduce((sum, review) => sum + review.rating, 0) / reviews.length\r\n    : 0;\r\n\r\n  const ratingDistribution = [5, 4, 3, 2, 1].map((star) => ({\r\n    star,\r\n    count: reviews.filter((r) => r.rating === star).length,\r\n    percentage: reviews.length > 0\r\n      ? (reviews.filter((r) => r.rating === star).length / reviews.length) * 100\r\n      : 0,\r\n  }));\r\n\r\n  // Get user's review if exists\r\n  const userReview = user ? reviews.find(r => r.userId === user.id) : null;\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    // Use browser's default locale for date formatting\r\n    return date.toLocaleDateString(undefined, {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n    });\r\n  };\r\n\r\n  const handleEditReview = (review: Review) => {\r\n    setEditingReviewId(review.id);\r\n    setRating(review.rating);\r\n    setComment(review.comment || '');\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingReviewId(null);\r\n    setRating(0);\r\n    setComment('');\r\n    setShowForm(false);\r\n  };\r\n\r\n  const handleUpdateReview = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!isLoggedIn || !editingReviewId) {\r\n      return;\r\n    }\r\n\r\n    if (rating === 0) {\r\n      alert(t('common.reviews.ratingRequired'));\r\n      return;\r\n    }\r\n\r\n    if (!comment.trim()) {\r\n      alert(t('common.reviews.commentRequired'));\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      console.log('üìù [PRODUCT REVIEWS] Updating review:', { reviewId: editingReviewId, rating, commentLength: comment.length });\r\n      \r\n      const updatedReview = await apiClient.put<Review>(`/api/v1/reviews/${editingReviewId}`, {\r\n        rating,\r\n        comment: comment.trim(),\r\n      });\r\n\r\n      console.log('‚úÖ [PRODUCT REVIEWS] Review updated successfully:', updatedReview.id);\r\n\r\n      // Update review in the list\r\n      setReviews(reviews.map(r => r.id === editingReviewId ? updatedReview : r));\r\n      setRating(0);\r\n      setComment('');\r\n      setEditingReviewId(null);\r\n      setShowForm(false);\r\n      \r\n      // Dispatch event to update rating on product page\r\n      if (typeof window !== 'undefined') {\r\n        window.dispatchEvent(new Event('review-updated'));\r\n      }\r\n    } catch (error: any) {\r\n      console.error('‚ùå [PRODUCT REVIEWS] Error updating review:', error);\r\n      \r\n      // Handle specific error cases\r\n      if (error.status === 401) {\r\n        alert(t('common.reviews.loginRequired'));\r\n      } else if (error.status === 403) {\r\n        alert('You can only update your own reviews');\r\n      } else {\r\n        alert(t('common.reviews.submitError'));\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\"></div>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"h-24 bg-gray-200 rounded\"></div>\r\n            <div className=\"h-24 bg-gray-200 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 border-t border-gray-200\">\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\r\n          {t('common.reviews.title')}\r\n        </h2>\r\n\r\n        {/* Rating Summary */}\r\n        <div className=\"flex flex-col md:flex-row gap-8 mb-8\">\r\n          <div className=\"flex flex-col items-center md:items-start\">\r\n            <div className=\"text-5xl font-bold text-gray-900 mb-2\">\r\n              {averageRating.toFixed(1)}\r\n            </div>\r\n            <div className=\"flex items-center gap-1 mb-2\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <svg\r\n                  key={star}\r\n                  className={`w-6 h-6 ${\r\n                    star <= Math.round(averageRating)\r\n                      ? 'text-yellow-400'\r\n                      : 'text-gray-300'\r\n                  }`}\r\n                  fill=\"currentColor\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                </svg>\r\n              ))}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600\">\r\n              {reviews.length} {reviews.length === 1 \r\n                ? t('common.reviews.review')\r\n                : t('common.reviews.reviews')}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Rating Distribution */}\r\n          <div className=\"flex-1\">\r\n            {ratingDistribution.map(({ star, count, percentage }) => (\r\n              <div key={star} className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"flex items-center gap-1 w-20\">\r\n                  <span className=\"text-sm text-gray-600 w-4\">{star}</span>\r\n                  <svg className=\"w-4 h-4 text-yellow-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"flex-1 bg-gray-200 rounded-full h-2\">\r\n                  <div\r\n                    className=\"bg-yellow-400 h-2 rounded-full\"\r\n                    style={{ width: `${percentage}%` }}\r\n                  />\r\n                </div>\r\n                <span className=\"text-sm text-gray-600 w-12 text-right\">{count}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Write Review Button */}\r\n        {!showForm && (\r\n          <Button\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              if (!isLoggedIn) {\r\n                alert(t('common.reviews.loginRequired'));\r\n                return;\r\n              }\r\n              setShowForm(true);\r\n            }}\r\n            className=\"mb-8\"\r\n          >\r\n            {t('common.reviews.writeReview')}\r\n          </Button>\r\n        )}\r\n\r\n        {/* Review Form */}\r\n        {showForm && (\r\n          <form onSubmit={editingReviewId ? handleUpdateReview : handleSubmit} className=\"mb-8 p-6 bg-gray-50 rounded-lg\">\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">\r\n              {editingReviewId ? 'Update Your Review' : t('common.reviews.writeReview')}\r\n            </h3>\r\n\r\n            {/* Rating Selector */}\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {t('common.reviews.rating')} *\r\n              </label>\r\n              <div className=\"flex items-center gap-2\">\r\n                {[1, 2, 3, 4, 5].map((star) => (\r\n                  <button\r\n                    key={star}\r\n                    type=\"button\"\r\n                    onClick={() => setRating(star)}\r\n                    onMouseEnter={() => setHoveredRating(star)}\r\n                    onMouseLeave={() => setHoveredRating(0)}\r\n                    className=\"focus:outline-none\"\r\n                  >\r\n                    <svg\r\n                      className={`w-8 h-8 transition-colors ${\r\n                        star <= (hoveredRating || rating)\r\n                          ? 'text-yellow-400'\r\n                          : 'text-gray-300'\r\n                      }`}\r\n                      fill=\"currentColor\"\r\n                      viewBox=\"0 0 20 20\"\r\n                    >\r\n                      <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                    </svg>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Comment Textarea */}\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {t('common.reviews.comment')} *\r\n              </label>\r\n              <textarea\r\n                value={comment}\r\n                onChange={(e) => setComment(e.target.value)}\r\n                rows={5}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                placeholder={t('common.reviews.commentPlaceholder')}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Form Actions */}\r\n            <div className=\"flex gap-4\">\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"primary\"\r\n                disabled={submitting}\r\n              >\r\n                {submitting\r\n                  ? t('common.reviews.submitting')\r\n                  : editingReviewId\r\n                    ? 'Update Review'\r\n                    : t('common.reviews.submitReview')}\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={editingReviewId ? handleCancelEdit : () => {\r\n                  setShowForm(false);\r\n                  setRating(0);\r\n                  setComment('');\r\n                }}\r\n              >\r\n                {t('common.buttons.cancel')}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        )}\r\n      </div>\r\n\r\n      {/* Reviews List */}\r\n      {reviews.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-gray-600 mb-4\">\r\n            {t('common.reviews.noReviews')}\r\n          </p>\r\n          {!showForm && (\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => {\r\n                if (!isLoggedIn) {\r\n                  alert(t('common.reviews.loginRequired'));\r\n                  return;\r\n                }\r\n                setShowForm(true);\r\n              }}\r\n            >\r\n              {t('common.reviews.writeReview')}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {reviews.map((review) => (\r\n            <div key={review.id} className=\"border-b border-gray-200 pb-6 last:border-b-0\">\r\n              <div className=\"flex items-start justify-between mb-2\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-semibold text-gray-900 mb-1\">\r\n                    {review.userName}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <div className=\"flex items-center gap-1\">\r\n                      {[1, 2, 3, 4, 5].map((star) => (\r\n                        <svg\r\n                          key={star}\r\n                          className={`w-4 h-4 ${\r\n                            star <= review.rating\r\n                              ? 'text-yellow-400'\r\n                              : 'text-gray-300'\r\n                          }`}\r\n                          fill=\"currentColor\"\r\n                          viewBox=\"0 0 20 20\"\r\n                        >\r\n                          <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                        </svg>\r\n                      ))}\r\n                    </div>\r\n                    <span className=\"text-sm text-gray-500\">\r\n                      {formatDate(review.createdAt)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {user && review.userId === user.id && (\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleEditReview(review)}\r\n                    className=\"ml-4\"\r\n                  >\r\n                    Edit\r\n                  </Button>\r\n                )}\r\n              </div>\r\n              <p className=\"text-gray-700 whitespace-pre-wrap\">{review.comment}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AACA;AACA;AACA;AAPA;;;;;;;AAuBO,SAAS,eAAe,EAAE,SAAS,EAAE,WAAW,EAAuB;IAC5E,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,IAAA,qJAAO;IACpC,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,sJAAc;IAC5B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAgB;IAEtE,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;QAAW;KAAY;IAE3B,MAAM,cAAc;QAClB,IAAI;YACF,0DAA0D;YAC1D,MAAM,aAAa,eAAe;YAClC,IAAI,CAAC,YAAY;gBACf,QAAQ,IAAI,CAAC;gBACb,WAAW,EAAE;gBACb,WAAW;gBACX;YACF;YAEA,QAAQ,GAAG,CAAC,qDAAqD;YACjE,WAAW;YACX,MAAM,OAAO,MAAM,gJAAS,CAAC,GAAG,CAAW,CAAC,iBAAiB,EAAE,WAAW,QAAQ,CAAC;YACnF,QAAQ,GAAG,CAAC,uCAAuC,MAAM,UAAU;YACnE,WAAW,QAAQ,EAAE;QACvB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,8CAA8C;YAC5D,2DAA2D;YAC3D,IAAI,MAAM,MAAM,KAAK,KAAK;gBACxB,QAAQ,KAAK,CAAC,2BAA2B;YAC3C;YACA,WAAW,EAAE;QACf,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,YAAY;YACf,MAAM,EAAE;YACR;QACF;QAEA,IAAI,WAAW,GAAG;YAChB,MAAM,EAAE;YACR;QACF;QAEA,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,MAAM,EAAE;YACR;QACF;QAEA,cAAc;QAEd,IAAI;YACF,0DAA0D;YAC1D,MAAM,aAAa,eAAe;YAClC,IAAI,CAAC,YAAY;gBACf,MAAM,EAAE;gBACR;YACF;YAEA,QAAQ,GAAG,CAAC,2CAA2C;gBAAE;gBAAY;gBAAQ,eAAe,QAAQ,MAAM;YAAC;YAE3G,MAAM,YAAY,MAAM,gJAAS,CAAC,IAAI,CAAS,CAAC,iBAAiB,EAAE,WAAW,QAAQ,CAAC,EAAE;gBACvF;gBACA,SAAS,QAAQ,IAAI;YACvB;YAEA,QAAQ,GAAG,CAAC,sDAAsD,UAAU,EAAE;YAE9E,6BAA6B;YAC7B,WAAW;gBAAC;mBAAc;aAAQ;YAClC,UAAU;YACV,WAAW;YACX,YAAY;YAEZ,kDAAkD;YAClD;;QAGF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,gDAAgD;YAE9D,8BAA8B;YAC9B,IAAI,MAAM,MAAM,KAAK,KAAK;gBACxB,4DAA4D;gBAC5D,IAAI;oBACF,MAAM,aAAa,eAAe;oBAClC,IAAI,CAAC,YAAY;wBACf,MAAM,EAAE,qCAAqC;wBAC7C;oBACF;oBAEA,QAAQ,GAAG,CAAC;oBACZ,MAAM,iBAAiB,MAAM,gJAAS,CAAC,GAAG,CAAS,CAAC,iBAAiB,EAAE,WAAW,gBAAgB,CAAC;oBAEnG,IAAI,gBAAgB;wBAClB,2CAA2C;wBAC3C,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,eAAe,EAAE;wBACjE,IAAI,CAAC,cAAc;4BACjB,WAAW;gCAAC;mCAAmB;6BAAQ;wBACzC;wBAEA,oBAAoB;wBACpB,iBAAiB;wBACjB,MAAM,EAAE,qCAAqC;oBAC/C,OAAO;wBACL,MAAM,EAAE,qCAAqC;oBAC/C;gBACF,EAAE,OAAO,WAAgB;oBACvB,QAAQ,KAAK,CAAC,sDAAsD;oBACpE,qCAAqC;oBACrC,IAAI,YAAY;wBACd,iBAAiB;wBACjB,MAAM,EAAE,qCAAqC;oBAC/C,OAAO;wBACL,MAAM,EAAE,qCAAqC;oBAC/C;gBACF;YACF,OAAO,IAAI,MAAM,MAAM,KAAK,KAAK;gBAC/B,MAAM,EAAE;YACV,OAAO;gBACL,MAAM,EAAE;YACV;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,gBAAgB,QAAQ,MAAM,GAAG,IACnC,QAAQ,MAAM,CAAC,CAAC,KAAK,SAAW,MAAM,OAAO,MAAM,EAAE,KAAK,QAAQ,MAAM,GACxE;IAEJ,MAAM,qBAAqB;QAAC;QAAG;QAAG;QAAG;QAAG;KAAE,CAAC,GAAG,CAAC,CAAC,OAAS,CAAC;YACxD;YACA,OAAO,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,MAAM,MAAM;YACtD,YAAY,QAAQ,MAAM,GAAG,IACzB,AAAC,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,MAAM,MAAM,GAAG,QAAQ,MAAM,GAAI,MACrE;QACN,CAAC;IAED,8BAA8B;IAC9B,MAAM,aAAa,OAAO,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,KAAK,EAAE,IAAI;IAEpE,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,mDAAmD;QACnD,OAAO,KAAK,kBAAkB,CAAC,WAAW;YACxC,MAAM;YACN,OAAO;YACP,KAAK;QACP;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,mBAAmB,OAAO,EAAE;QAC5B,UAAU,OAAO,MAAM;QACvB,WAAW,OAAO,OAAO,IAAI;QAC7B,YAAY;IACd;IAEA,MAAM,mBAAmB;QACvB,mBAAmB;QACnB,UAAU;QACV,WAAW;QACX,YAAY;IACd;IAEA,MAAM,qBAAqB,OAAO;QAChC,EAAE,cAAc;QAEhB,IAAI,CAAC,cAAc,CAAC,iBAAiB;YACnC;QACF;QAEA,IAAI,WAAW,GAAG;YAChB,MAAM,EAAE;YACR;QACF;QAEA,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,MAAM,EAAE;YACR;QACF;QAEA,cAAc;QAEd,IAAI;YACF,QAAQ,GAAG,CAAC,yCAAyC;gBAAE,UAAU;gBAAiB;gBAAQ,eAAe,QAAQ,MAAM;YAAC;YAExH,MAAM,gBAAgB,MAAM,gJAAS,CAAC,GAAG,CAAS,CAAC,gBAAgB,EAAE,iBAAiB,EAAE;gBACtF;gBACA,SAAS,QAAQ,IAAI;YACvB;YAEA,QAAQ,GAAG,CAAC,oDAAoD,cAAc,EAAE;YAEhF,4BAA4B;YAC5B,WAAW,QAAQ,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,kBAAkB,gBAAgB;YACvE,UAAU;YACV,WAAW;YACX,mBAAmB;YACnB,YAAY;YAEZ,kDAAkD;YAClD;;QAGF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,8CAA8C;YAE5D,8BAA8B;YAC9B,IAAI,MAAM,MAAM,KAAK,KAAK;gBACxB,MAAM,EAAE;YACV,OAAO,IAAI,MAAM,MAAM,KAAK,KAAK;gBAC/B,MAAM;YACR,OAAO;gBACL,MAAM,EAAE;YACV;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;IAKzB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX,EAAE;;;;;;kCAIL,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACZ,cAAc,OAAO,CAAC;;;;;;kDAEzB,8OAAC;wCAAI,WAAU;kDACZ;4CAAC;4CAAG;4CAAG;4CAAG;4CAAG;yCAAE,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;gDAEC,WAAW,CAAC,QAAQ,EAClB,QAAQ,KAAK,KAAK,CAAC,iBACf,oBACA,iBACJ;gDACF,MAAK;gDACL,SAAQ;0DAER,cAAA,8OAAC;oDAAK,GAAE;;;;;;+CATH;;;;;;;;;;kDAaX,8OAAC;wCAAI,WAAU;;4CACZ,QAAQ,MAAM;4CAAC;4CAAE,QAAQ,MAAM,KAAK,IACjC,EAAE,2BACF,EAAE;;;;;;;;;;;;;0CAKV,8OAAC;gCAAI,WAAU;0CACZ,mBAAmB,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,iBAClD,8OAAC;wCAAe,WAAU;;0DACxB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAA6B;;;;;;kEAC7C,8OAAC;wDAAI,WAAU;wDAA0B,MAAK;wDAAe,SAAQ;kEACnE,cAAA,8OAAC;4DAAK,GAAE;;;;;;;;;;;;;;;;;0DAGZ,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDACC,WAAU;oDACV,OAAO;wDAAE,OAAO,GAAG,WAAW,CAAC,CAAC;oDAAC;;;;;;;;;;;0DAGrC,8OAAC;gDAAK,WAAU;0DAAyC;;;;;;;uCAbjD;;;;;;;;;;;;;;;;oBAoBf,CAAC,0BACA,8OAAC,mIAAM;wBACL,SAAQ;wBACR,SAAS;4BACP,IAAI,CAAC,YAAY;gCACf,MAAM,EAAE;gCACR;4BACF;4BACA,YAAY;wBACd;wBACA,WAAU;kCAET,EAAE;;;;;;oBAKN,0BACC,8OAAC;wBAAK,UAAU,kBAAkB,qBAAqB;wBAAc,WAAU;;0CAC7E,8OAAC;gCAAG,WAAU;0CACX,kBAAkB,uBAAuB,EAAE;;;;;;0CAI9C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;;4CACd,EAAE;4CAAyB;;;;;;;kDAE9B,8OAAC;wCAAI,WAAU;kDACZ;4CAAC;4CAAG;4CAAG;4CAAG;4CAAG;yCAAE,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;gDAEC,MAAK;gDACL,SAAS,IAAM,UAAU;gDACzB,cAAc,IAAM,iBAAiB;gDACrC,cAAc,IAAM,iBAAiB;gDACrC,WAAU;0DAEV,cAAA,8OAAC;oDACC,WAAW,CAAC,0BAA0B,EACpC,QAAQ,CAAC,iBAAiB,MAAM,IAC5B,oBACA,iBACJ;oDACF,MAAK;oDACL,SAAQ;8DAER,cAAA,8OAAC;wDAAK,GAAE;;;;;;;;;;;+CAhBL;;;;;;;;;;;;;;;;0CAwBb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAM,WAAU;;4CACd,EAAE;4CAA0B;;;;;;;kDAE/B,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wCAC1C,MAAM;wCACN,WAAU;wCACV,aAAa,EAAE;wCACf,QAAQ;;;;;;;;;;;;0CAKZ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,mIAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,UAAU;kDAET,aACG,EAAE,+BACF,kBACE,kBACA,EAAE;;;;;;kDAEV,8OAAC,mIAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,SAAS,kBAAkB,mBAAmB;4CAC5C,YAAY;4CACZ,UAAU;4CACV,WAAW;wCACb;kDAEC,EAAE;;;;;;;;;;;;;;;;;;;;;;;;YAQZ,QAAQ,MAAM,KAAK,kBAClB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCACV,EAAE;;;;;;oBAEJ,CAAC,0BACA,8OAAC,mIAAM;wBACL,SAAQ;wBACR,SAAS;4BACP,IAAI,CAAC,YAAY;gCACf,MAAM,EAAE;gCACR;4BACF;4BACA,YAAY;wBACd;kCAEC,EAAE;;;;;;;;;;;qCAKT,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wBAAoB,WAAU;;0CAC7B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ,OAAO,QAAQ;;;;;;0DAElB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;kEACZ;4DAAC;4DAAG;4DAAG;4DAAG;4DAAG;yDAAE,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;gEAEC,WAAW,CAAC,QAAQ,EAClB,QAAQ,OAAO,MAAM,GACjB,oBACA,iBACJ;gEACF,MAAK;gEACL,SAAQ;0EAER,cAAA,8OAAC;oEAAK,GAAE;;;;;;+DATH;;;;;;;;;;kEAaX,8OAAC;wDAAK,WAAU;kEACb,WAAW,OAAO,SAAS;;;;;;;;;;;;;;;;;;oCAIjC,QAAQ,OAAO,MAAM,KAAK,KAAK,EAAE,kBAChC,8OAAC,mIAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS,IAAM,iBAAiB;wCAChC,WAAU;kDACX;;;;;;;;;;;;0CAKL,8OAAC;gCAAE,WAAU;0CAAqC,OAAO,OAAO;;;;;;;uBAxCxD,OAAO,EAAE;;;;;;;;;;;;;;;;AA+C/B"}},
    {"offset": {"line": 1603, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/components/ProductLabels.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nexport type ProductLabelPosition = 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\r\n\r\nexport interface ProductLabel {\r\n  id: string;\r\n  type: 'text' | 'percentage';\r\n  value: string;\r\n  position: ProductLabelPosition;\r\n  color: string | null;\r\n}\r\n\r\ninterface ProductLabelsProps {\r\n  labels: ProductLabel[];\r\n}\r\n\r\n/**\r\n * ProductLabels\r\n *\r\n * UI-–∫–æ–º’∫’∏’∂’•’∂’ø, ’∏÷Ä’® corner-’•÷Ä’∏’æ ’≠’¥’¢’°’æ’∏÷Ä’∏÷Ç’¥ ’ß product-’´ labels-’®\r\n * ÷á ’∂’∏÷Ç’µ’∂ position ’∏÷Ç’∂’•÷Å’∏’≤ labels-’® ÷Å’∏÷Ç÷Å’°’§÷Ä’∏÷Ç’¥ ’ß vertical stack-’∏’æ÷â\r\n * ’ç’° ’°’∫’°’∞’∏’æ’∏÷Ç’¥ ’ß, ’∏÷Ä ’¥’´’°’™’°’¥’°’∂’°’Ø ’¥’´ ÷Ñ’°’∂’´ label ’∏÷Ç’∂’•’∂’°’¨’∏÷Ç ’§’•’∫÷Ñ’∏÷Ç’¥\r\n * ’§÷Ä’°’∂÷Ñ ’´÷Ä’°÷Ä ’æ÷Ä’° ’π’•’∂ ’∂’Ω’ø’∏÷Ç’¥, ’°’µ’¨ ’∏÷Ç’∂’•’∂ ’∞’Ω’ø’°’Ø –≤–µ—Ä—Ç–∏–∫’°’¨ ’∞’•’º’°’æ’∏÷Ä’∏÷Ç’©’µ’∏÷Ç’∂÷â\r\n */\r\nexport const ProductLabels: React.FC<ProductLabelsProps> = ({ labels }) => {\r\n  if (!labels || labels.length === 0) return null;\r\n\r\n  // ’ì’∏÷Ñ÷Ä logging, ’∏÷Ä ’∞’•’∑’ø ’¨’´’∂’´ debug ’°’∂’•’¨ label-’∂’•÷Ä’´ ’≠’∂’§’´÷Ä’∂’•÷Ä’®\r\n  console.info('[UI][ProductLabels] Rendering labels', {\r\n    total: labels.length,\r\n    positions: labels.map((l) => l.position),\r\n  });\r\n\r\n  const positions: ProductLabelPosition[] = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\r\n\r\n  const getColorClasses = (label: ProductLabel) => {\r\n    if (label.color) {\r\n      return '';\r\n    }\r\n\r\n    if (label.type === 'percentage') {\r\n      return 'bg-red-600 text-white';\r\n    }\r\n\r\n    const value = label.value.toLowerCase();\r\n    if (value.includes('new') || value.includes('’∂’∏÷Ä')) {\r\n      return 'bg-green-600 text-white';\r\n    }\r\n    if (value.includes('hot') || value.includes('’ø’°÷Ñ')) {\r\n      return 'bg-orange-600 text-white';\r\n    }\r\n    if (value.includes('sale') || value.includes('’¶’•’≤’π')) {\r\n      return 'bg-red-600 text-white';\r\n    }\r\n\r\n    return 'bg-blue-600 text-white';\r\n  };\r\n\r\n  const getCornerPositionClasses = (position: ProductLabelPosition) => {\r\n    switch (position) {\r\n      case 'top-left':\r\n        return 'top-2 left-2 items-start';\r\n      case 'top-right':\r\n        return 'top-2 right-2 items-end';\r\n      case 'bottom-left':\r\n        return 'bottom-2 left-2 items-start';\r\n      case 'bottom-right':\r\n        return 'bottom-2 right-2 items-end';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 pointer-events-none z-20\">\r\n      {positions.map((position) => {\r\n        const labelsForPosition = labels.filter((label) => label.position === position);\r\n        if (labelsForPosition.length === 0) return null;\r\n\r\n        return (\r\n          <div\r\n            key={position}\r\n            className={`absolute flex flex-col gap-1 ${getCornerPositionClasses(position)}`}\r\n          >\r\n            {labelsForPosition.map((label) => (\r\n              <div\r\n                key={label.id}\r\n                className={`px-2 py-0.5 text-[10px] font-semibold rounded-md shadow-sm pointer-events-auto ${getColorClasses(\r\n                  label,\r\n                )}`}\r\n                style={label.color ? { backgroundColor: label.color, color: 'white' } : undefined}\r\n              >\r\n                {label.type === 'percentage' ? `${label.value}%` : label.value}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;AAwBO,MAAM,gBAA8C,CAAC,EAAE,MAAM,EAAE;IACpE,IAAI,CAAC,UAAU,OAAO,MAAM,KAAK,GAAG,OAAO;IAE3C,6DAA6D;IAC7D,QAAQ,IAAI,CAAC,wCAAwC;QACnD,OAAO,OAAO,MAAM;QACpB,WAAW,OAAO,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ;IACzC;IAEA,MAAM,YAAoC;QAAC;QAAY;QAAa;QAAe;KAAe;IAElG,MAAM,kBAAkB,CAAC;QACvB,IAAI,MAAM,KAAK,EAAE;YACf,OAAO;QACT;QAEA,IAAI,MAAM,IAAI,KAAK,cAAc;YAC/B,OAAO;QACT;QAEA,MAAM,QAAQ,MAAM,KAAK,CAAC,WAAW;QACrC,IAAI,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,QAAQ;YAClD,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,QAAQ;YAClD,OAAO;QACT;QACA,IAAI,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,SAAS;YACpD,OAAO;QACT;QAEA,OAAO;IACT;IAEA,MAAM,2BAA2B,CAAC;QAChC,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,UAAU,GAAG,CAAC,CAAC;YACd,MAAM,oBAAoB,OAAO,MAAM,CAAC,CAAC,QAAU,MAAM,QAAQ,KAAK;YACtE,IAAI,kBAAkB,MAAM,KAAK,GAAG,OAAO;YAE3C,qBACE,8OAAC;gBAEC,WAAW,CAAC,6BAA6B,EAAE,yBAAyB,WAAW;0BAE9E,kBAAkB,GAAG,CAAC,CAAC,sBACtB,8OAAC;wBAEC,WAAW,CAAC,+EAA+E,EAAE,gBAC3F,QACC;wBACH,OAAO,MAAM,KAAK,GAAG;4BAAE,iBAAiB,MAAM,KAAK;4BAAE,OAAO;wBAAQ,IAAI;kCAEvE,MAAM,IAAI,KAAK,eAAe,GAAG,MAAM,KAAK,CAAC,CAAC,CAAC,GAAG,MAAM,KAAK;uBANzD,MAAM,EAAE;;;;;eALZ;;;;;QAgBX;;;;;;AAGN"}},
    {"offset": {"line": 1690, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/products/%5Bslug%5D/ProductImageGallery.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Maximize2 } from 'lucide-react';\nimport { ProductLabels } from '../../../components/ProductLabels';\nimport { t } from '../../../lib/i18n';\nimport type { LanguageCode } from '../../../lib/language';\nimport type { Product } from './types';\n\ninterface ProductImageGalleryProps {\n  images: string[];\n  product: Product;\n  discountPercent: number | null;\n  language: LanguageCode;\n  currentImageIndex: number;\n  onImageIndexChange: (index: number) => void;\n  thumbnailStartIndex: number;\n  onThumbnailStartIndexChange: (index: number) => void;\n}\n\nconst THUMBNAILS_PER_VIEW = 3;\n\nexport function ProductImageGallery({\n  images,\n  product,\n  discountPercent,\n  language,\n  currentImageIndex,\n  onImageIndexChange,\n  thumbnailStartIndex,\n  onThumbnailStartIndexChange,\n}: ProductImageGalleryProps) {\n  const [showZoom, setShowZoom] = useState(false);\n\n  // Auto-scroll thumbnails to show selected image\n  useEffect(() => {\n    if (images.length > THUMBNAILS_PER_VIEW) {\n      if (currentImageIndex < thumbnailStartIndex) {\n        // Selected image is above visible range - scroll up\n        onThumbnailStartIndexChange(currentImageIndex);\n      } else if (currentImageIndex >= thumbnailStartIndex + THUMBNAILS_PER_VIEW) {\n        // Selected image is below visible range - scroll down\n        onThumbnailStartIndexChange(currentImageIndex - THUMBNAILS_PER_VIEW + 1);\n      }\n    }\n  }, [currentImageIndex, images.length, thumbnailStartIndex, onThumbnailStartIndexChange]);\n\n  // Show only 3 thumbnails at a time, scrollable with navigation arrows\n  const visibleThumbnails = images.slice(thumbnailStartIndex, thumbnailStartIndex + THUMBNAILS_PER_VIEW);\n\n  return (\n    <>\n      <div className=\"flex gap-6 items-start\">\n        {/* Left Column - Thumbnails (Vertical) - Show 3 at a time, scrollable */}\n        <div className=\"flex flex-col gap-4 w-28 flex-shrink-0\">\n          <div className=\"flex flex-col gap-4 flex-1 overflow-hidden\">\n            {visibleThumbnails.map((image, index) => {\n              const actualIndex = thumbnailStartIndex + index;\n              const isActive = actualIndex === currentImageIndex;\n              return (\n                <button \n                  key={actualIndex}\n                  onClick={() => onImageIndexChange(actualIndex)}\n                  className={`relative w-full aspect-[3/4] rounded-lg overflow-hidden border bg-white transition-all duration-300 flex-shrink-0 ${\n                    isActive \n                      ? 'border-gray-400 shadow-[0_2px_8px_rgba(0,0,0,0.12)] ring-2 ring-gray-300' \n                      : 'border-gray-200 hover:border-gray-300 hover:shadow-[0_2px_6px_rgba(0,0,0,0.08)]'\n                  }`}\n                >\n                  <img \n                    src={image} \n                    alt=\"\" \n                    className=\"w-full h-full object-cover transition-transform duration-300\" \n                  />\n                </button>\n              );\n            })}\n          </div>\n          \n          {/* Navigation Arrows - Scroll thumbnails */}\n          {images.length > THUMBNAILS_PER_VIEW && (\n            <div className=\"flex flex-row gap-1.5 justify-center\">\n              <button \n                type=\"button\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  // Scroll thumbnails up\n                  const newStart = Math.max(0, thumbnailStartIndex - 1);\n                  onThumbnailStartIndexChange(newStart);\n                  // Also update current image if needed\n                  if (currentImageIndex > newStart + THUMBNAILS_PER_VIEW - 1) {\n                    onImageIndexChange(newStart + THUMBNAILS_PER_VIEW - 1);\n                  } else if (currentImageIndex < newStart) {\n                    onImageIndexChange(newStart);\n                  }\n                }}\n                disabled={thumbnailStartIndex <= 0}\n                className=\"w-9 h-9 rounded border transition-all duration-200 flex items-center justify-center border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-200 hover:shadow-[0_1px_3px_rgba(0,0,0,0.1)] disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-gray-100 disabled:hover:border-gray-300 disabled:hover:shadow-none bg-gray-100\"\n                aria-label={t(language, 'common.ariaLabels.previousThumbnail')}\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path \n                    strokeLinecap=\"round\" \n                    strokeLinejoin=\"round\" \n                    strokeWidth={2.5} \n                    d=\"M5 15l7-7 7 7\" \n                  />\n                </svg>\n              </button>\n              <button \n                type=\"button\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  // Scroll thumbnails down\n                  const newStart = Math.min(images.length - THUMBNAILS_PER_VIEW, thumbnailStartIndex + 1);\n                  onThumbnailStartIndexChange(newStart);\n                  // Also update current image if needed\n                  if (currentImageIndex < newStart) {\n                    onImageIndexChange(newStart);\n                  } else if (currentImageIndex > newStart + THUMBNAILS_PER_VIEW - 1) {\n                    onImageIndexChange(newStart + THUMBNAILS_PER_VIEW - 1);\n                  }\n                }}\n                disabled={thumbnailStartIndex >= images.length - THUMBNAILS_PER_VIEW}\n                className=\"w-9 h-9 rounded border transition-all duration-200 flex items-center justify-center border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-200 hover:shadow-[0_1px_3px_rgba(0,0,0,0.1)] disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-gray-100 disabled:hover:border-gray-300 disabled:hover:shadow-none bg-gray-100\"\n                aria-label={t(language, 'common.ariaLabels.nextThumbnail')}\n              >\n                <svg \n                  className=\"w-4 h-4\" \n                  fill=\"none\" \n                  stroke=\"currentColor\" \n                  viewBox=\"0 0 24 24\"\n                >\n                  <path \n                    strokeLinecap=\"round\" \n                    strokeLinejoin=\"round\" \n                    strokeWidth={2.5} \n                    d=\"M19 9l-7 7-7-7\" \n                  />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {/* Right Column - Main Image */}\n        <div className=\"flex-1\">\n          <div className=\"relative aspect-square bg-white rounded-lg overflow-hidden group shadow-[0_2px_8px_rgba(0,0,0,0.06)]\">\n          {images.length > 0 ? (\n            <img \n              src={images[currentImageIndex]} \n              alt={product.title} \n              className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105\" \n            />\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center text-gray-400\">{t(language, 'common.messages.noImage')}</div>\n          )}\n          \n          {/* Discount Badge on Image - Blue circle in top-right */}\n          {discountPercent && (\n            <div className=\"absolute top-4 right-4 w-14 h-14 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold z-10 shadow-[0_2px_8px_rgba(37,99,235,0.3)]\">\n              -{discountPercent}%\n            </div>\n          )}\n\n          {product.labels && <ProductLabels labels={product.labels} />}\n          \n          {/* Control Buttons - Bottom left */}\n          <div className=\"absolute bottom-4 left-4 flex flex-col gap-3 z-10\">\n            {/* Fullscreen Button */}\n            <button \n              onClick={() => setShowZoom(true)} \n              className=\"w-12 h-12 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/50 shadow-[0_2px_8px_rgba(0,0,0,0.15)] hover:bg-white/90 transition-all duration-300 hover:shadow-[0_4px_12px_rgba(0,0,0,0.2)]\"\n              aria-label={t(language, 'common.ariaLabels.fullscreenImage')}\n            >\n              <Maximize2 className=\"w-5 h-5 text-gray-800\" />\n            </button>\n          </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Zoom Modal */}\n      {showZoom && images.length > 0 && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4\" onClick={() => setShowZoom(false)}>\n          <img src={images[currentImageIndex]} alt=\"\" className=\"max-w-full max-h-full object-contain\" />\n          <button \n            className=\"absolute top-4 right-4 text-white text-2xl\"\n            aria-label={t(language, 'common.buttons.close')}\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowZoom(false);\n            }}\n          >\n            {t(language, 'common.buttons.close')}\n          </button>\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/lib/utils/logger.ts"],"sourcesContent":["/**\r\n * Logger utility for consistent logging across the application\r\n * Replaces console.log with structured logging\r\n */\r\n\r\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\r\n\r\ninterface LogContext {\r\n  [key: string]: unknown;\r\n}\r\n\r\nclass Logger {\r\n  private isDevelopment(): boolean {\r\n    return process.env.NODE_ENV === 'development';\r\n  }\r\n\r\n  private formatMessage(level: LogLevel, message: string, context?: LogContext): string {\r\n    const timestamp = new Date().toISOString();\r\n    const contextStr = context ? ` ${JSON.stringify(context)}` : '';\r\n    return `[${timestamp}] [${level.toUpperCase()}] ${message}${contextStr}`;\r\n  }\r\n\r\n  debug(message: string, context?: LogContext): void {\r\n    if (this.isDevelopment()) {\r\n      console.debug(this.formatMessage('debug', message, context));\r\n    }\r\n  }\r\n\r\n  info(message: string, context?: LogContext): void {\r\n    if (this.isDevelopment()) {\r\n      console.info(this.formatMessage('info', message, context));\r\n    }\r\n  }\r\n\r\n  warn(message: string, context?: LogContext): void {\r\n    console.warn(this.formatMessage('warn', message, context));\r\n  }\r\n\r\n  error(message: string, context?: LogContext): void {\r\n    console.error(this.formatMessage('error', message, context));\r\n  }\r\n\r\n  log(message: string, context?: LogContext): void {\r\n    // Alias for info in development\r\n    this.info(message, context);\r\n  }\r\n}\r\n\r\nexport const logger = new Logger();\r\n\r\n\r\n\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAQD,MAAM;IACI,gBAAyB;QAC/B,OAAO,oDAAyB;IAClC;IAEQ,cAAc,KAAe,EAAE,OAAe,EAAE,OAAoB,EAAU;QACpF,MAAM,YAAY,IAAI,OAAO,WAAW;QACxC,MAAM,aAAa,UAAU,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,UAAU,GAAG;QAC7D,OAAO,CAAC,CAAC,EAAE,UAAU,GAAG,EAAE,MAAM,WAAW,GAAG,EAAE,EAAE,UAAU,YAAY;IAC1E;IAEA,MAAM,OAAe,EAAE,OAAoB,EAAQ;QACjD,IAAI,IAAI,CAAC,aAAa,IAAI;YACxB,QAAQ,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,SAAS;QACrD;IACF;IAEA,KAAK,OAAe,EAAE,OAAoB,EAAQ;QAChD,IAAI,IAAI,CAAC,aAAa,IAAI;YACxB,QAAQ,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,SAAS;QACnD;IACF;IAEA,KAAK,OAAe,EAAE,OAAoB,EAAQ;QAChD,QAAQ,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,SAAS;IACnD;IAEA,MAAM,OAAe,EAAE,OAAoB,EAAQ;QACjD,QAAQ,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,SAAS;IACrD;IAEA,IAAI,OAAe,EAAE,OAAoB,EAAQ;QAC/C,gCAAgC;QAChC,IAAI,CAAC,IAAI,CAAC,SAAS;IACrB;AACF;AAEO,MAAM,SAAS,IAAI"}},
    {"offset": {"line": 2025, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/lib/utils/image-utils.ts"],"sourcesContent":["/**\n * Unified image URL utilities for consistent handling across the application\n */\n\nimport imageCompression from 'browser-image-compression';\nimport { logger } from './logger';\n\n/**\n * Type for image URL input - can be string or object with url/src/value properties\n */\ntype ImageUrlInput = string | null | undefined | { url?: string; src?: string; value?: string };\n\n/**\n * Validates if a URL is a valid image URL\n */\nexport function isValidImageUrl(url: ImageUrlInput): boolean {\n  if (!url) return false;\n  \n  const urlStr = typeof url === 'string' ? url.trim() : '';\n  if (!urlStr) return false;\n  \n  // Base64 images are valid\n  if (urlStr.startsWith('data:image/')) return true;\n  \n  // HTTP/HTTPS URLs are valid\n  if (urlStr.startsWith('http://') || urlStr.startsWith('https://')) return true;\n  \n  // Relative paths starting with / are valid\n  if (urlStr.startsWith('/')) return true;\n  \n  return false;\n}\n\n/**\n * Processes and normalizes an image URL from various formats\n * Returns null if invalid\n */\nexport function processImageUrl(url: ImageUrlInput): string | null {\n  if (!url) return null;\n  \n  let finalUrl = '';\n  if (typeof url === 'string') {\n    finalUrl = url.trim();\n  } else if (typeof url === 'object' && url !== null) {\n    finalUrl = (url.url || url.src || url.value || '').trim();\n  }\n  \n  if (!finalUrl) return null;\n  \n  // Validate\n  if (!isValidImageUrl(finalUrl)) {\n    return null;\n  }\n  \n  // For base64 or full URLs, return as-is\n  if (finalUrl.startsWith('data:') || finalUrl.startsWith('http://') || finalUrl.startsWith('https://')) {\n    return finalUrl;\n  }\n  \n  // For relative paths, ensure they start with /\n  if (finalUrl.startsWith('/')) {\n    return finalUrl;\n  }\n  \n  return `/${finalUrl}`;\n}\n\n/**\n * Smart split for comma-separated image URLs that handles Base64 data URIs\n * Base64 strings can contain commas, so we need special handling\n */\nexport function smartSplitUrls(str: string | null | undefined): string[] {\n  if (!str) return [];\n  \n  // If no base64, simple split\n  if (!str.includes('data:image/')) {\n    return str.split(',').map(s => s.trim()).filter(Boolean);\n  }\n  \n  // Handle base64 - split carefully\n  // Base64 format: data:image/type;base64,<base64data>\n  // The comma after base64, is the separator, but base64 data itself can contain commas\n  // We need to find the comma that separates base64 header from data, then find the next URL separator\n  \n  const results: string[] = [];\n  let i = 0;\n  \n  while (i < str.length) {\n    if (str.substring(i).startsWith('data:image/')) {\n      // Found start of base64 image\n      // Find the comma after base64, (this is the separator between header and data)\n      const headerEnd = str.indexOf(',', i);\n      if (headerEnd === -1) {\n        // No comma found, treat entire rest as base64\n        results.push(str.substring(i).trim());\n        break;\n      }\n      \n      // Find the next comma that's likely a URL separator (followed by whitespace and another URL pattern)\n      // Or find end of string\n      let nextSeparator = str.length;\n      for (let j = headerEnd + 1; j < str.length; j++) {\n        if (str[j] === ',') {\n          // Check if this comma is followed by a URL pattern (not part of base64)\n          const afterComma = str.substring(j + 1).trim();\n          if (afterComma.startsWith('data:image/') || \n              afterComma.startsWith('http://') || \n              afterComma.startsWith('https://') ||\n              afterComma.startsWith('/')) {\n            nextSeparator = j;\n            break;\n          }\n        }\n      }\n      \n      // Extract base64 image (from start to separator)\n      const base64Image = str.substring(i, nextSeparator).trim();\n      if (base64Image) {\n        results.push(base64Image);\n      }\n      \n      i = nextSeparator + 1;\n    } else {\n      // Regular URL - find next comma or end\n      const nextComma = str.indexOf(',', i);\n      if (nextComma === -1) {\n        // No more commas, add rest as single URL\n        const url = str.substring(i).trim();\n        if (url) {\n          results.push(url);\n        }\n        break;\n      } else {\n        // Add URL up to comma\n        const url = str.substring(i, nextComma).trim();\n        if (url) {\n          results.push(url);\n        }\n        i = nextComma + 1;\n      }\n    }\n  }\n  \n  return results.filter(Boolean);\n}\n\n/**\n * Normalizes URL for comparison (ensures consistent format for deduplication)\n * Returns normalized string for exact matching\n */\nexport function normalizeUrlForComparison(url: string): string {\n  if (!url) return '';\n  \n  // Base64 images - return as-is (exact match required)\n  if (url.startsWith('data:')) {\n    return url;\n  }\n  \n  // HTTP/HTTPS URLs - return as-is (exact match)\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return url;\n  }\n  \n  // Relative paths - normalize to start with /\n  const trimmed = url.trim();\n  if (trimmed.startsWith('/')) {\n    return trimmed;\n  }\n  \n  return `/${trimmed}`;\n}\n\n/**\n * Gets all normalized variations of a URL for comparison\n * Useful when comparing URLs that might have different formats\n */\nexport function getUrlVariations(url: string): string[] {\n  if (!url) return [];\n  \n  const normalized = normalizeUrlForComparison(url);\n  const variations = new Set<string>([normalized]);\n  \n  // For relative paths, add variations with/without leading slash\n  if (!normalized.startsWith('data:') && !normalized.startsWith('http')) {\n    if (normalized.startsWith('/')) {\n      variations.add(normalized.substring(1));\n      variations.add(normalized);\n    } else {\n      variations.add(normalized);\n      variations.add(`/${normalized}`);\n    }\n    \n    // Also add without query params\n    const withoutQuery = normalized.split('?')[0];\n    if (withoutQuery !== normalized) {\n      variations.add(withoutQuery);\n      if (withoutQuery.startsWith('/')) {\n        variations.add(withoutQuery.substring(1));\n      } else {\n        variations.add(`/${withoutQuery}`);\n      }\n    }\n  }\n  \n  return Array.from(variations);\n}\n\n/**\n * Cleans and validates an array of image URLs\n * Removes invalid, empty, and duplicate URLs\n */\nexport function cleanImageUrls(urls: (string | ImageUrlInput)[]): string[] {\n  if (!Array.isArray(urls)) return [];\n  \n  const seen = new Set<string>();\n  const cleaned: string[] = [];\n  \n  for (const url of urls) {\n    const processed = processImageUrl(url);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    if (seen.has(normalized)) continue;\n    \n    seen.add(normalized);\n    cleaned.push(processed);\n  }\n  \n  return cleaned;\n}\n\n/**\n * Separates main images from variant images\n * Removes variant images from main images array to prevent duplication\n */\nexport function separateMainAndVariantImages(\n  mainImages: (string | ImageUrlInput)[],\n  variantImages: (string | ImageUrlInput)[]\n): {\n  main: string[];\n  variants: string[];\n} {\n  // Process and normalize all variant images\n  const variantUrlSet = new Set<string>();\n  const variantVariationsMap = new Map<string, string[]>();\n  \n  for (const variantImg of variantImages) {\n    const processed = processImageUrl(variantImg);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    variantUrlSet.add(normalized);\n    \n    // Store all variations for this URL\n    const variations = getUrlVariations(processed);\n    variations.forEach(v => variantVariationsMap.set(v, variations));\n  }\n  \n  // Process main images and filter out those that match variants\n  const mainProcessed: string[] = [];\n  const seenMain = new Set<string>();\n  \n  for (const mainImg of mainImages) {\n    const processed = processImageUrl(mainImg);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    \n    // Check if this main image matches any variant image\n    const isVariantImage = variantUrlSet.has(normalized) || \n                          variantVariationsMap.has(normalized) ||\n                          Array.from(variantVariationsMap.values()).some(variations => \n                            variations.some(v => {\n                              const mainVariations = getUrlVariations(processed);\n                              return mainVariations.includes(v);\n                            })\n                          );\n    \n    if (isVariantImage) {\n      continue; // Skip - this is a variant image\n    }\n    \n    // Check for duplicates in main images\n    if (seenMain.has(normalized)) {\n      continue;\n    }\n    \n    seenMain.add(normalized);\n    mainProcessed.push(processed);\n  }\n  \n  // Process variant images (already validated above)\n  const variantProcessed: string[] = [];\n  const seenVariant = new Set<string>();\n  \n  for (const variantImg of variantImages) {\n    const processed = processImageUrl(variantImg);\n    if (!processed) continue;\n    \n    const normalized = normalizeUrlForComparison(processed);\n    if (seenVariant.has(normalized)) continue;\n    \n    seenVariant.add(normalized);\n    variantProcessed.push(processed);\n  }\n  \n  return {\n    main: mainProcessed,\n    variants: variantProcessed,\n  };\n}\n\n/**\n * Processes an image file with compression, EXIF orientation correction, and size optimization\n * Automatically handles:\n * - EXIF orientation (rotates image correctly)\n * - Resize to max dimensions (1920x1920 by default)\n * - Compression to reduce file size (maxSizeMB: 2MB by default)\n * \n * @param file - The image file to process\n * @param options - Processing options\n * @returns Promise<string> - Base64 data URL of processed image\n */\nexport async function processImageFile(\n  file: File,\n  options?: {\n    maxSizeMB?: number; // Maximum file size in MB (default: 2)\n    maxWidthOrHeight?: number; // Maximum width or height in pixels (default: 1920)\n    useWebWorker?: boolean; // Use web worker for processing (default: true)\n    fileType?: string; // Output file type (default: 'image/jpeg')\n    initialQuality?: number; // Initial quality 0-1 (default: 0.8)\n  }\n): Promise<string> {\n  try {\n    logger.debug('Starting image processing', {\n      fileName: file.name,\n      originalSize: `${Math.round(file.size / 1024)}KB`,\n      type: file.type\n    });\n\n    const {\n      maxSizeMB = 2,\n      maxWidthOrHeight = 1920,\n      useWebWorker = true,\n      fileType = 'image/jpeg',\n      initialQuality = 0.8\n    } = options || {};\n\n    // Process image with compression and EXIF orientation correction\n    // browser-image-compression automatically handles EXIF orientation\n    const compressedFile = await imageCompression(file, {\n      maxSizeMB,\n      maxWidthOrHeight,\n      useWebWorker,\n      fileType,\n      initialQuality,\n      // EXIF orientation is automatically handled by browser-image-compression\n    });\n\n    logger.info('Image processed successfully', {\n      originalSize: `${Math.round(file.size / 1024)}KB`,\n      compressedSize: `${Math.round(compressedFile.size / 1024)}KB`,\n      reduction: `${Math.round((1 - compressedFile.size / file.size) * 100)}%`\n    });\n\n    // Convert to base64\n    return new Promise<string>((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const result = reader.result as string;\n        logger.debug('Image converted to base64', { length: result.length });\n        resolve(result);\n      };\n      reader.onerror = (error) => {\n        logger.error('Error converting to base64', { error });\n        reject(new Error('Failed to convert image to base64'));\n      };\n      reader.readAsDataURL(compressedFile);\n    });\n  } catch (error: unknown) {\n    const errorMessage = error instanceof Error ? error.message : 'Failed to process image';\n    logger.error('Error processing image', { error });\n    throw new Error(errorMessage);\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2309, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/products/%5Bslug%5D/ProductAttributesSelector.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { processImageUrl } from '../../../lib/utils/image-utils';\r\nimport { t, getAttributeLabel } from '../../../lib/i18n';\r\nimport type { LanguageCode } from '../../../lib/language';\r\nimport type { Product, ProductVariant } from './types';\r\n\r\ninterface AttributeGroupValue {\r\n  valueId?: string;\r\n  value: string;\r\n  label: string;\r\n  stock: number;\r\n  variants: ProductVariant[];\r\n  imageUrl?: string | null;\r\n  colors?: string[] | null;\r\n}\r\n\r\ninterface ProductAttributesSelectorProps {\r\n  product: Product;\r\n  attributeGroups: Map<string, AttributeGroupValue[]>;\r\n  selectedColor: string | null;\r\n  selectedSize: string | null;\r\n  selectedAttributeValues: Map<string, string>;\r\n  unavailableAttributes: Map<string, boolean>;\r\n  colorGroups: Array<{ color: string; stock: number; variants: ProductVariant[] }>;\r\n  sizeGroups: Array<{ size: string; stock: number; variants: ProductVariant[] }>;\r\n  language: LanguageCode;\r\n  quantity: number;\r\n  maxQuantity: number;\r\n  isOutOfStock: boolean;\r\n  isVariationRequired: boolean;\r\n  hasUnavailableAttributes: boolean;\r\n  canAddToCart: boolean;\r\n  isAddingToCart: boolean;\r\n  showMessage: string | null;\r\n  onColorSelect: (color: string) => void;\r\n  onSizeSelect: (size: string) => void;\r\n  onAttributeValueSelect: (attrKey: string, value: string) => void;\r\n  onQuantityAdjust: (delta: number) => void;\r\n  onAddToCart: () => Promise<void>;\r\n  getOptionValue: (options: any[] | undefined, key: string) => string | null;\r\n  getRequiredAttributesMessage: () => string;\r\n}\r\n\r\n// Helper function to get color hex/rgb from color name\r\nconst getColorValue = (colorName: string): string => {\r\n  const colorMap: Record<string, string> = {\r\n    'beige': '#F5F5DC', 'black': '#000000', 'blue': '#0000FF', 'brown': '#A52A2A',\r\n    'gray': '#808080', 'grey': '#808080', 'green': '#008000', 'red': '#FF0000',\r\n    'white': '#FFFFFF', 'yellow': '#FFFF00', 'orange': '#FFA500', 'pink': '#FFC0CB',\r\n    'purple': '#800080', 'navy': '#000080', 'maroon': '#800000', 'olive': '#808000',\r\n    'teal': '#008080', 'cyan': '#00FFFF', 'magenta': '#FF00FF', 'lime': '#00FF00',\r\n    'silver': '#C0C0C0', 'gold': '#FFD700',\r\n  };\r\n  const normalizedName = colorName.toLowerCase().trim();\r\n  return colorMap[normalizedName] || '#CCCCCC';\r\n};\r\n\r\nexport function ProductAttributesSelector({\r\n  product,\r\n  attributeGroups,\r\n  selectedColor,\r\n  selectedSize,\r\n  selectedAttributeValues,\r\n  unavailableAttributes,\r\n  colorGroups,\r\n  sizeGroups,\r\n  language,\r\n  onColorSelect,\r\n  onSizeSelect,\r\n  onAttributeValueSelect,\r\n  getOptionValue,\r\n}: ProductAttributesSelectorProps) {\r\n  const attributeGroupsEntries = Array.from(attributeGroups.entries());\r\n  console.log('üé® [PRODUCT ATTRIBUTES SELECTOR] attributeGroups entries:', attributeGroupsEntries.length);\r\n  console.log('üé® [PRODUCT ATTRIBUTES SELECTOR] attributeGroups keys:', Array.from(attributeGroups.keys()));\r\n  console.log('üé® [PRODUCT ATTRIBUTES SELECTOR] product.productAttributes:', product?.productAttributes);\r\n  \r\n  return (\r\n    <div className=\"mt-8 p-4 bg-white border border-gray-200 rounded-2xl space-y-4\">\r\n      {/* Attribute Selectors - Support both new (productAttributes) and old (colorGroups) format */}\r\n      {/* Display all attributes from attributeGroups, not just from productAttributes */}\r\n      {attributeGroupsEntries.length > 0 ? (\r\n        // Use attributeGroups which contains all attributes (from productAttributes and variants)\r\n        Array.from(attributeGroups.entries()).map(([attrKey, attrGroups]) => {\r\n          // Try to get attribute name from productAttributes if available\r\n          const productAttr = product?.productAttributes?.find((pa: any) => pa.attribute?.key === attrKey);\r\n          const attributeName = productAttr?.attribute?.name || attrKey.charAt(0).toUpperCase() + attrKey.slice(1);\r\n          const isColor = attrKey === 'color';\r\n          const isSize = attrKey === 'size';\r\n\r\n          if (attrGroups.length === 0) return null;\r\n\r\n          // Check if this attribute is unavailable for the selected variant\r\n          const isUnavailable = unavailableAttributes.get(attrKey) || false;\r\n          \r\n          return (\r\n            <div key={attrKey} className=\"space-y-1.5\">\r\n              <label className={`text-xs font-bold uppercase ${isUnavailable ? 'text-red-600' : ''}`}>\r\n                {attrKey === 'color' ? t(language, 'product.color') : \r\n                 attrKey === 'size' ? t(language, 'product.size') : \r\n                 attributeName}:\r\n              </label>\r\n              {isColor ? (\r\n                <div className=\"flex flex-wrap gap-1.5 items-center\">\r\n                  {attrGroups.map((g) => {\r\n                    const isSelected = selectedColor === g.value?.toLowerCase().trim();\r\n                    // IMPORTANT: Don't disable based on stock - show all colors, even if stock is 0\r\n                    // Stock is just informational, not a reason to hide the option\r\n                    const isDisabled = false; // Always show all colors\r\n                    // Process imageUrl to ensure it's in the correct format\r\n                    const processedImageUrl = g.imageUrl ? processImageUrl(g.imageUrl) : null;\r\n                    const hasImage = processedImageUrl && processedImageUrl.trim() !== '';\r\n                    const colorHex = g.colors && Array.isArray(g.colors) && g.colors.length > 0 \r\n                      ? g.colors[0] \r\n                      : getColorValue(g.value);\r\n                    \r\n                    // Dynamic sizing based on number of values\r\n                    // Keep size consistent for 2 values, reduce for more\r\n                    const totalValues = attrGroups.length;\r\n                    const sizeClass = totalValues > 6 \r\n                      ? 'w-8 h-8' \r\n                      : totalValues > 3 \r\n                      ? 'w-9 h-9' \r\n                      : 'w-10 h-10';\r\n                    \r\n                    return (\r\n                      <div key={g.valueId || g.value} className=\"flex flex-col items-center gap-0.5\">\r\n                        <button \r\n                          onClick={() => onColorSelect(g.value)}\r\n                          className={`${sizeClass} rounded-full transition-all overflow-hidden ${\r\n                            isSelected \r\n                              ? 'border-[3px] border-green-500 scale-110' \r\n                              : g.stock <= 0\r\n                                ? 'border-2 border-gray-200 opacity-60 hover:opacity-80' \r\n                                : 'border-2 border-gray-300 hover:scale-105'\r\n                          }`}\r\n                          style={hasImage ? {} : { backgroundColor: colorHex }}\r\n                          title={`${getAttributeLabel(language, attrKey, g.value)}${g.stock > 0 ? ` (${g.stock} ${t(language, 'product.pcs')})` : ` (${t(language, 'product.outOfStock')})`}`} \r\n                        >\r\n                          {hasImage && processedImageUrl ? (\r\n                            <img \r\n                              src={processedImageUrl} \r\n                              alt={g.label}\r\n                              className=\"w-full h-full object-cover\"\r\n                              onError={(e) => {\r\n                                console.error(`‚ùå [COLOR IMAGE] Failed to load image for color \"${g.value}\":`, processedImageUrl);\r\n                                (e.target as HTMLImageElement).style.display = 'none';\r\n                              }}\r\n                              onLoad={() => {\r\n                                console.log(`‚úÖ [COLOR IMAGE] Successfully loaded image for color \"${g.value}\":`, processedImageUrl);\r\n                              }}\r\n                            />\r\n                          ) : null}\r\n                        </button>\r\n                        {g.stock > 0 && (\r\n                          <span className={`${totalValues > 8 ? 'text-[10px]' : 'text-xs'} text-gray-500`}>{g.stock}</span>\r\n                        )}\r\n                        {g.stock <= 0 && (\r\n                          <span className={`${totalValues > 8 ? 'text-[10px]' : 'text-xs'} text-gray-400`}>0</span>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              ) : isSize ? (\r\n                <div className=\"flex flex-wrap gap-1.5\">\r\n                  {attrGroups.map((g) => {\r\n                    // Use stock from groups (already calculated with compatibility)\r\n                    const displayStock = g.stock;\r\n                    const isSelected = selectedSize === g.value.toLowerCase().trim();\r\n                    // IMPORTANT: Don't disable based on stock - show all sizes, even if stock is 0\r\n                    // Stock is just informational, not a reason to hide the option\r\n                    const isDisabled = false; // Always show all sizes\r\n                    \r\n                    // Process imageUrl to ensure it's in the correct format\r\n                    const processedImageUrl = g.imageUrl ? processImageUrl(g.imageUrl) : null;\r\n                    const hasImage = processedImageUrl && processedImageUrl.trim() !== '';\r\n                    \r\n                    // Dynamic sizing based on number of values\r\n                    // Keep size consistent for 2 values, reduce for more\r\n                    const totalValues = attrGroups.length;\r\n                    const paddingClass = totalValues > 6 \r\n                      ? 'px-2 py-1' \r\n                      : totalValues > 3 \r\n                      ? 'px-2.5 py-1.5' \r\n                      : 'px-3 py-2';\r\n                    const textSizeClass = totalValues > 6 \r\n                      ? 'text-xs' \r\n                      : 'text-sm';\r\n                    const imageSizeClass = totalValues > 6 \r\n                      ? 'w-4 h-4' \r\n                      : 'w-5 h-5';\r\n                    const minWidthClass = totalValues > 6 \r\n                      ? 'min-w-[40px]' \r\n                      : 'min-w-[50px]';\r\n\r\n                    return (\r\n                      <button \r\n                        key={g.valueId || g.value}\r\n                        onClick={() => onSizeSelect(g.value)}\r\n                        className={`${minWidthClass} ${paddingClass} rounded-lg border-2 transition-all flex items-center gap-1.5 ${\r\n                          isSelected \r\n                            ? 'border-green-500 bg-gray-50' \r\n                            : displayStock <= 0\r\n                              ? 'border-gray-200 opacity-60 hover:opacity-80' \r\n                              : 'border-gray-200 hover:border-gray-400'\r\n                        }`}\r\n                      >\r\n                        {hasImage && processedImageUrl && (\r\n                          <img \r\n                            src={processedImageUrl} \r\n                            alt={g.label}\r\n                            className={`${imageSizeClass} object-cover rounded border border-gray-300 flex-shrink-0`}\r\n                            onError={(e) => {\r\n                              console.error(`‚ùå [SIZE IMAGE] Failed to load image for size \"${g.value}\":`, processedImageUrl);\r\n                              (e.target as HTMLImageElement).style.display = 'none';\r\n                            }}\r\n                            onLoad={() => {\r\n                              console.log(`‚úÖ [SIZE IMAGE] Successfully loaded image for size \"${g.value}\":`, processedImageUrl);\r\n                            }}\r\n                          />\r\n                        )}\r\n                        <div className=\"flex flex-col text-center\">\r\n                          <span className={`${textSizeClass} font-medium`}>{getAttributeLabel(language, attrKey, g.value)}</span>\r\n                          <span className={`${totalValues > 10 ? 'text-[10px]' : 'text-xs'} ${displayStock > 0 ? 'text-gray-500' : 'text-gray-400'}`}>({displayStock})</span>\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                // Generic attribute selector\r\n                <div className=\"flex flex-wrap gap-1.5\">\r\n                  {attrGroups.map((g) => {\r\n                    const selectedValueId = selectedAttributeValues.get(attrKey);\r\n                    const isSelected = selectedValueId === g.valueId || (!g.valueId && selectedColor === g.value);\r\n                    // IMPORTANT: Don't disable based on stock - show all attribute values, even if stock is 0\r\n                    // Stock is just informational, not a reason to hide the option\r\n                    const isDisabled = false; // Always show all attribute values\r\n                    \r\n                    // Process imageUrl to ensure it's in the correct format\r\n                    const processedImageUrl = g.imageUrl ? processImageUrl(g.imageUrl) : null;\r\n                    const hasImage = processedImageUrl && processedImageUrl.trim() !== '';\r\n                    const hasColors = g.colors && Array.isArray(g.colors) && g.colors.length > 0;\r\n                    const colorHex = hasColors && g.colors \r\n                      ? g.colors[0] \r\n                      : null;\r\n                    \r\n                    // Debug logging for image issues\r\n                    if (g.imageUrl && !hasImage) {\r\n                      console.warn(`‚ö†Ô∏è [ATTRIBUTE IMAGE] Failed to process imageUrl for attribute \"${attrKey}\" value \"${g.value}\":`, g.imageUrl);\r\n                    }\r\n                    \r\n                    // Dynamic sizing based on number of values\r\n                    // Keep size consistent for 2 values, reduce for more\r\n                    const totalValues = attrGroups.length;\r\n                    const paddingClass = totalValues > 6 \r\n                      ? 'px-2 py-1' \r\n                      : totalValues > 3 \r\n                      ? 'px-3 py-1.5' \r\n                      : 'px-4 py-2';\r\n                    const textSizeClass = totalValues > 6 \r\n                      ? 'text-xs' \r\n                      : 'text-sm';\r\n                    const imageSizeClass = totalValues > 6 \r\n                      ? 'w-4 h-4' \r\n                      : totalValues > 3 \r\n                      ? 'w-5 h-5' \r\n                      : 'w-6 h-6';\r\n                    const gapClass = totalValues > 6 \r\n                      ? 'gap-1' \r\n                      : 'gap-2';\r\n\r\n                    return (\r\n                      <button\r\n                        key={g.valueId || g.value}\r\n                        onClick={() => {\r\n                          if (!isDisabled) {\r\n                            onAttributeValueSelect(attrKey, g.valueId || g.value);\r\n                          }\r\n                        }}\r\n                        className={`${paddingClass} rounded-lg border-2 transition-all flex items-center ${gapClass} ${\r\n                          isSelected\r\n                            ? 'border-green-500 bg-gray-50'\r\n                            : g.stock <= 0\r\n                              ? 'border-gray-200 opacity-60 hover:opacity-80'\r\n                              : 'border-gray-200 hover:border-gray-400'\r\n                        }`}\r\n                        style={!hasImage && colorHex ? { backgroundColor: colorHex } : {}}\r\n                      >\r\n                        {hasImage && processedImageUrl ? (\r\n                          <img \r\n                            src={processedImageUrl} \r\n                            alt={g.label}\r\n                            className={`${imageSizeClass} object-cover rounded border border-gray-300 flex-shrink-0`}\r\n                            onError={(e) => {\r\n                              console.error(`‚ùå [ATTRIBUTE IMAGE] Failed to load image for attribute \"${attrKey}\" value \"${g.value}\":`, processedImageUrl);\r\n                              (e.target as HTMLImageElement).style.display = 'none';\r\n                            }}\r\n                            onLoad={() => {\r\n                              console.log(`‚úÖ [ATTRIBUTE IMAGE] Successfully loaded image for attribute \"${attrKey}\" value \"${g.value}\":`, processedImageUrl);\r\n                            }}\r\n                          />\r\n                        ) : hasColors && colorHex ? (\r\n                          <div \r\n                            className={`${imageSizeClass} rounded border border-gray-300 flex-shrink-0`}\r\n                            style={{ backgroundColor: colorHex }}\r\n                          />\r\n                        ) : null}\r\n                        <div className=\"flex flex-col text-center\">\r\n                          <span className={textSizeClass}>{getAttributeLabel(language, attrKey, g.value)}</span>\r\n                          <span className={`${totalValues > 10 ? 'text-[10px]' : 'text-xs'} ${g.stock > 0 ? 'text-gray-500' : 'text-gray-400'}`}>({g.stock})</span>\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })\r\n      ) : (\r\n        // Old format: Use colorGroups and sizeGroups\r\n        <>\r\n          {colorGroups.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">{t(language, 'product.color')}:</label>\r\n              <div className=\"flex flex-wrap gap-2 items-center\">\r\n                {colorGroups.map((g) => {\r\n                  const isSelected = selectedColor === g.color?.toLowerCase().trim();\r\n                  const isDisabled = g.stock <= 0;\r\n                  \r\n                  return (\r\n                    <div key={g.color} className=\"flex flex-col items-center gap-1\">\r\n                      <button \r\n                        onClick={() => !isDisabled && onColorSelect(g.color)}\r\n                        disabled={isDisabled}\r\n                        className={`w-10 h-10 rounded-full transition-all ${\r\n                          isSelected \r\n                            ? 'border-[3px] border-green-500 scale-110' \r\n                            : isDisabled \r\n                              ? 'border-2 border-gray-100 opacity-30 grayscale cursor-not-allowed' \r\n                              : 'border-2 border-gray-300 hover:scale-105'\r\n                        }`}\r\n                        style={{ backgroundColor: getColorValue(g.color) }} \r\n                        title={isDisabled ? `${getAttributeLabel(language, 'color', g.color)} (${t(language, 'product.outOfStock')})` : `${getAttributeLabel(language, 'color', g.color)}${g.stock > 0 ? ` (${g.stock} ${t(language, 'product.pcs')})` : ''}`} \r\n                      />\r\n                      {g.stock > 0 && (\r\n                        <span className=\"text-xs text-gray-500\">{g.stock}</span>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Size Groups - Show only if not using new format */}\r\n      {!product?.productAttributes && sizeGroups.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-bold uppercase\">{t(language, 'product.size')}</label>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {sizeGroups.map((g) => {\r\n              let displayStock = g.stock;\r\n              if (selectedColor) {\r\n                const v = g.variants.find(v => {\r\n                  const colorOpt = getOptionValue(v.options, 'color');\r\n                  return colorOpt === selectedColor.toLowerCase().trim();\r\n                });\r\n                displayStock = v ? v.stock : 0;\r\n              }\r\n              const isSelected = selectedSize === g.size;\r\n              const isDisabled = displayStock <= 0;\r\n\r\n              return (\r\n                <button \r\n                  key={g.size} \r\n                  onClick={() => !isDisabled && onSizeSelect(g.size)}\r\n                  disabled={isDisabled}\r\n                  className={`min-w-[50px] px-3 py-2 rounded-lg border-2 transition-all ${\r\n                    isSelected \r\n                      ? 'border-green-500 bg-gray-50' \r\n                      : isDisabled \r\n                        ? 'border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed' \r\n                        : 'border-gray-200 hover:border-gray-400'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex flex-col text-center\">\r\n                    <span className={`text-sm font-medium ${isDisabled ? 'text-gray-400' : 'text-gray-900'}`}>{getAttributeLabel(language, 'size', g.size)}</span>\r\n                    {displayStock > 0 && (\r\n                      <span className={`text-xs ${isDisabled ? 'text-gray-300' : 'text-gray-500'}`}>{displayStock} {t(language, 'product.pcs')}</span>\r\n                    )}\r\n                  </div>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2790, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/products/%5Bslug%5D/ProductInfoAndActions.tsx"],"sourcesContent":["'use client';\r\n\r\nimport type { MouseEvent } from 'react';\r\nimport { Heart } from 'lucide-react';\r\nimport { formatPrice, type CurrencyCode } from '../../../lib/currency';\r\nimport { t, getProductText } from '../../../lib/i18n';\r\nimport type { LanguageCode } from '../../../lib/language';\r\nimport { CompareIcon } from '../../../components/icons/CompareIcon';\r\nimport { ProductAttributesSelector } from './ProductAttributesSelector';\r\nimport type { Product, ProductVariant } from './types';\r\n\r\ninterface ProductInfoAndActionsProps {\r\n  product: Product;\r\n  price: number;\r\n  originalPrice: number | null;\r\n  compareAtPrice: number | null;\r\n  discountPercent: number | null;\r\n  currency: string;\r\n  language: LanguageCode;\r\n  averageRating: number;\r\n  reviewsCount: number;\r\n  quantity: number;\r\n  maxQuantity: number;\r\n  isOutOfStock: boolean;\r\n  isVariationRequired: boolean;\r\n  hasUnavailableAttributes: boolean;\r\n  unavailableAttributes: Map<string, boolean>;\r\n  canAddToCart: boolean;\r\n  isAddingToCart: boolean;\r\n  isInWishlist: boolean;\r\n  isInCompare: boolean;\r\n  showMessage: string | null;\r\n  isLoggedIn: boolean;\r\n  currentVariant: ProductVariant | null;\r\n  attributeGroups: Map<string, any[]>;\r\n  selectedColor: string | null;\r\n  selectedSize: string | null;\r\n  selectedAttributeValues: Map<string, string>;\r\n  colorGroups: Array<{ color: string; stock: number; variants: ProductVariant[] }>;\r\n  sizeGroups: Array<{ size: string; stock: number; variants: ProductVariant[] }>;\r\n  onQuantityAdjust: (delta: number) => void;\r\n  onAddToCart: () => Promise<void>;\r\n  onAddToWishlist: (e: MouseEvent) => void;\r\n  onCompareToggle: (e: MouseEvent) => void;\r\n  onScrollToReviews: () => void;\r\n  onColorSelect: (color: string) => void;\r\n  onSizeSelect: (size: string) => void;\r\n  onAttributeValueSelect: (attrKey: string, value: string) => void;\r\n  getOptionValue: (options: any[] | undefined, key: string) => string | null;\r\n  getRequiredAttributesMessage: () => string;\r\n}\r\n\r\nexport function ProductInfoAndActions({\r\n  product,\r\n  price,\r\n  originalPrice,\r\n  compareAtPrice,\r\n  discountPercent,\r\n  currency,\r\n  language,\r\n  averageRating,\r\n  reviewsCount,\r\n  quantity,\r\n  maxQuantity,\r\n  isOutOfStock,\r\n  isVariationRequired,\r\n  hasUnavailableAttributes,\r\n  unavailableAttributes,\r\n  canAddToCart,\r\n  isAddingToCart,\r\n  isInWishlist,\r\n  isInCompare,\r\n  showMessage,\r\n  isLoggedIn,\r\n  currentVariant,\r\n  attributeGroups,\r\n  selectedColor,\r\n  selectedSize,\r\n  selectedAttributeValues,\r\n  colorGroups,\r\n  sizeGroups,\r\n  onQuantityAdjust,\r\n  onAddToCart,\r\n  onAddToWishlist,\r\n  onCompareToggle,\r\n  onScrollToReviews,\r\n  onColorSelect,\r\n  onSizeSelect,\r\n  onAttributeValueSelect,\r\n  getOptionValue,\r\n  getRequiredAttributesMessage,\r\n}: ProductInfoAndActionsProps) {\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"flex-1\">\r\n        {product.brand && <p className=\"text-sm text-gray-500 mb-2\">{product.brand.name}</p>}\r\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\r\n          {getProductText(language, product.id, 'title') || product.title}\r\n        </h1>\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex flex-col gap-1\">\r\n            {/* Discounted price with discount percentage */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <p className=\"text-3xl font-bold text-gray-900\">{formatPrice(price, currency as CurrencyCode)}</p>\r\n              {discountPercent && discountPercent > 0 && (\r\n                <span className=\"text-lg font-semibold text-blue-600\">\r\n                  -{discountPercent}%\r\n                </span>\r\n              )}\r\n            </div>\r\n            {/* Original price below discounted price - full width, not inline */}\r\n            {(originalPrice || (compareAtPrice && compareAtPrice > price)) && (\r\n              <p className=\"text-xl text-gray-500 line-through decoration-gray-400 mt-1\">\r\n                {formatPrice(originalPrice || compareAtPrice || 0, currency as CurrencyCode)}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"text-gray-600 mb-8 prose prose-sm\" dangerouslySetInnerHTML={{ __html: getProductText(language, product.id, 'longDescription') || product.description || '' }} />\r\n\r\n        {/* Attributes Section */}\r\n        <div className=\"mb-8\">\r\n          <ProductAttributesSelector\r\n            product={product}\r\n            attributeGroups={attributeGroups}\r\n            selectedColor={selectedColor}\r\n            selectedSize={selectedSize}\r\n            selectedAttributeValues={selectedAttributeValues}\r\n            unavailableAttributes={unavailableAttributes}\r\n            colorGroups={colorGroups}\r\n            sizeGroups={sizeGroups}\r\n            language={language}\r\n            quantity={quantity}\r\n            maxQuantity={maxQuantity}\r\n            isOutOfStock={isOutOfStock}\r\n            isVariationRequired={isVariationRequired}\r\n            hasUnavailableAttributes={hasUnavailableAttributes}\r\n            canAddToCart={canAddToCart}\r\n            isAddingToCart={isAddingToCart}\r\n            showMessage={showMessage}\r\n            onColorSelect={onColorSelect}\r\n            onSizeSelect={onSizeSelect}\r\n            onAttributeValueSelect={onAttributeValueSelect}\r\n            onQuantityAdjust={onQuantityAdjust}\r\n            onAddToCart={onAddToCart}\r\n            getOptionValue={getOptionValue}\r\n            getRequiredAttributesMessage={getRequiredAttributesMessage}\r\n          />\r\n        </div>\r\n\r\n        {/* Rating Section */}\r\n        <div className=\"mt-8 p-4 bg-white border border-gray-200 rounded-2xl space-y-4\">\r\n          <div className=\"flex items-center gap-2 pb-3 border-b border-gray-200\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"flex items-center gap-1\">\r\n                {[1, 2, 3, 4, 5].map((star) => (\r\n                  <svg\r\n                    key={star}\r\n                    className={`w-5 h-5 ${\r\n                      star <= Math.round(averageRating)\r\n                        ? 'text-yellow-400'\r\n                        : 'text-gray-300'\r\n                    }`}\r\n                    fill=\"currentColor\"\r\n                    viewBox=\"0 0 20 20\"\r\n                  >\r\n                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                  </svg>\r\n                ))}\r\n              </div>\r\n              <span className=\"text-sm font-semibold text-gray-900\">\r\n                {averageRating > 0 ? averageRating.toFixed(1) : '0.0'}\r\n              </span>\r\n            </div>\r\n            <span \r\n              onClick={onScrollToReviews}\r\n              className=\"text-sm text-gray-600 cursor-pointer hover:text-gray-900 hover:underline transition-colors\"\r\n            >\r\n              ({reviewsCount} {reviewsCount === 1 ? t(language, 'common.reviews.review') : t(language, 'common.reviews.reviews')})\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Action Buttons - Aligned with bottom of image */}\r\n      <div className=\"mt-auto pt-6\">\r\n        {/* Show required attributes message if needed */}\r\n        {isVariationRequired && (\r\n          <div className=\"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n            <p className=\"text-sm text-yellow-800 font-medium\">\r\n              {getRequiredAttributesMessage()}\r\n            </p>\r\n          </div>\r\n        )}\r\n        {/* Show unavailable attributes message if needed */}\r\n        {hasUnavailableAttributes && !isVariationRequired && (\r\n          <div className=\"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n            <p className=\"text-sm text-red-800 font-medium\">\r\n              {Array.from(unavailableAttributes.entries()).map(([attrKey]) => {\r\n                const productAttr = product?.productAttributes?.find((pa: any) => pa.attribute?.key === attrKey);\r\n                const attributeName = productAttr?.attribute?.name || attrKey.charAt(0).toUpperCase() + attrKey.slice(1);\r\n                return attrKey === 'color' ? t(language, 'product.color') : \r\n                       attrKey === 'size' ? t(language, 'product.size') : \r\n                       attributeName;\r\n              }).join(', ')} {t(language, 'product.outOfStock')}\r\n            </p>\r\n          </div>\r\n        )}\r\n        <div className=\"flex items-center gap-3 pt-4 border-t\">\r\n          <div className=\"flex items-center border rounded-xl overflow-hidden bg-gray-50\">\r\n            <button \r\n              onClick={() => onQuantityAdjust(-1)} \r\n              disabled={quantity <= 1}\r\n              className=\"w-12 h-12 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              -\r\n            </button>\r\n            <div className=\"w-12 text-center font-bold\">{quantity}</div>\r\n            <button \r\n              onClick={() => onQuantityAdjust(1)} \r\n              disabled={quantity >= maxQuantity}\r\n              className=\"w-12 h-12 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n          <button \r\n            disabled={!canAddToCart || isAddingToCart} \r\n            className=\"flex-1 h-12 bg-gray-900 text-white rounded-xl uppercase font-bold disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n            onClick={onAddToCart}\r\n          >\r\n            {isAddingToCart ? t(language, 'product.adding') : (isOutOfStock ? t(language, 'product.outOfStock') : (isVariationRequired ? getRequiredAttributesMessage() : (hasUnavailableAttributes ? t(language, 'product.outOfStock') : t(language, 'product.addToCart'))))}\r\n          </button>\r\n          <button \r\n            onClick={onCompareToggle} \r\n            className={`w-12 h-12 rounded-xl border-2 flex items-center justify-center transition-all duration-200 ${isInCompare ? 'border-gray-900 bg-gray-50' : 'border-gray-200 hover:border-gray-300'}`}\r\n          >\r\n            <CompareIcon isActive={isInCompare} />\r\n          </button>\r\n          <button \r\n            onClick={onAddToWishlist} \r\n            className={`w-12 h-12 rounded-xl border-2 flex items-center justify-center ${isInWishlist ? 'border-gray-900 bg-gray-50' : 'border-gray-200'}`}\r\n          >\r\n            <Heart fill={isInWishlist ? 'currentColor' : 'none'} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {showMessage && <div className=\"mt-4 p-4 bg-gray-900 text-white rounded-md shadow-lg\">{showMessage}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/products/%5Bslug%5D/types.ts"],"sourcesContent":["// Product page types and interfaces\r\n\r\nexport interface ProductPageProps {\r\n  params: Promise<{ slug?: string }>;\r\n}\r\n\r\nexport interface ProductMedia {\r\n  url?: string;\r\n  type?: string;\r\n}\r\n\r\nexport interface VariantOption {\r\n  attribute: string;\r\n  value: string;\r\n  key: string;\r\n  valueId?: string; // New format: AttributeValue ID\r\n  attributeId?: string; // New format: Attribute ID\r\n}\r\n\r\nexport interface ProductVariant {\r\n  id: string;\r\n  sku: string;\r\n  price: number;\r\n  originalPrice?: number | null;\r\n  compareAtPrice?: number;\r\n  stock: number;\r\n  available: boolean;\r\n  options: VariantOption[];\r\n  productDiscount?: number | null;\r\n  globalDiscount?: number | null;\r\n  imageUrl?: string;\r\n}\r\n\r\nexport interface ProductLabel {\r\n  id: string;\r\n  type: 'text' | 'percentage';\r\n  value: string;\r\n  position: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\r\n  color: string | null;\r\n}\r\n\r\nexport interface ProductAttribute {\r\n  id: string;\r\n  attribute: {\r\n    id: string;\r\n    key: string;\r\n    name: string;\r\n    values: Array<{\r\n      id: string;\r\n      value: string;\r\n      label: string;\r\n      imageUrl?: string | null;\r\n      colors?: string[] | null;\r\n    }>;\r\n  };\r\n}\r\n\r\nexport interface Product {\r\n  id: string;\r\n  slug: string;\r\n  title: string;\r\n  subtitle?: string;\r\n  description?: string;\r\n  media: ProductMedia[] | string[];\r\n  variants: ProductVariant[];\r\n  labels?: ProductLabel[];\r\n  brand?: {\r\n    id: string;\r\n    name: string;\r\n  };\r\n  categories?: Array<{\r\n    id: string;\r\n    slug: string;\r\n    title: string;\r\n  }>;\r\n  productAttributes?: ProductAttribute[];\r\n  productDiscount?: number | null;\r\n  globalDiscount?: number | null;\r\n}\r\n\r\n// Reserved routes that should not be treated as product slugs\r\nexport const RESERVED_ROUTES = ['admin', 'login', 'register', 'cart', 'checkout', 'profile', 'orders', 'wishlist', 'compare', 'categories', 'products', 'about', 'contact', 'delivery', 'shipping', 'returns', 'faq', 'support', 'stores', 'privacy', 'terms', 'cookies'];\r\n\r\nexport const WISHLIST_KEY = 'shop_wishlist';\r\nexport const COMPARE_KEY = 'shop_compare';\r\n\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;;;;;AAiF7B,MAAM,kBAAkB;IAAC;IAAS;IAAS;IAAY;IAAQ;IAAY;IAAW;IAAU;IAAY;IAAW;IAAc;IAAY;IAAS;IAAW;IAAY;IAAY;IAAW;IAAO;IAAW;IAAU;IAAW;IAAS;CAAU;AAElQ,MAAM,eAAe;AACrB,MAAM,cAAc"}},
    {"offset": {"line": 3204, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/products/%5Bslug%5D/useProductPage.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use, useCallback, useMemo } from 'react';\r\nimport type { MouseEvent } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { apiClient } from '../../../lib/api-client';\r\nimport { getStoredCurrency } from '../../../lib/currency';\r\nimport { getStoredLanguage, type LanguageCode } from '../../../lib/language';\r\nimport { t } from '../../../lib/i18n';\r\nimport { WISHLIST_KEY, COMPARE_KEY, RESERVED_ROUTES } from './types';\r\nimport {\r\n  processImageUrl,\r\n  smartSplitUrls,\r\n  normalizeUrlForComparison,\r\n  cleanImageUrls,\r\n} from '../../../lib/utils/image-utils';\r\nimport type { Product, ProductVariant, VariantOption } from './types';\r\n\r\ninterface AttributeGroupValue {\r\n  valueId?: string;\r\n  value: string;\r\n  label: string;\r\n  stock: number;\r\n  variants: ProductVariant[];\r\n  imageUrl?: string | null;\r\n  colors?: string[] | null;\r\n}\r\n\r\nexport function useProductPage(params: Promise<{ slug?: string }>) {\r\n  const router = useRouter();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [currency, setCurrency] = useState(getStoredCurrency());\r\n  const [language, setLanguage] = useState<LanguageCode>('en');\r\n  const [selectedVariant, setSelectedVariant] = useState<ProductVariant | null>(null);\r\n  const [selectedColor, setSelectedColor] = useState<string | null>(null);\r\n  const [selectedSize, setSelectedSize] = useState<string | null>(null);\r\n  const [selectedAttributeValues, setSelectedAttributeValues] = useState<Map<string, string>>(new Map());\r\n  const [isAddingToCart, setIsAddingToCart] = useState(false);\r\n  const [showMessage, setShowMessage] = useState<string | null>(null);\r\n  const [thumbnailStartIndex, setThumbnailStartIndex] = useState(0);\r\n  const [isInWishlist, setIsInWishlist] = useState(false);\r\n  const [isInCompare, setIsInCompare] = useState(false);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [reviews, setReviews] = useState<Array<{ rating: number }>>([]);\r\n\r\n  const resolvedParams = use(params);\r\n  const rawSlug = resolvedParams?.slug ?? '';\r\n  const slugParts = rawSlug.includes(':') ? rawSlug.split(':') : [rawSlug];\r\n  const slug = slugParts[0];\r\n  const variantIdFromUrl = slugParts.length > 1 ? slugParts[1] : null;\r\n\r\n  // Get images array from product\r\n  const images = useMemo(() => {\r\n    if (!product) return [];\r\n    const mainImages = Array.isArray(product.media) ? product.media : [];\r\n    const cleanedMain = cleanImageUrls(mainImages);\r\n    const variantImages: any[] = [];\r\n    if (product.variants && Array.isArray(product.variants)) {\r\n      const sortedVariants = [...product.variants].sort((a, b) => {\r\n        const aPos = (a as any).position ?? 0;\r\n        const bPos = (b as any).position ?? 0;\r\n        return aPos - bPos;\r\n      });\r\n      sortedVariants.forEach((v) => {\r\n        if (v.imageUrl) {\r\n          const urls = smartSplitUrls(v.imageUrl);\r\n          variantImages.push(...urls);\r\n        }\r\n      });\r\n    }\r\n    const cleanedVariantImages = cleanImageUrls(variantImages);\r\n    const allImages: string[] = [];\r\n    const seenNormalized = new Set<string>();\r\n    cleanedMain.forEach((img) => {\r\n      const processed = processImageUrl(img) || img;\r\n      const normalized = normalizeUrlForComparison(processed);\r\n      if (!seenNormalized.has(normalized)) {\r\n        allImages.push(img);\r\n        seenNormalized.add(normalized);\r\n      }\r\n    });\r\n    cleanedVariantImages.forEach((img) => {\r\n      const processed = processImageUrl(img) || img;\r\n      const normalized = normalizeUrlForComparison(processed);\r\n      if (!seenNormalized.has(normalized)) {\r\n        allImages.push(img);\r\n        seenNormalized.add(normalized);\r\n      }\r\n    });\r\n    return allImages;\r\n  }, [product]);\r\n\r\n  // Fetch product\r\n  const fetchProduct = useCallback(async () => {\r\n    if (!slug || RESERVED_ROUTES.includes(slug.toLowerCase())) return;\r\n    try {\r\n      setLoading(true);\r\n      const currentLang = getStoredLanguage();\r\n      let data: Product;\r\n      try {\r\n        data = await apiClient.get<Product>(`/api/v1/products/${slug}`, {\r\n          params: { lang: currentLang }\r\n        });\r\n      } catch (error: any) {\r\n        if (error?.status === 404 && currentLang !== 'en') {\r\n          try {\r\n            data = await apiClient.get<Product>(`/api/v1/products/${slug}`, {\r\n              params: { lang: 'en' }\r\n            });\r\n          } catch (fallbackError) {\r\n            throw error;\r\n          }\r\n        } else {\r\n          throw error;\r\n        }\r\n      }\r\n      console.log('üì¶ [USE PRODUCT PAGE] Fetched product:', data.id);\r\n      console.log('üì¶ [USE PRODUCT PAGE] productAttributes:', data.productAttributes);\r\n      console.log('üì¶ [USE PRODUCT PAGE] productAttributes length:', data.productAttributes?.length || 0);\r\n      console.log('üì¶ [USE PRODUCT PAGE] variants count:', data.variants?.length || 0);\r\n      if (data.variants && data.variants.length > 0) {\r\n        console.log('üì¶ [USE PRODUCT PAGE] First variant options:', data.variants[0]?.options);\r\n        data.variants.forEach((v: any, idx: number) => {\r\n          console.log(`üì¶ [USE PRODUCT PAGE] Variant ${idx} (${v.id}) options:`, v.options);\r\n        });\r\n      }\r\n      setProduct(data);\r\n      setCurrentImageIndex(0);\r\n      setThumbnailStartIndex(0);\r\n      if (data.variants && data.variants.length > 0) {\r\n        let initialVariant = data.variants[0];\r\n        if (variantIdFromUrl) {\r\n          const variantById = data.variants.find(v => v.id === variantIdFromUrl || v.id.endsWith(variantIdFromUrl));\r\n          const variantByIndex = data.variants[parseInt(variantIdFromUrl) - 1];\r\n          initialVariant = variantById || variantByIndex || data.variants[0];\r\n        }\r\n        setSelectedVariant(initialVariant);\r\n        const colorOption = initialVariant.options?.find(opt => opt.key === 'color');\r\n        if (colorOption) setSelectedColor(colorOption.value?.toLowerCase().trim() || null);\r\n        const sizeOption = initialVariant.options?.find(opt => opt.key === 'size');\r\n        if (sizeOption) setSelectedSize(sizeOption.value?.toLowerCase().trim() || null);\r\n      }\r\n    } catch (error: any) {\r\n      if (error?.status === 404) {\r\n        setProduct(null);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [slug, variantIdFromUrl]);\r\n\r\n  useEffect(() => {\r\n    if (!slug) return;\r\n    if (RESERVED_ROUTES.includes(slug.toLowerCase())) {\r\n      router.replace(`/${slug}`);\r\n    }\r\n  }, [slug, router]);\r\n\r\n  useEffect(() => {\r\n    setLanguage(getStoredLanguage());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!slug || RESERVED_ROUTES.includes(slug.toLowerCase())) return;\r\n    fetchProduct();\r\n    const handleCurrencyUpdate = () => setCurrency(getStoredCurrency());\r\n    const handleLanguageUpdate = () => {\r\n      setLanguage(getStoredLanguage());\r\n      fetchProduct();\r\n    };\r\n    const handleCurrencyRatesUpdate = () => setCurrency(getStoredCurrency());\r\n    window.addEventListener('currency-updated', handleCurrencyUpdate);\r\n    window.addEventListener('language-updated', handleLanguageUpdate);\r\n    window.addEventListener('currency-rates-updated', handleCurrencyRatesUpdate);\r\n    return () => {\r\n      window.removeEventListener('currency-updated', handleCurrencyUpdate);\r\n      window.removeEventListener('language-updated', handleLanguageUpdate);\r\n      window.removeEventListener('currency-rates-updated', handleCurrencyRatesUpdate);\r\n    };\r\n  }, [slug, variantIdFromUrl, router, fetchProduct]);\r\n\r\n  useEffect(() => {\r\n    if (!product) return;\r\n    const checkWishlist = () => {\r\n      if (typeof window === 'undefined') return;\r\n      try {\r\n        const stored = localStorage.getItem(WISHLIST_KEY);\r\n        const wishlist = stored ? JSON.parse(stored) : [];\r\n        setIsInWishlist(wishlist.includes(product.id));\r\n      } catch { setIsInWishlist(false); }\r\n    };\r\n    checkWishlist();\r\n    window.addEventListener('wishlist-updated', checkWishlist);\r\n    return () => window.removeEventListener('wishlist-updated', checkWishlist);\r\n  }, [product?.id]);\r\n\r\n  useEffect(() => {\r\n    if (!product) return;\r\n    const checkCompare = () => {\r\n      if (typeof window === 'undefined') return;\r\n      try {\r\n        const stored = localStorage.getItem(COMPARE_KEY);\r\n        const compare = stored ? JSON.parse(stored) : [];\r\n        setIsInCompare(compare.includes(product.id));\r\n      } catch { setIsInCompare(false); }\r\n    };\r\n    checkCompare();\r\n    window.addEventListener('compare-updated', checkCompare);\r\n    return () => window.removeEventListener('compare-updated', checkCompare);\r\n  }, [product?.id]);\r\n\r\n  useEffect(() => {\r\n    if (images.length > 0 && currentImageIndex >= images.length) {\r\n      setCurrentImageIndex(0);\r\n    }\r\n  }, [images.length, currentImageIndex]);\r\n\r\n  useEffect(() => {\r\n    if (!product || !slug) return;\r\n    const loadReviews = async () => {\r\n      try {\r\n        const data = await apiClient.get<Array<{ rating: number }>>(`/api/v1/products/${slug}/reviews`);\r\n        setReviews(data || []);\r\n      } catch (error: any) {\r\n        setReviews([]);\r\n      }\r\n    };\r\n    loadReviews();\r\n    const handleReviewUpdate = () => loadReviews();\r\n    if (typeof window !== 'undefined') {\r\n      window.addEventListener('review-updated', handleReviewUpdate);\r\n      return () => window.removeEventListener('review-updated', handleReviewUpdate);\r\n    }\r\n  }, [product?.id, slug]);\r\n\r\n  const averageRating = reviews.length > 0\r\n    ? reviews.reduce((sum, review) => sum + review.rating, 0) / reviews.length\r\n    : 0;\r\n\r\n  const scrollToReviews = useCallback(() => {\r\n    const reviewsElement = document.getElementById('product-reviews');\r\n    if (reviewsElement) {\r\n      reviewsElement.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n    }\r\n  }, []);\r\n\r\n  const getOptionValue = useCallback((options: VariantOption[] | undefined, key: string): string | null => {\r\n    if (!options) return null;\r\n    const opt = options.find(o => o.key === key || o.attribute === key);\r\n    return opt?.value?.toLowerCase().trim() || null;\r\n  }, []);\r\n\r\n  const variantHasColor = useCallback((variant: ProductVariant, color: string): boolean => {\r\n    if (!variant.options || !color) return false;\r\n    const normalizedColor = color.toLowerCase().trim();\r\n    const colorOptions = variant.options.filter(opt => \r\n      (opt.key === 'color' || opt.attribute === 'color')\r\n    );\r\n    return colorOptions.some(opt => {\r\n      const optValue = opt.value?.toLowerCase().trim();\r\n      return optValue === normalizedColor;\r\n    });\r\n  }, []);\r\n\r\n  const findVariantByColorAndSize = useCallback((color: string | null, size: string | null): ProductVariant | null => {\r\n    if (!product?.variants || product.variants.length === 0) return null;\r\n    const normalizedColor = color?.toLowerCase().trim();\r\n    const normalizedSize = size?.toLowerCase().trim();\r\n    if (normalizedColor && normalizedSize) {\r\n      const variant = product.variants.find(v => {\r\n        const hasColor = variantHasColor(v, normalizedColor);\r\n        const vSize = getOptionValue(v.options, 'size');\r\n        return hasColor && vSize === normalizedSize;\r\n      });\r\n      if (variant) return variant;\r\n    }\r\n    if (normalizedColor) {\r\n      const colorVariants = product.variants.filter(v => variantHasColor(v, normalizedColor));\r\n      if (colorVariants.length > 0) {\r\n        return colorVariants.find(v => v.stock > 0) || colorVariants[0];\r\n      }\r\n    }\r\n    if (normalizedSize) {\r\n      const sizeVariants = product.variants.filter(v => {\r\n        const vSize = getOptionValue(v.options, 'size');\r\n        return vSize === normalizedSize;\r\n      });\r\n      if (sizeVariants.length > 0) {\r\n        return sizeVariants.find(v => v.stock > 0) || sizeVariants[0];\r\n      }\r\n    }\r\n    return product.variants.find(v => v.stock > 0) || product.variants[0] || null;\r\n  }, [product?.variants, getOptionValue, variantHasColor]);\r\n\r\n  const findVariantByAllAttributes = useCallback((\r\n    color: string | null,\r\n    size: string | null,\r\n    otherAttributes: Map<string, string>\r\n  ): ProductVariant | null => {\r\n    if (!product?.variants || product.variants.length === 0) return null;\r\n    const normalizedColor = color?.toLowerCase().trim();\r\n    const normalizedSize = size?.toLowerCase().trim();\r\n    const allSelectedAttributes = new Map<string, string>();\r\n    if (normalizedColor) allSelectedAttributes.set('color', normalizedColor);\r\n    if (normalizedSize) allSelectedAttributes.set('size', normalizedSize);\r\n    otherAttributes.forEach((value, key) => {\r\n      if (key !== 'color' && key !== 'size') {\r\n        allSelectedAttributes.set(key, value.toLowerCase().trim());\r\n      }\r\n    });\r\n    const variantMatches = (variant: ProductVariant): boolean => {\r\n      if (normalizedColor) {\r\n        if (!variantHasColor(variant, normalizedColor)) return false;\r\n      }\r\n      if (normalizedSize) {\r\n        const vSize = getOptionValue(variant.options, 'size');\r\n        if (vSize !== normalizedSize) return false;\r\n      }\r\n      for (const [attrKey, attrValue] of otherAttributes.entries()) {\r\n        if (attrKey === 'color' || attrKey === 'size') continue;\r\n        const variantValue = getOptionValue(variant.options, attrKey);\r\n        const normalizedAttrValue = attrValue.toLowerCase().trim();\r\n        const option = variant.options?.find(opt => \r\n          opt.key === attrKey || opt.attribute === attrKey\r\n        );\r\n        if (option) {\r\n          if (option.valueId && attrValue && option.valueId === attrValue) {\r\n            continue;\r\n          }\r\n          if (variantValue !== normalizedAttrValue) {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    const exactMatch = product.variants.find(v => variantMatches(v) && v.imageUrl);\r\n    if (exactMatch) return exactMatch;\r\n    const anyMatch = product.variants.find(v => variantMatches(v));\r\n    if (anyMatch) return anyMatch;\r\n    if (normalizedColor || normalizedSize) {\r\n      return findVariantByColorAndSize(normalizedColor || null, normalizedSize || null);\r\n    }\r\n    return product.variants.find(v => v.stock > 0) || product.variants[0] || null;\r\n  }, [product?.variants, getOptionValue, findVariantByColorAndSize, variantHasColor]);\r\n\r\n  // Build attribute groups - simplified version\r\n  const attributeGroups = useMemo(() => {\r\n    const groups = new Map<string, AttributeGroupValue[]>();\r\n    if (!product) {\r\n      console.log('üîÑ [ATTRIBUTE GROUPS] No product, returning empty groups');\r\n      return groups;\r\n    }\r\n    console.log('üîÑ [ATTRIBUTE GROUPS] Building attribute groups for product:', product.id);\r\n    console.log('üîÑ [ATTRIBUTE GROUPS] product.productAttributes:', product.productAttributes);\r\n    console.log('üîÑ [ATTRIBUTE GROUPS] product.productAttributes length:', product.productAttributes?.length || 0);\r\n    const isVariantCompatible = (variant: ProductVariant, currentSelections: Map<string, string>, excludeAttrKey?: string): boolean => {\r\n      if (currentSelections.size === 0) return true;\r\n      for (const [attrKey, selectedValue] of currentSelections.entries()) {\r\n        if (excludeAttrKey && attrKey === excludeAttrKey) continue;\r\n        const normalizedSelectedValue = selectedValue.toLowerCase().trim();\r\n        let hasMatchingValue = false;\r\n        const matchingOptions = variant.options?.filter(opt => {\r\n          const optKey = opt.key || opt.attribute;\r\n          return optKey === attrKey;\r\n        }) || [];\r\n        if (matchingOptions.length === 0) return false;\r\n        for (const option of matchingOptions) {\r\n          const optValue = option.value?.toLowerCase().trim();\r\n          const optValueId = option.valueId;\r\n          if (optValue === normalizedSelectedValue || (optValueId && optValueId === selectedValue)) {\r\n            hasMatchingValue = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!hasMatchingValue) return false;\r\n      }\r\n      return true;\r\n    };\r\n    const getCurrentSelections = (excludeAttrKey: string): Map<string, string> => {\r\n      const selections = new Map<string, string>();\r\n      if (selectedColor && excludeAttrKey !== 'color') selections.set('color', selectedColor);\r\n      if (selectedSize && excludeAttrKey !== 'size') selections.set('size', selectedSize);\r\n      selectedAttributeValues.forEach((value, key) => {\r\n        if (key !== excludeAttrKey) selections.set(key, value);\r\n      });\r\n      return selections;\r\n    };\r\n    if (product.productAttributes && product.productAttributes.length > 0) {\r\n      console.log('üîÑ [ATTRIBUTE GROUPS] Using productAttributes format, processing', product.productAttributes.length, 'attributes');\r\n      product.productAttributes.forEach((productAttr) => {\r\n        const attrKey = productAttr.attribute.key;\r\n        console.log('üîÑ [ATTRIBUTE GROUPS] Processing attribute:', attrKey, 'with', productAttr.attribute.values?.length || 0, 'values');\r\n        const valueMap = new Map<string, { valueId?: string; value: string; label: string; variants: ProductVariant[] }>();\r\n        product.variants?.forEach((variant) => {\r\n          const options = variant.options?.filter((opt) => {\r\n            if (opt.valueId && opt.attributeId === productAttr.attribute.id) return true;\r\n            return opt.key === attrKey || opt.attribute === attrKey;\r\n          }) || [];\r\n          options.forEach((option) => {\r\n            const valueId = option.valueId || '';\r\n            const value = option.value || '';\r\n            let label = option.value || '';\r\n            if (valueId && productAttr.attribute.values) {\r\n              const attrValue = productAttr.attribute.values.find((v: any) => v.id === valueId);\r\n              if (attrValue) label = attrValue.label || attrValue.value || value;\r\n            }\r\n            const mapKey = valueId || value;\r\n            if (!valueMap.has(mapKey)) {\r\n              valueMap.set(mapKey, { valueId: valueId || undefined, value, label, variants: [] });\r\n            }\r\n            if (!valueMap.get(mapKey)!.variants.some(v => v.id === variant.id)) {\r\n              valueMap.get(mapKey)!.variants.push(variant);\r\n            }\r\n          });\r\n        });\r\n        const currentSelections = getCurrentSelections(attrKey);\r\n        const groupsArray = Array.from(valueMap.values()).map((item) => {\r\n          let attrValue = null;\r\n          if (item.valueId && productAttr.attribute.values) {\r\n            attrValue = productAttr.attribute.values.find((v: any) => v.id === item.valueId);\r\n          }\r\n          if (!attrValue && productAttr.attribute.values) {\r\n            attrValue = productAttr.attribute.values.find((v: any) => \r\n              v.value?.toLowerCase() === item.value?.toLowerCase() || v.value === item.value\r\n            );\r\n          }\r\n          let stock = 0;\r\n          if (currentSelections.size > 0) {\r\n            const compatibleVariants = item.variants.filter(v => isVariantCompatible(v, currentSelections, attrKey));\r\n            stock = compatibleVariants.reduce((sum, v) => sum + v.stock, 0);\r\n          } else {\r\n            stock = item.variants.reduce((sum, v) => sum + v.stock, 0);\r\n          }\r\n          return {\r\n            valueId: item.valueId,\r\n            value: item.value,\r\n            label: item.label,\r\n            stock: stock,\r\n            variants: item.variants,\r\n            imageUrl: attrValue?.imageUrl || null,\r\n            colors: attrValue?.colors || null,\r\n          };\r\n        });\r\n        console.log('üîÑ [ATTRIBUTE GROUPS] Built', groupsArray.length, 'values for attribute', attrKey);\r\n        groups.set(attrKey, groupsArray);\r\n      });\r\n      console.log('üîÑ [ATTRIBUTE GROUPS] Final groups size:', groups.size);\r\n    } else {\r\n      console.log('üîÑ [ATTRIBUTE GROUPS] No productAttributes, falling back to old format (color/size only)');\r\n      console.log('üîÑ [ATTRIBUTE GROUPS] Product variants count:', product?.variants?.length || 0);\r\n      if (product?.variants) {\r\n        const colorMap = new Map<string, ProductVariant[]>();\r\n        const sizeMap = new Map<string, ProductVariant[]>();\r\n        product.variants.forEach((variant) => {\r\n          console.log('üîÑ [ATTRIBUTE GROUPS] Variant', variant.id, 'options:', variant.options);\r\n          variant.options?.forEach((opt) => {\r\n            const attrKey = opt.key || opt.attribute || '';\r\n            const value = opt.value || '';\r\n            console.log('üîÑ [ATTRIBUTE GROUPS] Option:', { attrKey, value });\r\n            if (!value) return;\r\n            if (attrKey === 'color') {\r\n              const normalizedColor = value.toLowerCase().trim();\r\n              if (!colorMap.has(normalizedColor)) colorMap.set(normalizedColor, []);\r\n              if (!colorMap.get(normalizedColor)!.some(v => v.id === variant.id)) {\r\n                colorMap.get(normalizedColor)!.push(variant);\r\n              }\r\n            } else if (attrKey === 'size') {\r\n              const normalizedSize = value.toLowerCase().trim();\r\n              if (!sizeMap.has(normalizedSize)) sizeMap.set(normalizedSize, []);\r\n              if (!sizeMap.get(normalizedSize)!.some(v => v.id === variant.id)) {\r\n                sizeMap.get(normalizedSize)!.push(variant);\r\n              }\r\n            } else {\r\n              // Also collect other attributes, not just color and size\r\n              console.log('üîÑ [ATTRIBUTE GROUPS] Found other attribute:', attrKey, '=', value);\r\n            }\r\n          });\r\n        });\r\n        console.log('üîÑ [ATTRIBUTE GROUPS] Color map size:', colorMap.size);\r\n        console.log('üîÑ [ATTRIBUTE GROUPS] Size map size:', sizeMap.size);\r\n        if (colorMap.size > 0) {\r\n          const colorGroups = Array.from(colorMap.entries()).map(([value, variants]) => ({\r\n            value, label: value, stock: variants.reduce((sum, v) => sum + v.stock, 0), variants,\r\n          }));\r\n          console.log('üîÑ [ATTRIBUTE GROUPS] Setting color groups:', colorGroups.length);\r\n          groups.set('color', colorGroups);\r\n        }\r\n        if (sizeMap.size > 0) {\r\n          const sizeGroups = Array.from(sizeMap.entries()).map(([value, variants]) => ({\r\n            value, label: value, stock: variants.reduce((sum, v) => sum + v.stock, 0), variants,\r\n          }));\r\n          console.log('üîÑ [ATTRIBUTE GROUPS] Setting size groups:', sizeGroups.length);\r\n          groups.set('size', sizeGroups);\r\n        }\r\n        \r\n        // Also collect ALL other attributes from variants (not just color/size)\r\n        const otherAttributesMap = new Map<string, Map<string, ProductVariant[]>>();\r\n        product.variants.forEach((variant) => {\r\n          variant.options?.forEach((opt) => {\r\n            const attrKey = opt.key || opt.attribute || '';\r\n            const value = opt.value || '';\r\n            if (!value || attrKey === 'color' || attrKey === 'size') return;\r\n            \r\n            if (!otherAttributesMap.has(attrKey)) {\r\n              otherAttributesMap.set(attrKey, new Map<string, ProductVariant[]>());\r\n            }\r\n            const valueMap = otherAttributesMap.get(attrKey)!;\r\n            const normalizedValue = value.toLowerCase().trim();\r\n            if (!valueMap.has(normalizedValue)) {\r\n              valueMap.set(normalizedValue, []);\r\n            }\r\n            if (!valueMap.get(normalizedValue)!.some(v => v.id === variant.id)) {\r\n              valueMap.get(normalizedValue)!.push(variant);\r\n            }\r\n          });\r\n        });\r\n        \r\n        // Add all other attributes to groups\r\n        otherAttributesMap.forEach((valueMap, attrKey) => {\r\n          const attrGroups = Array.from(valueMap.entries()).map(([value, variants]) => ({\r\n            value, label: value, stock: variants.reduce((sum, v) => sum + v.stock, 0), variants,\r\n          }));\r\n          console.log('üîÑ [ATTRIBUTE GROUPS] Setting attribute', attrKey, 'with', attrGroups.length, 'values');\r\n          groups.set(attrKey, attrGroups);\r\n        });\r\n      }\r\n    }\r\n    console.log('üîÑ [ATTRIBUTE GROUPS] Returning groups with', groups.size, 'attributes:', Array.from(groups.keys()));\r\n    return groups;\r\n  }, [product, selectedColor, selectedSize, selectedAttributeValues, getOptionValue]);\r\n\r\n  const colorGroups: Array<{ color: string; stock: number; variants: ProductVariant[] }> = [];\r\n  const colorAttrGroup = attributeGroups.get('color');\r\n  if (colorAttrGroup) {\r\n    colorGroups.push(...colorAttrGroup.map((g) => ({\r\n      color: g.value, stock: g.stock, variants: g.variants,\r\n    })));\r\n  }\r\n\r\n  const sizeGroups: Array<{ size: string; stock: number; variants: ProductVariant[] }> = [];\r\n  const sizeAttrGroup = attributeGroups.get('size');\r\n  if (sizeAttrGroup) {\r\n    sizeGroups.push(...sizeAttrGroup.map((g) => ({\r\n      size: g.value, stock: g.stock, variants: g.variants,\r\n    })));\r\n  }\r\n\r\n  const currentVariant = selectedVariant || findVariantByColorAndSize(selectedColor, selectedSize) || product?.variants?.[0] || null;\r\n  const price = currentVariant?.price || 0;\r\n  const originalPrice = currentVariant?.originalPrice;\r\n  const compareAtPrice = currentVariant?.compareAtPrice;\r\n  const discountPercent = currentVariant?.productDiscount || product?.productDiscount || null;\r\n  const maxQuantity = currentVariant?.stock && currentVariant.stock > 0 ? currentVariant.stock : 0;\r\n  const isOutOfStock = !currentVariant || currentVariant.stock <= 0;\r\n  \r\n  const hasColorAttribute = colorGroups.length > 0 && colorGroups.some(g => g.stock > 0);\r\n  const hasSizeAttribute = sizeGroups.length > 0 && sizeGroups.some(g => g.stock > 0);\r\n  const needsColor = hasColorAttribute && !selectedColor;\r\n  const needsSize = hasSizeAttribute && !selectedSize;\r\n  const isVariationRequired = needsColor || needsSize;\r\n  \r\n  const getRequiredAttributesMessage = (): string => {\r\n    if (needsColor && needsSize) return t(language, 'product.selectColorAndSize');\r\n    if (needsColor) return t(language, 'product.selectColor');\r\n    if (needsSize) return t(language, 'product.selectSize');\r\n    return t(language, 'product.selectOptions');\r\n  };\r\n  \r\n  const unavailableAttributes = useMemo(() => {\r\n    const unavailable = new Map<string, boolean>();\r\n    if (!currentVariant || !product) return unavailable;\r\n    currentVariant.options?.forEach((option) => {\r\n      const attrKey = option.key || option.attribute;\r\n      if (!attrKey) return;\r\n      const attrGroup = attributeGroups.get(attrKey);\r\n      if (!attrGroup) return;\r\n      const attrValue = attrGroup.find((g) => {\r\n        if (option.valueId && g.valueId) return g.valueId === option.valueId;\r\n        return g.value?.toLowerCase().trim() === option.value?.toLowerCase().trim();\r\n      });\r\n      if (attrValue && attrValue.stock <= 0) unavailable.set(attrKey, true);\r\n    });\r\n    return unavailable;\r\n  }, [currentVariant, attributeGroups, product]);\r\n  \r\n  const hasUnavailableAttributes = unavailableAttributes.size > 0;\r\n  const canAddToCart = !isOutOfStock && !isVariationRequired && !hasUnavailableAttributes;\r\n\r\n  useEffect(() => {\r\n    if (!currentVariant || currentVariant.stock <= 0) { setQuantity(0); return; }\r\n    setQuantity(prev => {\r\n      const currentStock = currentVariant.stock;\r\n      if (prev > currentStock) return currentStock;\r\n      if (prev <= 0 && currentStock > 0) return 1;\r\n      return prev;\r\n    });\r\n  }, [currentVariant?.id, currentVariant?.stock]);\r\n\r\n  const adjustQuantity = (delta: number) => {\r\n    if (isOutOfStock || isVariationRequired) return;\r\n    setQuantity(prev => {\r\n      const next = prev + delta;\r\n      if (next < 1) return currentVariant && currentVariant.stock > 0 ? 1 : 0;\r\n      return next > maxQuantity ? maxQuantity : next;\r\n    });\r\n  };\r\n\r\n  // Switch to variant's image if it exists\r\n  const switchToVariantImage = useCallback((variant: ProductVariant | null) => {\r\n    if (!variant || !variant.imageUrl || !product) return;\r\n    const splitUrls = smartSplitUrls(variant.imageUrl);\r\n    if (splitUrls.length === 0) return;\r\n    const normalizeUrl = (url: string): string => {\r\n      let normalized = url.trim();\r\n      if (normalized.startsWith('/')) normalized = normalized.substring(1);\r\n      if (normalized.endsWith('/')) normalized = normalized.substring(0, normalized.length - 1);\r\n      return normalized.toLowerCase();\r\n    };\r\n    const isAttributeValueImage = (url: string): boolean => {\r\n      if (!product.productAttributes) return false;\r\n      for (const productAttr of product.productAttributes) {\r\n        if (productAttr.attribute?.values) {\r\n          for (const val of productAttr.attribute.values) {\r\n            if (val.imageUrl) {\r\n              const attrProcessed = processImageUrl(val.imageUrl);\r\n              if (attrProcessed) {\r\n                const normalizedAttr = normalizeUrl(attrProcessed);\r\n                const normalizedVariant = normalizeUrl(url);\r\n                if (normalizedAttr === normalizedVariant) return true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    for (const url of splitUrls) {\r\n      if (!url || url.trim() === '') continue;\r\n      const processedUrl = processImageUrl(url);\r\n      if (!processedUrl || isAttributeValueImage(processedUrl)) continue;\r\n      const imageIndex = images.findIndex(img => {\r\n        if (!img) return false;\r\n        const processedImg = processImageUrl(img);\r\n        if (!processedImg) return false;\r\n        const normalizedImg = normalizeUrl(processedImg);\r\n        const normalizedProcessed = normalizeUrl(processedUrl);\r\n        if (normalizedImg === normalizedProcessed) return true;\r\n        const imgWithSlash = processedImg.startsWith('/') ? processedImg : `/${processedImg}`;\r\n        const imgWithoutSlash = processedImg.startsWith('/') ? processedImg.substring(1) : processedImg;\r\n        const processedWithSlash = processedUrl.startsWith('/') ? processedUrl : `/${processedUrl}`;\r\n        const processedWithoutSlash = processedUrl.startsWith('/') ? processedUrl.substring(1) : processedUrl;\r\n        return imgWithSlash === processedWithSlash || \r\n               imgWithoutSlash === processedWithoutSlash ||\r\n               imgWithSlash === processedWithoutSlash ||\r\n               imgWithoutSlash === processedWithSlash;\r\n      });\r\n      if (imageIndex !== -1) {\r\n        setCurrentImageIndex(imageIndex);\r\n        return;\r\n      }\r\n    }\r\n  }, [images, product, setCurrentImageIndex]);\r\n\r\n  useEffect(() => {\r\n    if (product && product.variants && product.variants.length > 0) {\r\n      const newVariant = findVariantByAllAttributes(selectedColor, selectedSize, selectedAttributeValues);\r\n      if (newVariant && newVariant.id !== selectedVariant?.id) {\r\n        setSelectedVariant(newVariant);\r\n        switchToVariantImage(newVariant);\r\n        const colorValue = getOptionValue(newVariant.options, 'color');\r\n        const sizeValue = getOptionValue(newVariant.options, 'size');\r\n        if (colorValue && colorValue !== selectedColor?.toLowerCase().trim()) {\r\n          setSelectedColor(colorValue);\r\n        }\r\n        if (sizeValue && sizeValue !== selectedSize?.toLowerCase().trim()) {\r\n          setSelectedSize(sizeValue);\r\n        }\r\n      } else if (newVariant && newVariant.imageUrl) {\r\n        switchToVariantImage(newVariant);\r\n      }\r\n    }\r\n  }, [selectedColor, selectedSize, selectedAttributeValues, findVariantByAllAttributes, selectedVariant?.id, product, getOptionValue, switchToVariantImage]);\r\n\r\n  const handleColorSelect = (color: string) => {\r\n    if (!color || !product) return;\r\n    const normalizedColor = color.toLowerCase().trim();\r\n    if (selectedColor === normalizedColor) {\r\n      setSelectedColor(null);\r\n    } else {\r\n      setSelectedColor(normalizedColor);\r\n      // Try to find and switch to a variant image with this color\r\n      const colorVariants = product.variants?.filter(v => {\r\n        return variantHasColor(v, normalizedColor) && v.imageUrl;\r\n      }) || [];\r\n      for (const variant of colorVariants) {\r\n        if (!variant.imageUrl) continue;\r\n        const splitUrls = smartSplitUrls(variant.imageUrl);\r\n        for (const url of splitUrls) {\r\n          if (!url || url.trim() === '') continue;\r\n          const processedUrl = processImageUrl(url);\r\n          if (!processedUrl) continue;\r\n          const normalizeUrl = (u: string): string => {\r\n            let n = u.trim().toLowerCase();\r\n            if (n.startsWith('/')) n = n.substring(1);\r\n            if (n.endsWith('/')) n = n.substring(0, n.length - 1);\r\n            return n;\r\n          };\r\n          const imageIndex = images.findIndex(img => {\r\n            if (!img) return false;\r\n            const processedImg = processImageUrl(img);\r\n            if (!processedImg) return false;\r\n            const normalizedImg = normalizeUrl(processedImg);\r\n            const normalizedUrl = normalizeUrl(processedUrl);\r\n            if (normalizedImg === normalizedUrl) return true;\r\n            const imgWithSlash = processedImg.startsWith('/') ? processedImg : `/${processedImg}`;\r\n            const imgWithoutSlash = processedImg.startsWith('/') ? processedImg.substring(1) : processedImg;\r\n            const urlWithSlash = processedUrl.startsWith('/') ? processedUrl : `/${processedUrl}`;\r\n            const urlWithoutSlash = processedUrl.startsWith('/') ? processedUrl.substring(1) : processedUrl;\r\n            return imgWithSlash === urlWithSlash || \r\n                   imgWithoutSlash === urlWithoutSlash ||\r\n                   imgWithSlash === urlWithoutSlash ||\r\n                   imgWithoutSlash === urlWithSlash;\r\n          });\r\n          if (imageIndex !== -1) {\r\n            setCurrentImageIndex(imageIndex);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSizeSelect = (size: string) => {\r\n    if (selectedSize === size) setSelectedSize(null);\r\n    else setSelectedSize(size);\r\n  };\r\n\r\n  const handleAttributeValueSelect = (attrKey: string, value: string) => {\r\n    const newMap = new Map(selectedAttributeValues);\r\n    const currentValue = selectedAttributeValues.get(attrKey);\r\n    if (currentValue === value) {\r\n      newMap.delete(attrKey);\r\n    } else {\r\n      newMap.set(attrKey, value);\r\n    }\r\n    setSelectedAttributeValues(newMap);\r\n  };\r\n\r\n  const handleAddToWishlist = (e: MouseEvent) => {\r\n    e.preventDefault(); e.stopPropagation();\r\n    if (!product || typeof window === 'undefined') return;\r\n    try {\r\n      const stored = localStorage.getItem(WISHLIST_KEY);\r\n      const wishlist: string[] = stored ? JSON.parse(stored) : [];\r\n      if (isInWishlist) {\r\n        localStorage.setItem(WISHLIST_KEY, JSON.stringify(wishlist.filter(id => id !== product.id)));\r\n        setIsInWishlist(false);\r\n        setShowMessage(t(language, 'product.removedFromWishlist'));\r\n      } else {\r\n        wishlist.push(product.id);\r\n        localStorage.setItem(WISHLIST_KEY, JSON.stringify(wishlist));\r\n        setIsInWishlist(true);\r\n        setShowMessage(t(language, 'product.addedToWishlist'));\r\n      }\r\n      setTimeout(() => setShowMessage(null), 2000);\r\n      window.dispatchEvent(new Event('wishlist-updated'));\r\n    } catch (err) { }\r\n  };\r\n\r\n  const handleCompareToggle = (e: MouseEvent) => {\r\n    e.preventDefault(); e.stopPropagation();\r\n    if (!product || typeof window === 'undefined') return;\r\n    try {\r\n      const stored = localStorage.getItem(COMPARE_KEY);\r\n      const compare: string[] = stored ? JSON.parse(stored) : [];\r\n      if (isInCompare) {\r\n        localStorage.setItem(COMPARE_KEY, JSON.stringify(compare.filter(id => id !== product.id)));\r\n        setIsInCompare(false);\r\n        setShowMessage(t(language, 'product.removedFromCompare'));\r\n      } else {\r\n        if (compare.length >= 4) { setShowMessage(t(language, 'product.compareListFull')); }\r\n        else {\r\n          compare.push(product.id);\r\n          localStorage.setItem(COMPARE_KEY, JSON.stringify(compare));\r\n          setIsInCompare(true);\r\n          setShowMessage(t(language, 'product.addedToCompare'));\r\n        }\r\n      }\r\n      setTimeout(() => setShowMessage(null), 2000);\r\n      window.dispatchEvent(new Event('compare-updated'));\r\n    } catch (err) { }\r\n  };\r\n\r\n  return {\r\n    product,\r\n    loading,\r\n    images,\r\n    currentImageIndex,\r\n    setCurrentImageIndex,\r\n    thumbnailStartIndex,\r\n    setThumbnailStartIndex,\r\n    currency,\r\n    language,\r\n    selectedVariant,\r\n    selectedColor,\r\n    selectedSize,\r\n    selectedAttributeValues,\r\n    isAddingToCart,\r\n    setIsAddingToCart,\r\n    showMessage,\r\n    setShowMessage,\r\n    isInWishlist,\r\n    isInCompare,\r\n    quantity,\r\n    reviews,\r\n    averageRating,\r\n    slug,\r\n    attributeGroups,\r\n    colorGroups,\r\n    sizeGroups,\r\n    currentVariant,\r\n    price,\r\n    originalPrice: originalPrice ?? null,\r\n    compareAtPrice: compareAtPrice ?? null,\r\n    discountPercent,\r\n    maxQuantity,\r\n    isOutOfStock,\r\n    isVariationRequired,\r\n    hasUnavailableAttributes,\r\n    unavailableAttributes,\r\n    canAddToCart,\r\n    scrollToReviews,\r\n    getOptionValue,\r\n    adjustQuantity,\r\n    handleColorSelect,\r\n    handleSizeSelect,\r\n    handleAttributeValueSelect,\r\n    handleAddToWishlist,\r\n    handleCompareToggle,\r\n    getRequiredAttributesMessage,\r\n  };\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;AA4BO,SAAS,eAAe,MAAkC;IAC/D,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,IAAA,mJAAiB;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAe;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAwB;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,iNAAQ,EAAsB,IAAI;IAChG,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAC;IAC/D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAA4B,EAAE;IAEpE,MAAM,iBAAiB,IAAA,4MAAG,EAAC;IAC3B,MAAM,UAAU,gBAAgB,QAAQ;IACxC,MAAM,YAAY,QAAQ,QAAQ,CAAC,OAAO,QAAQ,KAAK,CAAC,OAAO;QAAC;KAAQ;IACxE,MAAM,OAAO,SAAS,CAAC,EAAE;IACzB,MAAM,mBAAmB,UAAU,MAAM,GAAG,IAAI,SAAS,CAAC,EAAE,GAAG;IAE/D,gCAAgC;IAChC,MAAM,SAAS,IAAA,gNAAO,EAAC;QACrB,IAAI,CAAC,SAAS,OAAO,EAAE;QACvB,MAAM,aAAa,MAAM,OAAO,CAAC,QAAQ,KAAK,IAAI,QAAQ,KAAK,GAAG,EAAE;QACpE,MAAM,cAAc,IAAA,+JAAc,EAAC;QACnC,MAAM,gBAAuB,EAAE;QAC/B,IAAI,QAAQ,QAAQ,IAAI,MAAM,OAAO,CAAC,QAAQ,QAAQ,GAAG;YACvD,MAAM,iBAAiB;mBAAI,QAAQ,QAAQ;aAAC,CAAC,IAAI,CAAC,CAAC,GAAG;gBACpD,MAAM,OAAO,AAAC,EAAU,QAAQ,IAAI;gBACpC,MAAM,OAAO,AAAC,EAAU,QAAQ,IAAI;gBACpC,OAAO,OAAO;YAChB;YACA,eAAe,OAAO,CAAC,CAAC;gBACtB,IAAI,EAAE,QAAQ,EAAE;oBACd,MAAM,OAAO,IAAA,+JAAc,EAAC,EAAE,QAAQ;oBACtC,cAAc,IAAI,IAAI;gBACxB;YACF;QACF;QACA,MAAM,uBAAuB,IAAA,+JAAc,EAAC;QAC5C,MAAM,YAAsB,EAAE;QAC9B,MAAM,iBAAiB,IAAI;QAC3B,YAAY,OAAO,CAAC,CAAC;YACnB,MAAM,YAAY,IAAA,gKAAe,EAAC,QAAQ;YAC1C,MAAM,aAAa,IAAA,0KAAyB,EAAC;YAC7C,IAAI,CAAC,eAAe,GAAG,CAAC,aAAa;gBACnC,UAAU,IAAI,CAAC;gBACf,eAAe,GAAG,CAAC;YACrB;QACF;QACA,qBAAqB,OAAO,CAAC,CAAC;YAC5B,MAAM,YAAY,IAAA,gKAAe,EAAC,QAAQ;YAC1C,MAAM,aAAa,IAAA,0KAAyB,EAAC;YAC7C,IAAI,CAAC,eAAe,GAAG,CAAC,aAAa;gBACnC,UAAU,IAAI,CAAC;gBACf,eAAe,GAAG,CAAC;YACrB;QACF;QACA,OAAO;IACT,GAAG;QAAC;KAAQ;IAEZ,gBAAgB;IAChB,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,IAAI,CAAC,QAAQ,sKAAe,CAAC,QAAQ,CAAC,KAAK,WAAW,KAAK;QAC3D,IAAI;YACF,WAAW;YACX,MAAM,cAAc,IAAA,mJAAiB;YACrC,IAAI;YACJ,IAAI;gBACF,OAAO,MAAM,gJAAS,CAAC,GAAG,CAAU,CAAC,iBAAiB,EAAE,MAAM,EAAE;oBAC9D,QAAQ;wBAAE,MAAM;oBAAY;gBAC9B;YACF,EAAE,OAAO,OAAY;gBACnB,IAAI,OAAO,WAAW,OAAO,gBAAgB,MAAM;oBACjD,IAAI;wBACF,OAAO,MAAM,gJAAS,CAAC,GAAG,CAAU,CAAC,iBAAiB,EAAE,MAAM,EAAE;4BAC9D,QAAQ;gCAAE,MAAM;4BAAK;wBACvB;oBACF,EAAE,OAAO,eAAe;wBACtB,MAAM;oBACR;gBACF,OAAO;oBACL,MAAM;gBACR;YACF;YACA,QAAQ,GAAG,CAAC,0CAA0C,KAAK,EAAE;YAC7D,QAAQ,GAAG,CAAC,4CAA4C,KAAK,iBAAiB;YAC9E,QAAQ,GAAG,CAAC,mDAAmD,KAAK,iBAAiB,EAAE,UAAU;YACjG,QAAQ,GAAG,CAAC,yCAAyC,KAAK,QAAQ,EAAE,UAAU;YAC9E,IAAI,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,GAAG;gBAC7C,QAAQ,GAAG,CAAC,gDAAgD,KAAK,QAAQ,CAAC,EAAE,EAAE;gBAC9E,KAAK,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAQ;oBAC7B,QAAQ,GAAG,CAAC,CAAC,8BAA8B,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,UAAU,CAAC,EAAE,EAAE,OAAO;gBAClF;YACF;YACA,WAAW;YACX,qBAAqB;YACrB,uBAAuB;YACvB,IAAI,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,GAAG;gBAC7C,IAAI,iBAAiB,KAAK,QAAQ,CAAC,EAAE;gBACrC,IAAI,kBAAkB;oBACpB,MAAM,cAAc,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,oBAAoB,EAAE,EAAE,CAAC,QAAQ,CAAC;oBACvF,MAAM,iBAAiB,KAAK,QAAQ,CAAC,SAAS,oBAAoB,EAAE;oBACpE,iBAAiB,eAAe,kBAAkB,KAAK,QAAQ,CAAC,EAAE;gBACpE;gBACA,mBAAmB;gBACnB,MAAM,cAAc,eAAe,OAAO,EAAE,KAAK,CAAA,MAAO,IAAI,GAAG,KAAK;gBACpE,IAAI,aAAa,iBAAiB,YAAY,KAAK,EAAE,cAAc,UAAU;gBAC7E,MAAM,aAAa,eAAe,OAAO,EAAE,KAAK,CAAA,MAAO,IAAI,GAAG,KAAK;gBACnE,IAAI,YAAY,gBAAgB,WAAW,KAAK,EAAE,cAAc,UAAU;YAC5E;QACF,EAAE,OAAO,OAAY;YACnB,IAAI,OAAO,WAAW,KAAK;gBACzB,WAAW;YACb;QACF,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;QAAM;KAAiB;IAE3B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;QACX,IAAI,sKAAe,CAAC,QAAQ,CAAC,KAAK,WAAW,KAAK;YAChD,OAAO,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM;QAC3B;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,IAAA,kNAAS,EAAC;QACR,YAAY,IAAA,mJAAiB;IAC/B,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,QAAQ,sKAAe,CAAC,QAAQ,CAAC,KAAK,WAAW,KAAK;QAC3D;QACA,MAAM,uBAAuB,IAAM,YAAY,IAAA,mJAAiB;QAChE,MAAM,uBAAuB;YAC3B,YAAY,IAAA,mJAAiB;YAC7B;QACF;QACA,MAAM,4BAA4B,IAAM,YAAY,IAAA,mJAAiB;QACrE,OAAO,gBAAgB,CAAC,oBAAoB;QAC5C,OAAO,gBAAgB,CAAC,oBAAoB;QAC5C,OAAO,gBAAgB,CAAC,0BAA0B;QAClD,OAAO;YACL,OAAO,mBAAmB,CAAC,oBAAoB;YAC/C,OAAO,mBAAmB,CAAC,oBAAoB;YAC/C,OAAO,mBAAmB,CAAC,0BAA0B;QACvD;IACF,GAAG;QAAC;QAAM;QAAkB;QAAQ;KAAa;IAEjD,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS;QACd,MAAM,gBAAgB;YACpB,wCAAmC;;;QAMrC;QACA;QACA,OAAO,gBAAgB,CAAC,oBAAoB;QAC5C,OAAO,IAAM,OAAO,mBAAmB,CAAC,oBAAoB;IAC9D,GAAG;QAAC,SAAS;KAAG;IAEhB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS;QACd,MAAM,eAAe;YACnB,wCAAmC;;;QAMrC;QACA;QACA,OAAO,gBAAgB,CAAC,mBAAmB;QAC3C,OAAO,IAAM,OAAO,mBAAmB,CAAC,mBAAmB;IAC7D,GAAG;QAAC,SAAS;KAAG;IAEhB,IAAA,kNAAS,EAAC;QACR,IAAI,OAAO,MAAM,GAAG,KAAK,qBAAqB,OAAO,MAAM,EAAE;YAC3D,qBAAqB;QACvB;IACF,GAAG;QAAC,OAAO,MAAM;QAAE;KAAkB;IAErC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW,CAAC,MAAM;QACvB,MAAM,cAAc;YAClB,IAAI;gBACF,MAAM,OAAO,MAAM,gJAAS,CAAC,GAAG,CAA4B,CAAC,iBAAiB,EAAE,KAAK,QAAQ,CAAC;gBAC9F,WAAW,QAAQ,EAAE;YACvB,EAAE,OAAO,OAAY;gBACnB,WAAW,EAAE;YACf;QACF;QACA;QACA,MAAM,qBAAqB,IAAM;QACjC;;IAIF,GAAG;QAAC,SAAS;QAAI;KAAK;IAEtB,MAAM,gBAAgB,QAAQ,MAAM,GAAG,IACnC,QAAQ,MAAM,CAAC,CAAC,KAAK,SAAW,MAAM,OAAO,MAAM,EAAE,KAAK,QAAQ,MAAM,GACxE;IAEJ,MAAM,kBAAkB,IAAA,oNAAW,EAAC;QAClC,MAAM,iBAAiB,SAAS,cAAc,CAAC;QAC/C,IAAI,gBAAgB;YAClB,eAAe,cAAc,CAAC;gBAAE,UAAU;gBAAU,OAAO;YAAQ;QACrE;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,oNAAW,EAAC,CAAC,SAAsC;QACxE,IAAI,CAAC,SAAS,OAAO;QACrB,MAAM,MAAM,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,OAAO,EAAE,SAAS,KAAK;QAC/D,OAAO,KAAK,OAAO,cAAc,UAAU;IAC7C,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,oNAAW,EAAC,CAAC,SAAyB;QAC5D,IAAI,CAAC,QAAQ,OAAO,IAAI,CAAC,OAAO,OAAO;QACvC,MAAM,kBAAkB,MAAM,WAAW,GAAG,IAAI;QAChD,MAAM,eAAe,QAAQ,OAAO,CAAC,MAAM,CAAC,CAAA,MACzC,IAAI,GAAG,KAAK,WAAW,IAAI,SAAS,KAAK;QAE5C,OAAO,aAAa,IAAI,CAAC,CAAA;YACvB,MAAM,WAAW,IAAI,KAAK,EAAE,cAAc;YAC1C,OAAO,aAAa;QACtB;IACF,GAAG,EAAE;IAEL,MAAM,4BAA4B,IAAA,oNAAW,EAAC,CAAC,OAAsB;QACnE,IAAI,CAAC,SAAS,YAAY,QAAQ,QAAQ,CAAC,MAAM,KAAK,GAAG,OAAO;QAChE,MAAM,kBAAkB,OAAO,cAAc;QAC7C,MAAM,iBAAiB,MAAM,cAAc;QAC3C,IAAI,mBAAmB,gBAAgB;YACrC,MAAM,UAAU,QAAQ,QAAQ,CAAC,IAAI,CAAC,CAAA;gBACpC,MAAM,WAAW,gBAAgB,GAAG;gBACpC,MAAM,QAAQ,eAAe,EAAE,OAAO,EAAE;gBACxC,OAAO,YAAY,UAAU;YAC/B;YACA,IAAI,SAAS,OAAO;QACtB;QACA,IAAI,iBAAiB;YACnB,MAAM,gBAAgB,QAAQ,QAAQ,CAAC,MAAM,CAAC,CAAA,IAAK,gBAAgB,GAAG;YACtE,IAAI,cAAc,MAAM,GAAG,GAAG;gBAC5B,OAAO,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG,MAAM,aAAa,CAAC,EAAE;YACjE;QACF;QACA,IAAI,gBAAgB;YAClB,MAAM,eAAe,QAAQ,QAAQ,CAAC,MAAM,CAAC,CAAA;gBAC3C,MAAM,QAAQ,eAAe,EAAE,OAAO,EAAE;gBACxC,OAAO,UAAU;YACnB;YACA,IAAI,aAAa,MAAM,GAAG,GAAG;gBAC3B,OAAO,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG,MAAM,YAAY,CAAC,EAAE;YAC/D;QACF;QACA,OAAO,QAAQ,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG,MAAM,QAAQ,QAAQ,CAAC,EAAE,IAAI;IAC3E,GAAG;QAAC,SAAS;QAAU;QAAgB;KAAgB;IAEvD,MAAM,6BAA6B,IAAA,oNAAW,EAAC,CAC7C,OACA,MACA;QAEA,IAAI,CAAC,SAAS,YAAY,QAAQ,QAAQ,CAAC,MAAM,KAAK,GAAG,OAAO;QAChE,MAAM,kBAAkB,OAAO,cAAc;QAC7C,MAAM,iBAAiB,MAAM,cAAc;QAC3C,MAAM,wBAAwB,IAAI;QAClC,IAAI,iBAAiB,sBAAsB,GAAG,CAAC,SAAS;QACxD,IAAI,gBAAgB,sBAAsB,GAAG,CAAC,QAAQ;QACtD,gBAAgB,OAAO,CAAC,CAAC,OAAO;YAC9B,IAAI,QAAQ,WAAW,QAAQ,QAAQ;gBACrC,sBAAsB,GAAG,CAAC,KAAK,MAAM,WAAW,GAAG,IAAI;YACzD;QACF;QACA,MAAM,iBAAiB,CAAC;YACtB,IAAI,iBAAiB;gBACnB,IAAI,CAAC,gBAAgB,SAAS,kBAAkB,OAAO;YACzD;YACA,IAAI,gBAAgB;gBAClB,MAAM,QAAQ,eAAe,QAAQ,OAAO,EAAE;gBAC9C,IAAI,UAAU,gBAAgB,OAAO;YACvC;YACA,KAAK,MAAM,CAAC,SAAS,UAAU,IAAI,gBAAgB,OAAO,GAAI;gBAC5D,IAAI,YAAY,WAAW,YAAY,QAAQ;gBAC/C,MAAM,eAAe,eAAe,QAAQ,OAAO,EAAE;gBACrD,MAAM,sBAAsB,UAAU,WAAW,GAAG,IAAI;gBACxD,MAAM,SAAS,QAAQ,OAAO,EAAE,KAAK,CAAA,MACnC,IAAI,GAAG,KAAK,WAAW,IAAI,SAAS,KAAK;gBAE3C,IAAI,QAAQ;oBACV,IAAI,OAAO,OAAO,IAAI,aAAa,OAAO,OAAO,KAAK,WAAW;wBAC/D;oBACF;oBACA,IAAI,iBAAiB,qBAAqB;wBACxC,OAAO;oBACT;gBACF,OAAO;oBACL,OAAO;gBACT;YACF;YACA,OAAO;QACT;QACA,MAAM,aAAa,QAAQ,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,eAAe,MAAM,EAAE,QAAQ;QAC7E,IAAI,YAAY,OAAO;QACvB,MAAM,WAAW,QAAQ,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,eAAe;QAC3D,IAAI,UAAU,OAAO;QACrB,IAAI,mBAAmB,gBAAgB;YACrC,OAAO,0BAA0B,mBAAmB,MAAM,kBAAkB;QAC9E;QACA,OAAO,QAAQ,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG,MAAM,QAAQ,QAAQ,CAAC,EAAE,IAAI;IAC3E,GAAG;QAAC,SAAS;QAAU;QAAgB;QAA2B;KAAgB;IAElF,8CAA8C;IAC9C,MAAM,kBAAkB,IAAA,gNAAO,EAAC;QAC9B,MAAM,SAAS,IAAI;QACnB,IAAI,CAAC,SAAS;YACZ,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT;QACA,QAAQ,GAAG,CAAC,gEAAgE,QAAQ,EAAE;QACtF,QAAQ,GAAG,CAAC,oDAAoD,QAAQ,iBAAiB;QACzF,QAAQ,GAAG,CAAC,2DAA2D,QAAQ,iBAAiB,EAAE,UAAU;QAC5G,MAAM,sBAAsB,CAAC,SAAyB,mBAAwC;YAC5F,IAAI,kBAAkB,IAAI,KAAK,GAAG,OAAO;YACzC,KAAK,MAAM,CAAC,SAAS,cAAc,IAAI,kBAAkB,OAAO,GAAI;gBAClE,IAAI,kBAAkB,YAAY,gBAAgB;gBAClD,MAAM,0BAA0B,cAAc,WAAW,GAAG,IAAI;gBAChE,IAAI,mBAAmB;gBACvB,MAAM,kBAAkB,QAAQ,OAAO,EAAE,OAAO,CAAA;oBAC9C,MAAM,SAAS,IAAI,GAAG,IAAI,IAAI,SAAS;oBACvC,OAAO,WAAW;gBACpB,MAAM,EAAE;gBACR,IAAI,gBAAgB,MAAM,KAAK,GAAG,OAAO;gBACzC,KAAK,MAAM,UAAU,gBAAiB;oBACpC,MAAM,WAAW,OAAO,KAAK,EAAE,cAAc;oBAC7C,MAAM,aAAa,OAAO,OAAO;oBACjC,IAAI,aAAa,2BAA4B,cAAc,eAAe,eAAgB;wBACxF,mBAAmB;wBACnB;oBACF;gBACF;gBACA,IAAI,CAAC,kBAAkB,OAAO;YAChC;YACA,OAAO;QACT;QACA,MAAM,uBAAuB,CAAC;YAC5B,MAAM,aAAa,IAAI;YACvB,IAAI,iBAAiB,mBAAmB,SAAS,WAAW,GAAG,CAAC,SAAS;YACzE,IAAI,gBAAgB,mBAAmB,QAAQ,WAAW,GAAG,CAAC,QAAQ;YACtE,wBAAwB,OAAO,CAAC,CAAC,OAAO;gBACtC,IAAI,QAAQ,gBAAgB,WAAW,GAAG,CAAC,KAAK;YAClD;YACA,OAAO;QACT;QACA,IAAI,QAAQ,iBAAiB,IAAI,QAAQ,iBAAiB,CAAC,MAAM,GAAG,GAAG;YACrE,QAAQ,GAAG,CAAC,oEAAoE,QAAQ,iBAAiB,CAAC,MAAM,EAAE;YAClH,QAAQ,iBAAiB,CAAC,OAAO,CAAC,CAAC;gBACjC,MAAM,UAAU,YAAY,SAAS,CAAC,GAAG;gBACzC,QAAQ,GAAG,CAAC,+CAA+C,SAAS,QAAQ,YAAY,SAAS,CAAC,MAAM,EAAE,UAAU,GAAG;gBACvH,MAAM,WAAW,IAAI;gBACrB,QAAQ,QAAQ,EAAE,QAAQ,CAAC;oBACzB,MAAM,UAAU,QAAQ,OAAO,EAAE,OAAO,CAAC;wBACvC,IAAI,IAAI,OAAO,IAAI,IAAI,WAAW,KAAK,YAAY,SAAS,CAAC,EAAE,EAAE,OAAO;wBACxE,OAAO,IAAI,GAAG,KAAK,WAAW,IAAI,SAAS,KAAK;oBAClD,MAAM,EAAE;oBACR,QAAQ,OAAO,CAAC,CAAC;wBACf,MAAM,UAAU,OAAO,OAAO,IAAI;wBAClC,MAAM,QAAQ,OAAO,KAAK,IAAI;wBAC9B,IAAI,QAAQ,OAAO,KAAK,IAAI;wBAC5B,IAAI,WAAW,YAAY,SAAS,CAAC,MAAM,EAAE;4BAC3C,MAAM,YAAY,YAAY,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;4BACzE,IAAI,WAAW,QAAQ,UAAU,KAAK,IAAI,UAAU,KAAK,IAAI;wBAC/D;wBACA,MAAM,SAAS,WAAW;wBAC1B,IAAI,CAAC,SAAS,GAAG,CAAC,SAAS;4BACzB,SAAS,GAAG,CAAC,QAAQ;gCAAE,SAAS,WAAW;gCAAW;gCAAO;gCAAO,UAAU,EAAE;4BAAC;wBACnF;wBACA,IAAI,CAAC,SAAS,GAAG,CAAC,QAAS,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;4BAClE,SAAS,GAAG,CAAC,QAAS,QAAQ,CAAC,IAAI,CAAC;wBACtC;oBACF;gBACF;gBACA,MAAM,oBAAoB,qBAAqB;gBAC/C,MAAM,cAAc,MAAM,IAAI,CAAC,SAAS,MAAM,IAAI,GAAG,CAAC,CAAC;oBACrD,IAAI,YAAY;oBAChB,IAAI,KAAK,OAAO,IAAI,YAAY,SAAS,CAAC,MAAM,EAAE;wBAChD,YAAY,YAAY,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,KAAK,OAAO;oBACjF;oBACA,IAAI,CAAC,aAAa,YAAY,SAAS,CAAC,MAAM,EAAE;wBAC9C,YAAY,YAAY,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAC7C,EAAE,KAAK,EAAE,kBAAkB,KAAK,KAAK,EAAE,iBAAiB,EAAE,KAAK,KAAK,KAAK,KAAK;oBAElF;oBACA,IAAI,QAAQ;oBACZ,IAAI,kBAAkB,IAAI,GAAG,GAAG;wBAC9B,MAAM,qBAAqB,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAA,IAAK,oBAAoB,GAAG,mBAAmB;wBAC/F,QAAQ,mBAAmB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;oBAC/D,OAAO;wBACL,QAAQ,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;oBAC1D;oBACA,OAAO;wBACL,SAAS,KAAK,OAAO;wBACrB,OAAO,KAAK,KAAK;wBACjB,OAAO,KAAK,KAAK;wBACjB,OAAO;wBACP,UAAU,KAAK,QAAQ;wBACvB,UAAU,WAAW,YAAY;wBACjC,QAAQ,WAAW,UAAU;oBAC/B;gBACF;gBACA,QAAQ,GAAG,CAAC,+BAA+B,YAAY,MAAM,EAAE,wBAAwB;gBACvF,OAAO,GAAG,CAAC,SAAS;YACtB;YACA,QAAQ,GAAG,CAAC,4CAA4C,OAAO,IAAI;QACrE,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,iDAAiD,SAAS,UAAU,UAAU;YAC1F,IAAI,SAAS,UAAU;gBACrB,MAAM,WAAW,IAAI;gBACrB,MAAM,UAAU,IAAI;gBACpB,QAAQ,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACxB,QAAQ,GAAG,CAAC,iCAAiC,QAAQ,EAAE,EAAE,YAAY,QAAQ,OAAO;oBACpF,QAAQ,OAAO,EAAE,QAAQ,CAAC;wBACxB,MAAM,UAAU,IAAI,GAAG,IAAI,IAAI,SAAS,IAAI;wBAC5C,MAAM,QAAQ,IAAI,KAAK,IAAI;wBAC3B,QAAQ,GAAG,CAAC,iCAAiC;4BAAE;4BAAS;wBAAM;wBAC9D,IAAI,CAAC,OAAO;wBACZ,IAAI,YAAY,SAAS;4BACvB,MAAM,kBAAkB,MAAM,WAAW,GAAG,IAAI;4BAChD,IAAI,CAAC,SAAS,GAAG,CAAC,kBAAkB,SAAS,GAAG,CAAC,iBAAiB,EAAE;4BACpE,IAAI,CAAC,SAAS,GAAG,CAAC,iBAAkB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;gCAClE,SAAS,GAAG,CAAC,iBAAkB,IAAI,CAAC;4BACtC;wBACF,OAAO,IAAI,YAAY,QAAQ;4BAC7B,MAAM,iBAAiB,MAAM,WAAW,GAAG,IAAI;4BAC/C,IAAI,CAAC,QAAQ,GAAG,CAAC,iBAAiB,QAAQ,GAAG,CAAC,gBAAgB,EAAE;4BAChE,IAAI,CAAC,QAAQ,GAAG,CAAC,gBAAiB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;gCAChE,QAAQ,GAAG,CAAC,gBAAiB,IAAI,CAAC;4BACpC;wBACF,OAAO;4BACL,yDAAyD;4BACzD,QAAQ,GAAG,CAAC,gDAAgD,SAAS,KAAK;wBAC5E;oBACF;gBACF;gBACA,QAAQ,GAAG,CAAC,yCAAyC,SAAS,IAAI;gBAClE,QAAQ,GAAG,CAAC,wCAAwC,QAAQ,IAAI;gBAChE,IAAI,SAAS,IAAI,GAAG,GAAG;oBACrB,MAAM,cAAc,MAAM,IAAI,CAAC,SAAS,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,OAAO,SAAS,GAAK,CAAC;4BAC7E;4BAAO,OAAO;4BAAO,OAAO,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;4BAAI;wBAC7E,CAAC;oBACD,QAAQ,GAAG,CAAC,+CAA+C,YAAY,MAAM;oBAC7E,OAAO,GAAG,CAAC,SAAS;gBACtB;gBACA,IAAI,QAAQ,IAAI,GAAG,GAAG;oBACpB,MAAM,aAAa,MAAM,IAAI,CAAC,QAAQ,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,OAAO,SAAS,GAAK,CAAC;4BAC3E;4BAAO,OAAO;4BAAO,OAAO,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;4BAAI;wBAC7E,CAAC;oBACD,QAAQ,GAAG,CAAC,8CAA8C,WAAW,MAAM;oBAC3E,OAAO,GAAG,CAAC,QAAQ;gBACrB;gBAEA,wEAAwE;gBACxE,MAAM,qBAAqB,IAAI;gBAC/B,QAAQ,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACxB,QAAQ,OAAO,EAAE,QAAQ,CAAC;wBACxB,MAAM,UAAU,IAAI,GAAG,IAAI,IAAI,SAAS,IAAI;wBAC5C,MAAM,QAAQ,IAAI,KAAK,IAAI;wBAC3B,IAAI,CAAC,SAAS,YAAY,WAAW,YAAY,QAAQ;wBAEzD,IAAI,CAAC,mBAAmB,GAAG,CAAC,UAAU;4BACpC,mBAAmB,GAAG,CAAC,SAAS,IAAI;wBACtC;wBACA,MAAM,WAAW,mBAAmB,GAAG,CAAC;wBACxC,MAAM,kBAAkB,MAAM,WAAW,GAAG,IAAI;wBAChD,IAAI,CAAC,SAAS,GAAG,CAAC,kBAAkB;4BAClC,SAAS,GAAG,CAAC,iBAAiB,EAAE;wBAClC;wBACA,IAAI,CAAC,SAAS,GAAG,CAAC,iBAAkB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;4BAClE,SAAS,GAAG,CAAC,iBAAkB,IAAI,CAAC;wBACtC;oBACF;gBACF;gBAEA,qCAAqC;gBACrC,mBAAmB,OAAO,CAAC,CAAC,UAAU;oBACpC,MAAM,aAAa,MAAM,IAAI,CAAC,SAAS,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,OAAO,SAAS,GAAK,CAAC;4BAC5E;4BAAO,OAAO;4BAAO,OAAO,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;4BAAI;wBAC7E,CAAC;oBACD,QAAQ,GAAG,CAAC,2CAA2C,SAAS,QAAQ,WAAW,MAAM,EAAE;oBAC3F,OAAO,GAAG,CAAC,SAAS;gBACtB;YACF;QACF;QACA,QAAQ,GAAG,CAAC,+CAA+C,OAAO,IAAI,EAAE,eAAe,MAAM,IAAI,CAAC,OAAO,IAAI;QAC7G,OAAO;IACT,GAAG;QAAC;QAAS;QAAe;QAAc;QAAyB;KAAe;IAElF,MAAM,cAAmF,EAAE;IAC3F,MAAM,iBAAiB,gBAAgB,GAAG,CAAC;IAC3C,IAAI,gBAAgB;QAClB,YAAY,IAAI,IAAI,eAAe,GAAG,CAAC,CAAC,IAAM,CAAC;gBAC7C,OAAO,EAAE,KAAK;gBAAE,OAAO,EAAE,KAAK;gBAAE,UAAU,EAAE,QAAQ;YACtD,CAAC;IACH;IAEA,MAAM,aAAiF,EAAE;IACzF,MAAM,gBAAgB,gBAAgB,GAAG,CAAC;IAC1C,IAAI,eAAe;QACjB,WAAW,IAAI,IAAI,cAAc,GAAG,CAAC,CAAC,IAAM,CAAC;gBAC3C,MAAM,EAAE,KAAK;gBAAE,OAAO,EAAE,KAAK;gBAAE,UAAU,EAAE,QAAQ;YACrD,CAAC;IACH;IAEA,MAAM,iBAAiB,mBAAmB,0BAA0B,eAAe,iBAAiB,SAAS,UAAU,CAAC,EAAE,IAAI;IAC9H,MAAM,QAAQ,gBAAgB,SAAS;IACvC,MAAM,gBAAgB,gBAAgB;IACtC,MAAM,iBAAiB,gBAAgB;IACvC,MAAM,kBAAkB,gBAAgB,mBAAmB,SAAS,mBAAmB;IACvF,MAAM,cAAc,gBAAgB,SAAS,eAAe,KAAK,GAAG,IAAI,eAAe,KAAK,GAAG;IAC/F,MAAM,eAAe,CAAC,kBAAkB,eAAe,KAAK,IAAI;IAEhE,MAAM,oBAAoB,YAAY,MAAM,GAAG,KAAK,YAAY,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG;IACpF,MAAM,mBAAmB,WAAW,MAAM,GAAG,KAAK,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG;IACjF,MAAM,aAAa,qBAAqB,CAAC;IACzC,MAAM,YAAY,oBAAoB,CAAC;IACvC,MAAM,sBAAsB,cAAc;IAE1C,MAAM,+BAA+B;QACnC,IAAI,cAAc,WAAW,OAAO,IAAA,+HAAC,EAAC,UAAU;QAChD,IAAI,YAAY,OAAO,IAAA,+HAAC,EAAC,UAAU;QACnC,IAAI,WAAW,OAAO,IAAA,+HAAC,EAAC,UAAU;QAClC,OAAO,IAAA,+HAAC,EAAC,UAAU;IACrB;IAEA,MAAM,wBAAwB,IAAA,gNAAO,EAAC;QACpC,MAAM,cAAc,IAAI;QACxB,IAAI,CAAC,kBAAkB,CAAC,SAAS,OAAO;QACxC,eAAe,OAAO,EAAE,QAAQ,CAAC;YAC/B,MAAM,UAAU,OAAO,GAAG,IAAI,OAAO,SAAS;YAC9C,IAAI,CAAC,SAAS;YACd,MAAM,YAAY,gBAAgB,GAAG,CAAC;YACtC,IAAI,CAAC,WAAW;YAChB,MAAM,YAAY,UAAU,IAAI,CAAC,CAAC;gBAChC,IAAI,OAAO,OAAO,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,KAAK,OAAO,OAAO;gBACpE,OAAO,EAAE,KAAK,EAAE,cAAc,WAAW,OAAO,KAAK,EAAE,cAAc;YACvE;YACA,IAAI,aAAa,UAAU,KAAK,IAAI,GAAG,YAAY,GAAG,CAAC,SAAS;QAClE;QACA,OAAO;IACT,GAAG;QAAC;QAAgB;QAAiB;KAAQ;IAE7C,MAAM,2BAA2B,sBAAsB,IAAI,GAAG;IAC9D,MAAM,eAAe,CAAC,gBAAgB,CAAC,uBAAuB,CAAC;IAE/D,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,kBAAkB,eAAe,KAAK,IAAI,GAAG;YAAE,YAAY;YAAI;QAAQ;QAC5E,YAAY,CAAA;YACV,MAAM,eAAe,eAAe,KAAK;YACzC,IAAI,OAAO,cAAc,OAAO;YAChC,IAAI,QAAQ,KAAK,eAAe,GAAG,OAAO;YAC1C,OAAO;QACT;IACF,GAAG;QAAC,gBAAgB;QAAI,gBAAgB;KAAM;IAE9C,MAAM,iBAAiB,CAAC;QACtB,IAAI,gBAAgB,qBAAqB;QACzC,YAAY,CAAA;YACV,MAAM,OAAO,OAAO;YACpB,IAAI,OAAO,GAAG,OAAO,kBAAkB,eAAe,KAAK,GAAG,IAAI,IAAI;YACtE,OAAO,OAAO,cAAc,cAAc;QAC5C;IACF;IAEA,yCAAyC;IACzC,MAAM,uBAAuB,IAAA,oNAAW,EAAC,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ,IAAI,CAAC,SAAS;QAC/C,MAAM,YAAY,IAAA,+JAAc,EAAC,QAAQ,QAAQ;QACjD,IAAI,UAAU,MAAM,KAAK,GAAG;QAC5B,MAAM,eAAe,CAAC;YACpB,IAAI,aAAa,IAAI,IAAI;YACzB,IAAI,WAAW,UAAU,CAAC,MAAM,aAAa,WAAW,SAAS,CAAC;YAClE,IAAI,WAAW,QAAQ,CAAC,MAAM,aAAa,WAAW,SAAS,CAAC,GAAG,WAAW,MAAM,GAAG;YACvF,OAAO,WAAW,WAAW;QAC/B;QACA,MAAM,wBAAwB,CAAC;YAC7B,IAAI,CAAC,QAAQ,iBAAiB,EAAE,OAAO;YACvC,KAAK,MAAM,eAAe,QAAQ,iBAAiB,CAAE;gBACnD,IAAI,YAAY,SAAS,EAAE,QAAQ;oBACjC,KAAK,MAAM,OAAO,YAAY,SAAS,CAAC,MAAM,CAAE;wBAC9C,IAAI,IAAI,QAAQ,EAAE;4BAChB,MAAM,gBAAgB,IAAA,gKAAe,EAAC,IAAI,QAAQ;4BAClD,IAAI,eAAe;gCACjB,MAAM,iBAAiB,aAAa;gCACpC,MAAM,oBAAoB,aAAa;gCACvC,IAAI,mBAAmB,mBAAmB,OAAO;4BACnD;wBACF;oBACF;gBACF;YACF;YACA,OAAO;QACT;QACA,KAAK,MAAM,OAAO,UAAW;YAC3B,IAAI,CAAC,OAAO,IAAI,IAAI,OAAO,IAAI;YAC/B,MAAM,eAAe,IAAA,gKAAe,EAAC;YACrC,IAAI,CAAC,gBAAgB,sBAAsB,eAAe;YAC1D,MAAM,aAAa,OAAO,SAAS,CAAC,CAAA;gBAClC,IAAI,CAAC,KAAK,OAAO;gBACjB,MAAM,eAAe,IAAA,gKAAe,EAAC;gBACrC,IAAI,CAAC,cAAc,OAAO;gBAC1B,MAAM,gBAAgB,aAAa;gBACnC,MAAM,sBAAsB,aAAa;gBACzC,IAAI,kBAAkB,qBAAqB,OAAO;gBAClD,MAAM,eAAe,aAAa,UAAU,CAAC,OAAO,eAAe,CAAC,CAAC,EAAE,cAAc;gBACrF,MAAM,kBAAkB,aAAa,UAAU,CAAC,OAAO,aAAa,SAAS,CAAC,KAAK;gBACnF,MAAM,qBAAqB,aAAa,UAAU,CAAC,OAAO,eAAe,CAAC,CAAC,EAAE,cAAc;gBAC3F,MAAM,wBAAwB,aAAa,UAAU,CAAC,OAAO,aAAa,SAAS,CAAC,KAAK;gBACzF,OAAO,iBAAiB,sBACjB,oBAAoB,yBACpB,iBAAiB,yBACjB,oBAAoB;YAC7B;YACA,IAAI,eAAe,CAAC,GAAG;gBACrB,qBAAqB;gBACrB;YACF;QACF;IACF,GAAG;QAAC;QAAQ;QAAS;KAAqB;IAE1C,IAAA,kNAAS,EAAC;QACR,IAAI,WAAW,QAAQ,QAAQ,IAAI,QAAQ,QAAQ,CAAC,MAAM,GAAG,GAAG;YAC9D,MAAM,aAAa,2BAA2B,eAAe,cAAc;YAC3E,IAAI,cAAc,WAAW,EAAE,KAAK,iBAAiB,IAAI;gBACvD,mBAAmB;gBACnB,qBAAqB;gBACrB,MAAM,aAAa,eAAe,WAAW,OAAO,EAAE;gBACtD,MAAM,YAAY,eAAe,WAAW,OAAO,EAAE;gBACrD,IAAI,cAAc,eAAe,eAAe,cAAc,QAAQ;oBACpE,iBAAiB;gBACnB;gBACA,IAAI,aAAa,cAAc,cAAc,cAAc,QAAQ;oBACjE,gBAAgB;gBAClB;YACF,OAAO,IAAI,cAAc,WAAW,QAAQ,EAAE;gBAC5C,qBAAqB;YACvB;QACF;IACF,GAAG;QAAC;QAAe;QAAc;QAAyB;QAA4B,iBAAiB;QAAI;QAAS;QAAgB;KAAqB;IAEzJ,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,SAAS,CAAC,SAAS;QACxB,MAAM,kBAAkB,MAAM,WAAW,GAAG,IAAI;QAChD,IAAI,kBAAkB,iBAAiB;YACrC,iBAAiB;QACnB,OAAO;YACL,iBAAiB;YACjB,4DAA4D;YAC5D,MAAM,gBAAgB,QAAQ,QAAQ,EAAE,OAAO,CAAA;gBAC7C,OAAO,gBAAgB,GAAG,oBAAoB,EAAE,QAAQ;YAC1D,MAAM,EAAE;YACR,KAAK,MAAM,WAAW,cAAe;gBACnC,IAAI,CAAC,QAAQ,QAAQ,EAAE;gBACvB,MAAM,YAAY,IAAA,+JAAc,EAAC,QAAQ,QAAQ;gBACjD,KAAK,MAAM,OAAO,UAAW;oBAC3B,IAAI,CAAC,OAAO,IAAI,IAAI,OAAO,IAAI;oBAC/B,MAAM,eAAe,IAAA,gKAAe,EAAC;oBACrC,IAAI,CAAC,cAAc;oBACnB,MAAM,eAAe,CAAC;wBACpB,IAAI,IAAI,EAAE,IAAI,GAAG,WAAW;wBAC5B,IAAI,EAAE,UAAU,CAAC,MAAM,IAAI,EAAE,SAAS,CAAC;wBACvC,IAAI,EAAE,QAAQ,CAAC,MAAM,IAAI,EAAE,SAAS,CAAC,GAAG,EAAE,MAAM,GAAG;wBACnD,OAAO;oBACT;oBACA,MAAM,aAAa,OAAO,SAAS,CAAC,CAAA;wBAClC,IAAI,CAAC,KAAK,OAAO;wBACjB,MAAM,eAAe,IAAA,gKAAe,EAAC;wBACrC,IAAI,CAAC,cAAc,OAAO;wBAC1B,MAAM,gBAAgB,aAAa;wBACnC,MAAM,gBAAgB,aAAa;wBACnC,IAAI,kBAAkB,eAAe,OAAO;wBAC5C,MAAM,eAAe,aAAa,UAAU,CAAC,OAAO,eAAe,CAAC,CAAC,EAAE,cAAc;wBACrF,MAAM,kBAAkB,aAAa,UAAU,CAAC,OAAO,aAAa,SAAS,CAAC,KAAK;wBACnF,MAAM,eAAe,aAAa,UAAU,CAAC,OAAO,eAAe,CAAC,CAAC,EAAE,cAAc;wBACrF,MAAM,kBAAkB,aAAa,UAAU,CAAC,OAAO,aAAa,SAAS,CAAC,KAAK;wBACnF,OAAO,iBAAiB,gBACjB,oBAAoB,mBACpB,iBAAiB,mBACjB,oBAAoB;oBAC7B;oBACA,IAAI,eAAe,CAAC,GAAG;wBACrB,qBAAqB;wBACrB;oBACF;gBACF;YACF;QACF;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,IAAI,iBAAiB,MAAM,gBAAgB;aACtC,gBAAgB;IACvB;IAEA,MAAM,6BAA6B,CAAC,SAAiB;QACnD,MAAM,SAAS,IAAI,IAAI;QACvB,MAAM,eAAe,wBAAwB,GAAG,CAAC;QACjD,IAAI,iBAAiB,OAAO;YAC1B,OAAO,MAAM,CAAC;QAChB,OAAO;YACL,OAAO,GAAG,CAAC,SAAS;QACtB;QACA,2BAA2B;IAC7B;IAEA,MAAM,sBAAsB,CAAC;QAC3B,EAAE,cAAc;QAAI,EAAE,eAAe;QACrC,wCAA+C;;;IAiBjD;IAEA,MAAM,sBAAsB,CAAC;QAC3B,EAAE,cAAc;QAAI,EAAE,eAAe;QACrC,wCAA+C;;;IAoBjD;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,eAAe,iBAAiB;QAChC,gBAAgB,kBAAkB;QAClC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 4049, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/white%20shop/White-Shop-templete/WhiteShop-Template/apps/web/app/products/%5Bslug%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { use } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { apiClient } from '../../../lib/api-client';\nimport { getStoredCurrency } from '../../../lib/currency';\nimport { t } from '../../../lib/i18n';\nimport { useAuth } from '../../../lib/auth/AuthContext';\nimport { RelatedProducts } from '../../../components/RelatedProducts';\nimport { ProductReviews } from '../../../components/ProductReviews';\nimport { ProductImageGallery } from './ProductImageGallery';\nimport { ProductInfoAndActions } from './ProductInfoAndActions';\nimport { useProductPage } from './useProductPage';\nimport type { ProductPageProps } from './types';\n\nexport default function ProductPage({ params }: ProductPageProps) {\n  const router = useRouter();\n  const { isLoggedIn } = useAuth();\n  \n  const {\n    product,\n    loading,\n    images,\n    currentImageIndex,\n    setCurrentImageIndex,\n    thumbnailStartIndex,\n    setThumbnailStartIndex,\n    currency,\n    language,\n    selectedColor,\n    selectedSize,\n    selectedAttributeValues,\n    isAddingToCart,\n    setIsAddingToCart,\n    showMessage,\n    setShowMessage,\n    isInWishlist,\n    isInCompare,\n    quantity,\n    reviews,\n    averageRating,\n    slug,\n    attributeGroups,\n    colorGroups,\n    sizeGroups,\n    currentVariant,\n    price,\n    originalPrice,\n    compareAtPrice,\n    discountPercent,\n    maxQuantity,\n    isOutOfStock,\n    isVariationRequired,\n    hasUnavailableAttributes,\n    unavailableAttributes,\n    canAddToCart,\n    scrollToReviews,\n    getOptionValue,\n    adjustQuantity,\n    handleColorSelect,\n    handleSizeSelect,\n    handleAttributeValueSelect,\n    handleAddToWishlist,\n    handleCompareToggle,\n    getRequiredAttributesMessage,\n  } = useProductPage(params);\n\n  const handleAddToCart = async () => {\n    if (!canAddToCart || !product || !currentVariant) return;\n    setIsAddingToCart(true);\n    try {\n      if (!isLoggedIn) {\n        const stored = localStorage.getItem('shop_cart_guest');\n        const cart = stored ? JSON.parse(stored) : [];\n        const existing = cart.find((i: any) => i.variantId === currentVariant.id);\n        if (existing) existing.quantity += quantity;\n        else cart.push({ productId: product.id, productSlug: product.slug, variantId: currentVariant.id, quantity });\n        localStorage.setItem('shop_cart_guest', JSON.stringify(cart));\n      } else {\n        await apiClient.post('/api/v1/cart/items', { productId: product.id, variantId: currentVariant.id, quantity });\n      }\n      setShowMessage(`${t(language, 'product.addedToCart')} ${quantity} ${t(language, 'product.pcs')}`);\n      window.dispatchEvent(new Event('cart-updated'));\n    } catch (err) { \n      setShowMessage(t(language, 'product.errorAddingToCart')); \n    } finally { \n      setIsAddingToCart(false); \n      setTimeout(() => setShowMessage(null), 2000); \n    }\n  };\n\n  if (loading || !product) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 py-16 text-center\">\n        {t(language, 'common.messages.loading')}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div className=\"grid grid-cols-1 lg:grid-cols-[55%_45%] gap-12 items-start\">\n        <ProductImageGallery\n          images={images}\n          product={product}\n          discountPercent={discountPercent}\n          language={language}\n          currentImageIndex={currentImageIndex}\n          onImageIndexChange={setCurrentImageIndex}\n          thumbnailStartIndex={thumbnailStartIndex}\n          onThumbnailStartIndexChange={setThumbnailStartIndex}\n        />\n\n          <ProductInfoAndActions\n            product={product}\n            price={price}\n            originalPrice={originalPrice}\n            compareAtPrice={compareAtPrice}\n            discountPercent={discountPercent}\n            currency={currency}\n            language={language}\n            averageRating={averageRating}\n            reviewsCount={reviews.length}\n            quantity={quantity}\n            maxQuantity={maxQuantity}\n            isOutOfStock={isOutOfStock}\n            isVariationRequired={isVariationRequired}\n            hasUnavailableAttributes={hasUnavailableAttributes}\n            unavailableAttributes={unavailableAttributes}\n            canAddToCart={canAddToCart}\n            isAddingToCart={isAddingToCart}\n            isInWishlist={isInWishlist}\n            isInCompare={isInCompare}\n            showMessage={showMessage}\n            isLoggedIn={isLoggedIn}\n            currentVariant={currentVariant}\n            attributeGroups={attributeGroups}\n            selectedColor={selectedColor}\n            selectedSize={selectedSize}\n            selectedAttributeValues={selectedAttributeValues}\n            colorGroups={colorGroups}\n            sizeGroups={sizeGroups}\n            onQuantityAdjust={adjustQuantity}\n            onAddToCart={handleAddToCart}\n            onAddToWishlist={handleAddToWishlist}\n            onCompareToggle={handleCompareToggle}\n            onScrollToReviews={scrollToReviews}\n            onColorSelect={handleColorSelect}\n            onSizeSelect={handleSizeSelect}\n            onAttributeValueSelect={handleAttributeValueSelect}\n            getOptionValue={getOptionValue}\n            getRequiredAttributesMessage={getRequiredAttributesMessage}\n          />\n      </div>\n\n      <div id=\"product-reviews\" className=\"mt-24 scroll-mt-24\">\n        <ProductReviews productSlug={slug} productId={product.id} />\n      </div>\n      <div className=\"mt-16\">\n        <RelatedProducts categorySlug={product.categories?.[0]?.slug} currentProductId={product.id} />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}