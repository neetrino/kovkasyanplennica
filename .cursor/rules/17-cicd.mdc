---
description: CI/CD-’´ ’Ø’°’∂’∏’∂’∂’•÷Ä÷â GitHub Actions, pipeline-’∂’•÷Ä, ’§’•’∫’¨’∏’µ÷â
globs: [".github/**", "**/Dockerfile", "**/docker-compose*"]
alwaysApply: false
---

# CI/CD-‘ª ‘ø‘±’Ü’à’Ü’Ü‘µ’ê

> ‘±’æ’ø’∏’¥’°’ø’°÷Å’∏÷Ç’¥ = ’Ø’∏’∂’Ω’´’Ω’ø’•’∂’ø’∏÷Ç’©’µ’∏÷Ç’∂÷â ’Ö’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä commit ’°’∂÷Å’∂’∏÷Ç’¥ ’ß ’∂’∏÷Ç’µ’∂ ’Ω’ø’∏÷Ç’£’∏÷Ç’¥’∂’•÷Ä’®÷â

---

## üéØ ’Ä‘ª’Ñ’Ü‘±‘ø‘±’Ü ’ç‘ø‘∂‘≤’à’í’Ü’î’Ü‘µ’ê

1. **Fail Fast** ‚Äî ’¢’º’∂’∏÷Ç’¥ ’•’∂÷Ñ ’Ω’≠’°’¨’∂’•÷Ä’® ’∏÷Ä÷Ñ’°’∂ ’∞’∂’°÷Ä’°’æ’∏÷Ä ’ß ’∑’∏÷Ç’ø
2. **‘±’æ’ø’∏’¥’°’ø’°÷Å’∏÷Ç’¥** ‚Äî ’∂’æ’°’¶’°’£’∏÷Ç’µ’∂ ’±’•’º÷Ñ’∏’æ ’£’∏÷Ä’Æ’∏’≤’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä
3. **Reproducible** ‚Äî ’∂’∏÷Ç’µ’∂ ’°÷Ä’§’µ’∏÷Ç’∂÷Ñ ’°’¥’•’∂ ’°’∂’£’°’¥
4. **‘±’∂’æ’ø’°’∂’£’∏÷Ç’©’µ’∏÷Ç’∂** ‚Äî ’£’°’≤’ø’∂’´÷Ñ’∂’•÷Ä’® GitHub Secrets-’∏÷Ç’¥

---

## üì¶ PIPELINE-‘ª ‘ø‘±’ê‘≥’à’í’ë’é‘±‘ø’î

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       CI PIPELINE                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Install ‚îÇ  Lint   ‚îÇ  Type   ‚îÇ  Test   ‚îÇ  Build  ‚îÇ Security ‚îÇ
‚îÇ         ‚îÇ         ‚îÇ  Check  ‚îÇ         ‚îÇ         ‚îÇ  Audit   ‚îÇ
‚îÇ  deps   ‚îÇ ESLint  ‚îÇ   tsc   ‚îÇ  Jest   ‚îÇ Next.js ‚îÇ   npm    ‚îÇ
‚îÇ         ‚îÇ Prettier‚îÇ         ‚îÇPlaywright‚îÇ         ‚îÇ  audit   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       CD PIPELINE                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     Preview     ‚îÇ     Staging     ‚îÇ      Production         ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ                         ‚îÇ
‚îÇ   PR preview    ‚îÇ   develop ‚Üí     ‚îÇ   main ‚Üí                ‚îÇ
‚îÇ   environments  ‚îÇ   staging env   ‚îÇ   production env        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß GITHUB ACTIONS

### CI Workflow

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

# ’â’•’≤’°÷Ä’Ø’•’¨ ’∂’°’≠’∏÷Ä’§ ’£’∏÷Ä’Æ’°÷Ä’Ø’∏÷Ç’¥’∂’•÷Ä’® ’∂’∏÷Ç’µ’∂ PR-’´ ’∞’°’¥’°÷Ä
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  NODE_VERSION: '20'
  PNPM_VERSION: '9'

jobs:
  # ==========================================
  # LINT & TYPECHECK
  # ==========================================
  lint:
    name: Lint & Typecheck
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Lint
        run: pnpm lint

      - name: Type check
        run: pnpm type-check

      - name: Format check
        run: pnpm format:check

  # ==========================================
  # TEST
  # ==========================================
  test:
    name: Test
    runs-on: ubuntu-latest
    needs: lint
    
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_USER: test
          POSTGRES_PASSWORD: test
          POSTGRES_DB: test
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Generate Prisma Client
        run: pnpm prisma generate

      - name: Run migrations
        run: pnpm prisma migrate deploy
        env:
          DATABASE_URL: postgresql://test:test@localhost:5432/test

      - name: Run unit tests
        run: pnpm test:unit
        env:
          DATABASE_URL: postgresql://test:test@localhost:5432/test

      - name: Run integration tests
        run: pnpm test:integration
        env:
          DATABASE_URL: postgresql://test:test@localhost:5432/test

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/lcov.info
          fail_ci_if_error: false

  # ==========================================
  # BUILD
  # ==========================================
  build:
    name: Build
    runs-on: ubuntu-latest
    needs: [lint, test]
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Build
        run: pnpm build
        env:
          # ’Ü’æ’°’¶’°’£’∏÷Ç’µ’∂ env build-’´ ’∞’°’¥’°÷Ä
          NEXT_PUBLIC_API_URL: https://api.example.com

      - name: Upload build artifacts
        uses: actions/upload-artifact@v4
        with:
          name: build
          path: .next
          retention-days: 1

  # ==========================================
  # SECURITY
  # ==========================================
  security:
    name: Security Audit
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Audit dependencies
        run: pnpm audit --prod
        continue-on-error: true  # ’â’°÷Ä’£’•’¨’°÷É’°’Ø’•’∂÷Ñ, ’¢’°’µ÷Å ÷Å’∏÷Ç’µ÷Å ’ø’°’∂÷Ñ

      - name: Check for secrets
        uses: trufflesecurity/trufflehog@main
        with:
          extra_args: --only-verified
```

### CD Workflow

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [main, develop]
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy'
        required: true
        default: 'staging'
        type: choice
        options:
          - staging
          - production

jobs:
  # ==========================================
  # DEPLOY STAGING (develop branch)
  # ==========================================
  deploy-staging:
    name: Deploy to Staging
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    environment:
      name: staging
      url: https://staging.example.com
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Deploy to Vercel (Staging)
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod --env staging'
          alias-domains: staging.example.com

  # ==========================================
  # DEPLOY PRODUCTION (main branch)
  # ==========================================
  deploy-production:
    name: Deploy to Production
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    environment:
      name: production
      url: https://example.com
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # Database migrations
      - name: Run migrations
        run: |
          pnpm prisma migrate deploy
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}

      - name: Deploy to Vercel (Production)
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'

      - name: Notify on success
        if: success()
        run: |
          curl -X POST ${{ secrets.SLACK_WEBHOOK }} \
            -H 'Content-type: application/json' \
            -d '{"text":"‚úÖ Deployed to production: ${{ github.sha }}"}'

      - name: Notify on failure
        if: failure()
        run: |
          curl -X POST ${{ secrets.SLACK_WEBHOOK }} \
            -H 'Content-type: application/json' \
            -d '{"text":"‚ùå Production deploy failed: ${{ github.sha }}"}'
```

### Preview Deployments

```yaml
# .github/workflows/preview.yml
name: Preview

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  preview:
    name: Deploy Preview
    runs-on: ubuntu-latest
    environment:
      name: preview
      url: ${{ steps.deploy.outputs.preview-url }}
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Deploy Preview
        id: deploy
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}

      - name: Comment PR
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `üöÄ Preview deployed: ${{ steps.deploy.outputs.preview-url }}`
            })
```

---

## üê≥ DOCKER

### Dockerfile (Production)

```dockerfile
# Dockerfile
# Multi-stage build ’∂’æ’°’¶’°’£’∏÷Ç’µ’∂ image-’´ ’∞’°’¥’°÷Ä

# ==========================================
# DEPENDENCIES
# ==========================================
FROM node:20-alpine AS deps
WORKDIR /app

# Native modules-’´ ’Ø’°’≠’æ’°’Æ’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä
RUN apk add --no-cache libc6-compat

# Package ÷Ü’°’µ’¨’•÷Ä
COPY package.json pnpm-lock.yaml ./
COPY prisma ./prisma/

# ‘ø’°’≠’æ’°’Æ’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä
RUN corepack enable pnpm && pnpm install --frozen-lockfile

# ==========================================
# BUILDER
# ==========================================
FROM node:20-alpine AS builder
WORKDIR /app

COPY --from=deps /app/node_modules ./node_modules
COPY . .

# Prisma Client ’£’•’∂’•÷Ä’°÷Å’´’°
RUN corepack enable pnpm && pnpm prisma generate

# ’Ä’°’æ’•’¨’æ’°’Æ’´ build
ENV NEXT_TELEMETRY_DISABLED 1
RUN pnpm build

# ==========================================
# RUNNER
# ==========================================
FROM node:20-alpine AS runner
WORKDIR /app

ENV NODE_ENV production
ENV NEXT_TELEMETRY_DISABLED 1

# ’ï’£’ø’°’ø’´÷Ä’∏’ª ’Ω’ø’•’≤’Æ’∏÷Ç’¥ (’∏’π root)
RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

# ’Ñ’´’°’µ’∂ ’°’∂’∞÷Ä’°’™’•’∑’ø’®
COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static
COPY --from=builder /app/prisma ./prisma

# ‘π’≤’©’°’∫’°’∂’°’Ø’∂’•÷Ä’´ ’´÷Ä’°’æ’∏÷Ç’∂÷Ñ’∂’•÷Ä
RUN chown -R nextjs:nodejs /app

USER nextjs

EXPOSE 3000

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

### docker-compose (Development)

```yaml
# docker-compose.yml
version: '3.8'

services:
  # PostgreSQL
  postgres:
    image: postgres:15-alpine
    container_name: app-postgres
    restart: unless-stopped
    environment:
      POSTGRES_USER: ${DB_USER:-app}
      POSTGRES_PASSWORD: ${DB_PASSWORD:-password}
      POSTGRES_DB: ${DB_NAME:-app}
    volumes:
      - postgres-data:/var/lib/postgresql/data
    ports:
      - '5432:5432'
    healthcheck:
      test: ['CMD-SHELL', 'pg_isready -U ${DB_USER:-app}']
      interval: 10s
      timeout: 5s
      retries: 5

  # Redis
  redis:
    image: redis:7-alpine
    container_name: app-redis
    restart: unless-stopped
    command: redis-server --appendonly yes
    volumes:
      - redis-data:/data
    ports:
      - '6379:6379'
    healthcheck:
      test: ['CMD', 'redis-cli', 'ping']
      interval: 10s
      timeout: 5s
      retries: 5

  # App (production-like testing-’´ ’∞’°’¥’°÷Ä)
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: app
    restart: unless-stopped
    environment:
      DATABASE_URL: postgresql://${DB_USER:-app}:${DB_PASSWORD:-password}@postgres:5432/${DB_NAME:-app}
      REDIS_URL: redis://redis:6379
      NODE_ENV: production
    ports:
      - '3000:3000'
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy

volumes:
  postgres-data:
  redis-data:
```

---

## üìú SCRIPTS (package.json)

### Base scripts ‚Äî Next.js

> CI quality pipeline template: `reference/workflows/ci-quality.yml.example`

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",

    "format": "prettier . --write",
    "format:check": "prettier . --check",

    "lint": "next lint --max-warnings=0",
    "typecheck": "tsc --noEmit",

    "test": "vitest run --passWithNoTests",
    "test:coverage": "vitest run --coverage",

    "ci:check": "pnpm format:check && pnpm lint && pnpm typecheck && pnpm test && pnpm build",

    "prepare": "husky"
  }
}
```

### Prisma scripts (add when using Prisma)

```json
{
  "scripts": {
    "typecheck": "prisma generate && tsc --noEmit",

    "db:generate": "prisma generate",
    "db:migrate": "prisma migrate dev",
    "db:migrate:deploy": "prisma migrate deploy",
    "db:push": "prisma db push",
    "db:seed": "prisma db seed",
    "db:studio": "prisma studio"
  }
}
```

### E2E scripts (add when stable user flows exist)

```json
{
  "scripts": {
    "test:e2e": "playwright test"
  }
}
```

### Docker scripts (only for self-hosted)

```json
{
  "scripts": {
    "docker:up": "docker-compose up -d",
    "docker:down": "docker-compose down",
    "docker:logs": "docker-compose logs -f"
  }
}
```

### NestJS scripts (Size B/C ‚Äî separate backend)

```json
{
  "scripts": {
    "lint": "eslint . --max-warnings=0",
    "test": "jest --passWithNoTests",
    "test:e2e": "jest --config ./test/jest-e2e.json",
    "build": "nest build"
  }
}
```

---

## üîê –°–ï–ö–†–ï–¢–´

### GitHub Secrets

```markdown
## ’ä’°÷Ä’ø’°’§’´÷Ä ’£’°’≤’ø’∂’´÷Ñ’∂’•÷Ä

| ‘≥’°’≤’ø’∂’´÷Ñ | ’Ü’Ø’°÷Ä’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂ |
|--------|----------|
| `DATABASE_URL` | Connection string ‘≤‘¥-’´’∂ |
| `VERCEL_TOKEN` | Vercel token |
| `VERCEL_ORG_ID` | Vercel org ID |
| `VERCEL_PROJECT_ID` | Vercel project ID |

## ‘∏’∂’ø÷Ä’∏’æ’´

| ‘≥’°’≤’ø’∂’´÷Ñ | ’Ü’Ø’°÷Ä’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂ |
|--------|----------|
| `SLACK_WEBHOOK` | Webhook ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥’∂’•÷Ä’´ ’∞’°’¥’°÷Ä |
| `CODECOV_TOKEN` | Codecov token |
| `SENTRY_DSN` | Sentry DSN |
```

### Environments

```yaml
# GitHub Environments:
# - preview (PR-’´ ’∞’°’¥’°÷Ä)
# - staging (develop branch)
# - production (main branch, approval ’ß ’∫’°’∞’°’∂’ª’∏÷Ç’¥)
```

---

## üö© FEATURE FLAGS

### ‘ª’∂’π’∏÷Ç ’•’∂ ’∫’•’ø÷Ñ

- ’Ü’∏÷Ä ÷Ü’´’π’•÷Ä’´ ’°’Ω’ø’´’≥’°’∂’°’Ø’°’∂ rollout
- A/B ’©’•’Ω’ø’°’æ’∏÷Ä’∏÷Ç’¥
- ‘Ω’∂’§÷Ä’°’∞’°÷Ä’∏÷Ç’µ÷Å ÷Ü’´’π’•÷Ä’´ kill switch
- Deploy ÷á release-’´ ’¢’°’™’°’∂’∏÷Ç’¥

### ’ä’°÷Ä’¶ ’´÷Ä’°’Ø’°’∂’°÷Å’∏÷Ç’¥

```typescript
// lib/feature-flags.ts

type FeatureFlag = {
  enabled: boolean;
  percentage?: number;  // ‘±’Ω’ø’´’≥’°’∂’°’Ø’°’∂ rollout-’´ ’∞’°’¥’°÷Ä
  allowedUsers?: string[];  // Beta tester-’∂’•÷Ä’´ ’∞’°’¥’°÷Ä
};

const FLAGS: Record<string, FeatureFlag> = {
  'new-checkout': {
    enabled: true,
    percentage: 10,  // 10% ÷Ö’£’ø’°’ø’•÷Ä’•÷Ä
  },
  'dark-mode': {
    enabled: true,
    allowedUsers: ['user-123', 'user-456'],
  },
  'experimental-search': {
    enabled: false,
  },
};

export function isFeatureEnabled(
  flagName: string,
  userId?: string,
): boolean {
  const flag = FLAGS[flagName];
  if (!flag || !flag.enabled) return false;

  // ’ç’ø’∏÷Ç’£’∏÷Ç’¥ ’•’∂÷Ñ ’©’∏÷Ç’µ’¨’°’ø÷Ä’æ’°’Æ ÷Å’°’∂’Ø’®
  if (flag.allowedUsers?.includes(userId ?? '')) {
    return true;
  }

  // ’ç’ø’∏÷Ç’£’∏÷Ç’¥ ’•’∂÷Ñ ’ø’∏’Ø’∏’Ω’®
  if (flag.percentage !== undefined && userId) {
    const hash = simpleHash(userId + flagName);
    return (hash % 100) < flag.percentage;
  }

  return flag.enabled;
}

function simpleHash(str: string): number {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = ((hash << 5) - hash) + str.charCodeAt(i);
    hash |= 0;
  }
  return Math.abs(hash);
}
```

### ’ï’£’ø’°’£’∏÷Ä’Æ’∏÷Ç’¥

```tsx
// React ’Ø’∏’¥’∫’∏’∂’•’∂’ø’∏÷Ç’¥
function CheckoutPage() {
  const { user } = useAuth();
  const showNewCheckout = isFeatureEnabled('new-checkout', user?.id);

  if (showNewCheckout) {
    return <NewCheckout />;
  }
  return <OldCheckout />;
}

// –í API
@Get('search')
async search(@Query() query: SearchDto, @CurrentUser() user: User) {
  if (isFeatureEnabled('experimental-search', user?.id)) {
    return this.experimentalSearch(query);
  }
  return this.classicSearch(query);
}
```

### ‘∏’∂’§’¨’°’µ’∂’æ’°’Æ ’¨’∏÷Ç’Æ’∏÷Ç’¥’∂’•÷Ä

```markdown
## Feature Flags ’Ω’•÷Ä’æ’´’Ω’∂’•÷Ä

| ’ç’•÷Ä’æ’´’Ω | ‘ª÷Ä plus-’•÷Ä’® | Minus-’∂’•÷Ä |
|--------|-------|--------|
| LaunchDarkly | ’Ä’¶’∏÷Ä, A/B, analytics | ‘π’°’∂’Ø |
| Unleash | Open source, self-hosted | ’ä’•’ø÷Ñ ’ß host ’°’∂’•’¨ |
| ConfigCat | ’ä’°÷Ä’¶, ’ß’™’°’∂ | ‘±’æ’•’¨’´ ÷Ñ’´’π ÷Ü’´’π’•÷Ä |
| Flagsmith | Open source, ’¨’°’æ UI | ‘µ÷Ä’´’ø’°’Ω’°÷Ä’§ |
| Env vars | ‘±’∂’æ’≥’°÷Ä, ’∫’°÷Ä’¶ | Redeploy ’ß ’∫’°’∞’°’∂’ª’∏÷Ç’¥ |
```

### Environment-based flags

```typescript
// ’ä’°÷Ä’¶ ’ø’°÷Ä’¢’•÷Ä’°’Ø env-’∏’æ
const FEATURES = {
  NEW_CHECKOUT: process.env.FEATURE_NEW_CHECKOUT === 'true',
  DARK_MODE: process.env.FEATURE_DARK_MODE === 'true',
};

// .env.staging
FEATURE_NEW_CHECKOUT=true
FEATURE_DARK_MODE=true

// .env.production
FEATURE_NEW_CHECKOUT=false
FEATURE_DARK_MODE=true
```

### Feature Flags-’´ ’Ø’°’∂’∏’∂’∂’•÷Ä

```markdown
## Best Practices

### ‘±’∂’æ’°’∂’∏÷Ç’¥
- ‚úÖ `new-checkout`, `experimental-search`
- ‚ùå `flag1`, `test`, `temp`

### Lifecycle
1. ’ç’ø’•’≤’Æ’•’¨ flag (disabled)
2. ’Ñ’´’°÷Å’∂’•’¨ dev/staging-’´ ’∞’°’¥’°÷Ä
3. ‘±’Ω’ø’´’≥’°’∂’°’Ø’°’∂ rollout prod-’∏÷Ç’¥ (10% ‚Üí 50% ‚Üí 100%)
4. ’ã’∂’ª’•’¨ flag-’® ÷á ’∞’´’∂ ’Ø’∏’§’®

### ’Ä’´’£’´’•’∂’°
- ‚úÖ ’ã’∂’ª’•’¨ flag-’•÷Ä’® ’°’¥’¢’∏’≤’ª’°’Ø’°’∂ rollout-’´÷Å ’∞’•’ø’∏
- ‚úÖ ’ì’°’Ω’ø’°’©’≤’©’°’æ’∏÷Ä’•’¨ ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä flag-’´ ’∂’∑’°’∂’°’Ø’∏÷Ç’©’µ’∏÷Ç’∂’®
- ‚úÖ ’ç’°’∞’¥’°’∂’•’¨ expiration date
- ‚ùå ’Ä’°÷Ä’µ’∏÷Ç÷Ä’°’æ’∏÷Ä flag-’•÷Ä ’π’Ø’∏÷Ç’ø’°’Ø’•’¨

### ’Ñ’∏’∂’´’ø’∏÷Ä’´’∂’£
- ‚úÖ ‘º’∏’£’°’æ’∏÷Ä’•’¨, ’©’• ’∏÷Ä ’ø’°÷Ä’¢’•÷Ä’°’Ø’∂ ’ß ÷Å’∏÷Ç÷Å’°’§÷Ä’æ’•’¨
- ‚úÖ ’Ñ’•’ø÷Ä’´’Ø’∂’•÷Ä ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’ø’°÷Ä’¢’•÷Ä’°’Ø’´ ’∞’°’¥’°÷Ä
- ‚úÖ ‘±’¨’•÷Ä’ø’∂’•÷Ä ’∂’∏÷Ä ’ø’°÷Ä’¢’•÷Ä’°’Ø’´ ’≠’∂’§’´÷Ä’∂’•÷Ä’´ ’§’•’∫÷Ñ’∏÷Ç’¥
```

---

## ‚òÅÔ∏è MANAGED PLATFORMS (Vercel, Railway, Render, Fly.io)

> ‘µ’©’• ’§’•’∫’¨’∏’µ managed ’∫’¨’°’ø÷Ü’∏÷Ä’¥’°’∂’•÷Ä’∏÷Ç’¥ ’ß ‚Äî Docker ÷á K8s ’Ω’•’Ø÷Å’´’°’∂’•÷Ä’® ’æ’•÷Ä÷á’∏÷Ç’¥ ’∫’•’ø÷Ñ ’π’•’∂÷â

### ’ä’¨’°’ø÷Ü’∏÷Ä’¥’∂’•÷Ä’´ ’∞’°’¥’•’¥’°’ø’∏÷Ç’©’µ’∏÷Ç’∂

```markdown
| ’ä’¨’°’ø÷Ü’∏÷Ä’¥’° | Best for | ‘≤’∂’∏÷Ç’©’°’£÷Ä’•÷Ä |
|-----------|----------|-------------|
| **Vercel** | Next.js, Frontend | Edge Functions, ISR, ’´’§’•’°’¨ Next.js-’´ ’∞’°’¥’°÷Ä |
| **Railway** | Full-stack, API | ’ä’°÷Ä’¶, ’¨’°’æ DX, ’°’æ’•’¨’´ ’ß’™’°’∂ Vercel-’´÷Å backend-’´ ’∞’°’¥’°÷Ä |
| **Render** | Full-stack | ‘±’∂’æ’≥’°÷Ä tier, background workers |
| **Fly.io** | Global, Edge | ‘ø’∏’∂’ø’•’µ’∂’•÷Ä’∂’•÷Ä ’¥’∏’ø ÷Ö’£’ø’°’ø’•÷Ä’•÷Ä’´’∂, low latency |
```

### Vercel (Next.js)

```markdown
## ‘ª’∂’π Vercel-’® ’°’æ’ø’∏’¥’°’ø ’°’∂’∏÷Ç’¥ ’ß

- ‚úÖ Build ÷á deploy push-’´ ’§’•’∫÷Ñ’∏÷Ç’¥
- ‚úÖ Preview deployment ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä PR-’´ ’∞’°’¥’°÷Ä
- ‚úÖ SSL ’Ω’•÷Ä’ø’´÷Ü’´’Ø’°’ø’∂’•÷Ä
- ‚úÖ CDN / Edge Network
- ‚úÖ Environment variables management
- ‚úÖ Analytics –∏ Speed Insights
- ‚úÖ ‘ª’∂’ø’•’£÷Ä’°÷Å’´’° Neon-’´ ’∞’•’ø (auto DB branches)

## ‘ø’°÷Ä’£’°’æ’∏÷Ä’∏÷Ç’¥

1. ’Ñ’´’°÷Å’∂’•’¨ GitHub repo
2. ‘∏’∂’ø÷Ä’•’¨ Framework Preset. Next.js
3. ‘ø’°÷Ä’£’°’æ’∏÷Ä’•’¨ Environment Variables
4. Deploy
```

```typescript
// vercel.json (’®’∂’ø÷Ä’∏’æ’´, custom-’´ ’∞’°’¥’°÷Ä)
{
  "framework": "nextjs",
  "regions": ["iad1"],  // US East (’¥’∏’ø Neon-’´’∂)
  "env": {
    "NEXT_PUBLIC_API_URL": "https://api.example.com"
  },
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        { "key": "Cache-Control", "value": "no-store" }
      ]
    }
  ]
}
```

### Railway

```markdown
## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- Backend API (NestJS, Express)
- Cron jobs / background workers
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–µ —Ç–æ–ª—å–∫–æ frontend)
- –ù—É–∂–Ω–∞ –ë–î –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã —Ä—è–¥–æ–º

## –ß—Ç–æ Railway –¥–µ–ª–∞–µ—Ç

- ‚úÖ Auto-deploy push-’´ ’§’•’∫÷Ñ’∏÷Ç’¥
- ‚úÖ Preview environments
- ‚úÖ ’Ü’•÷Ä’Ø’°’º’∏÷Ç÷Å’æ’°’Æ ’Ω’•÷Ä’æ’´’Ω’∂’•÷Ä (Postgres, Redis ÷á ’°’µ’¨’∂)
- ‚úÖ Private ÷Å’°’∂÷Å ’Ω’•÷Ä’æ’´’Ω’∂’•÷Ä’´ ’¥’´’ª÷á
- ‚úÖ Logs ÷á metrics

## ‘ø’°÷Ä’£’°’æ’∏÷Ä’∏÷Ç’¥

1. New Project ‚Üí Deploy from GitHub
2. Railway-’∂ ’°’æ’ø’∏’¥’°’ø ’∏÷Ä’∏’∑’∏÷Ç’¥ ’ß framework-’®
3. Add Variables
4. Deploy
```

```toml
# railway.toml (’®’∂’ø÷Ä’∏’æ’´)
[build]
builder = "nixpacks"

[deploy]
startCommand = "pnpm start:prod"
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "on_failure"
```

### Render

```markdown
## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ù—É–∂–µ–Ω –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier
- Background workers / Cron
- Static sites
- –ü—Ä–æ—Å—Ç—ã–µ API

## ‘≤’∂’∏÷Ç’©’°’£÷Ä’•÷Ä

- ‚úÖ Free tier (’Ω’°’∞’¥’°’∂’°÷É’°’Ø’∏÷Ç’¥’∂’•÷Ä’∏’æ)
- ‚úÖ Auto-deploy
- ‚úÖ Background workers
- ‚ö†Ô∏è Cold start-’•÷Ä free tier-’∏÷Ç’¥
```

```yaml
# render.yaml ‚Äî NestJS backend Render-’∏÷Ç’¥
services:
  - type: web
    name: nestjs-api
    runtime: docker                      # Dockerfile NestJS-’´ ’∞’°’¥’°÷Ä
    dockerfilePath: ./Dockerfile
    healthCheckPath: /health/live
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        sync: false                      # ’Å’•’º÷Ñ’∏’æ (Neon pooler URL)
      - key: DIRECT_URL
        sync: false                      # Neon direct URL ’¥’´’£÷Ä’°÷Å’´’°’∂’•÷Ä’´ ’∞’°’¥’°÷Ä
      - key: PORT
        value: 3000
```

```dockerfile
# Dockerfile ‚Äî NestJS Render-’∏÷Ç’¥
FROM node:20-alpine AS base
RUN corepack enable && corepack prepare pnpm@latest --activate

FROM base AS deps
WORKDIR /app
COPY package.json pnpm-lock.yaml ./
RUN pnpm install --frozen-lockfile --prod=false

FROM base AS build
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .
RUN pnpm prisma generate && pnpm build

FROM base AS production
WORKDIR /app
ENV NODE_ENV=production
COPY --from=deps /app/node_modules ./node_modules
COPY --from=build /app/dist ./dist
COPY --from=build /app/prisma ./prisma
COPY package.json pnpm-lock.yaml ./

EXPOSE 3000
CMD ["node", "dist/main.js"]
```

### Fly.io

```markdown
## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ù—É–∂–Ω–∞ low latency globally
- Edge computing
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
- WebSockets / real-time apps

## ‘≤’∂’∏÷Ç’©’°’£÷Ä’•÷Ä

- ‚úÖ ‘¥’•’∫’¨’∏’µ ’ø’°÷Ä’°’Æ’°’∑÷Ä’ª’°’∂’∂’•÷Ä’∏÷Ç’¥ ’¥’∏’ø ÷Ö’£’ø’°’ø’•÷Ä’•÷Ä’´’∂
- ‚úÖ Fly Machines (’Ø’∏’∂’ø’•’µ’∂’•÷Ä’∂’•÷Ä)
- ‚úÖ ’Ü’•÷Ä’Ø’°’º’∏÷Ç÷Å’æ’°’Æ Postgres ÷á Redis
- ‚úÖ Private networking
- ‚ö†Ô∏è ‘±’æ’•’¨’´ ’¢’°÷Ä’§ ÷Ñ’°’∂ Vercel/Railway
```

```toml
# fly.toml
app = "my-app"
primary_region = "iad"

[build]
  dockerfile = "Dockerfile"

[http_service]
  internal_port = 3000
  force_https = true

[[services]]
  protocol = "tcp"
  internal_port = 3000

  [[services.ports]]
    port = 443
    handlers = ["tls", "http"]

  [[services.http_checks]]
    path = "/health"
    interval = 10000
    timeout = 2000
```

### –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ —Å managed –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏

```markdown
## –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å

- ‚ùå –ü–∏—Å–∞—Ç—å Dockerfile (Vercel, Railway)
- ‚ùå –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Nginx/reverse proxy
- ‚ùå SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚ùå CI/CD pipelines –¥–ª—è deploy (–≤—Å—Ç—Ä–æ–µ–Ω–æ)
- ‚ùå Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
- ‚ùå docker-compose –¥–ª—è production

## –í—Å—ë —Ä–∞–≤–Ω–æ –Ω—É–∂–Ω–æ

- ‚úÖ GitHub Actions –¥–ª—è CI (lint, test, typecheck)
- ‚úÖ Environment variables –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
- ‚úÖ Health check endpoint (/health –∏–ª–∏ /api/health)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Vercel Analytics, Sentry, etc.)
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –Ω–∞ managed –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

```markdown
## Vercel + Neon

# –í package.json
"scripts": {
  "postinstall": "prisma generate",
  "vercel-build": "prisma generate && prisma migrate deploy && next build"
}

## Railway

# –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Deploy Command:
pnpm prisma migrate deploy && pnpm start:prod

## –ò–ª–∏ —á–µ—Ä–µ–∑ GitHub Actions (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

- –ú–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —à–∞–≥–æ–º
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–∞ (–Ω–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ)
- –î–µ–ª–∞—Ç—å backup –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
```

---

## üìã CHECKLIST

### CI Pipeline (GitHub Actions)

- [ ] Lint (ESLint)
- [ ] Format check (Prettier)
- [ ] Type check (TypeScript)
- [ ] Unit tests
- [ ] Integration tests
- [ ] Build
- [ ] Security audit

### CD Pipeline (Managed Platforms)

- [ ] Preview deployments –¥–ª—è PR *(–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ Vercel/Railway)*
- [ ] Staging environment –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Production deploy (main branch)
- [ ] Database migrations
- [ ] Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Health check endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç

### Docker (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ self-hosted –∏–ª–∏ Fly.io)

- [ ] Multi-stage build
- [ ] Non-root user
- [ ] Health checks
- [ ] .dockerignore –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### Vercel Checklist

- [ ] Framework Preset –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (Next.js)
- [ ] Environment Variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Neon Integration –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] Custom domain –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Analytics –≤–∫–ª—é—á—ë–Ω

### Railway/Render Checklist

- [ ] Repo –ø–æ–¥–∫–ª—é—á—ë–Ω
- [ ] Build/Start commands –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Environment Variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Health check —Ä–∞–±–æ—Ç–∞–µ—Ç

### Feature Flags (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

- [ ] –§–ª–∞–≥–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ï—Å—Ç—å kill switch –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∏—á
- [ ] –°—Ç–∞—Ä—ã–µ —Ñ–ª–∞–≥–∏ —É–¥–∞–ª—è—é—Ç—Å—è
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–∫–∞–∑–∞–Ω

---

---

## üì¶ –£–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–Ø–ú–ò

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

| –¢–∏–ø –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–≥–¥–∞ |
|----------------|----------|-------|
| Patch (x.x.1 ‚Üí x.x.2) | –û–±–Ω–æ–≤–ª—è–π —Å—Ä–∞–∑—É | –í —Ä–∞–±–æ—á–µ–º PR –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–æ–º–º–∏—Ç–æ–º |
| Minor (x.1.0 ‚Üí x.2.0) | –û–±–Ω–æ–≤–ª—è–π –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏ | –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ changelog |
| Major (1.x ‚Üí 2.x) | –ü–ª–∞–Ω–∏—Ä—É–π –º–∏–≥—Ä–∞—Ü–∏—é | –û—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞, —Ç–µ—Å—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã |

### Lockfile

- ‚úÖ –í—Å–µ–≥–¥–∞ –∫–æ–º–º–∏—Ç—å `pnpm-lock.yaml` (–∏–ª–∏ `package-lock.json`)
- ‚úÖ `pnpm install --frozen-lockfile` –≤ CI
- ‚ùå –ù–µ —É–¥–∞–ª—è–π lockfile –¥–ª—è "–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º"

### –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# –ï–∂–µ–º–µ—Å—è—á–Ω–æ (–∏–ª–∏ –≤ CI)
pnpm audit
pnpm audit --fix  # –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ patch-—É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
```

### –ü—Ä–∞–≤–∏–ª–∞

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ `dependencies` (–±–µ–∑ `^`)
- ‚úÖ `pnpm audit` –≤ CI pipeline *(–º–∏–Ω–∏–º—É–º –µ–∂–µ–º–µ—Å—è—á–Ω–æ)*
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π changelog –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ minor/major
- ‚úÖ –û–±–Ω–æ–≤–∏ lockfile –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå –ù–µ –¥–æ–±–∞–≤–ª—è–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –±–µ–∑ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è (–ø—Ä–µ–¥–ø–æ—á—Ç–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π deprecated –ø–∞–∫–µ—Ç—ã

---

**–í–µ—Ä—Å–∏—è:** 1.3
**–î–∞—Ç–∞:** 2026-02-12
